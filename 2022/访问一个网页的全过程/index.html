

<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="noodp" />
    <title>访问一个网页的全过程 - 一个曾经的小码农...</title><meta
  name="Description"
  content="访问一个网页的全过程"
/><meta property="og:title" content="访问一个网页的全过程" />
<meta property="og:description" content="访问一个网页的全过程" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.0x5c0f.cc/2022/%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AA%E7%BD%91%E9%A1%B5%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B/" /><meta property="og:image" content="https://blog.0x5c0f.cc/icons/logo_avatar.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-22T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-06-22T00:00:00+00:00" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://blog.0x5c0f.cc/icons/logo_avatar.png" /><meta name="twitter:title" content="访问一个网页的全过程"/>
<meta name="twitter:description" content="访问一个网页的全过程"/>
<meta
  name="application-name"
  content="DoIt"
/>
<meta
  name="apple-mobile-web-app-title"
  content="DoIt"
/>

<meta name="theme-color" content="#f8f8f8" /><meta name="msapplication-TileColor" content="#da532c" /><link rel="icon" href="/icons/favicon.ico" /><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" /><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" /><link rel="canonical" href="https://blog.0x5c0f.cc/2022/%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AA%E7%BD%91%E9%A1%B5%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B/" /><link rel="prev" href="https://blog.0x5c0f.cc/2022/%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2%E5%B7%A5%E5%85%B7logrotate%E8%AF%A6%E8%A7%A3/" /><link rel="next" href="https://blog.0x5c0f.cc/2022/tomcat%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BC%98%E5%8C%96/" />
<link
      rel="stylesheet"
      href="/css/main.css"
      
    /><link
      rel="stylesheet"
      href="/lib/normalize/normalize.min.css"
      
    /><link
      rel="stylesheet"
      href="/css/color.css"
      
    /><link
      rel="stylesheet"
      href="/css/style.min.css"
      
    /><link
      rel="preload"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
      href="/lib/fontawesome-free/all.min.css"
      
    />
    <noscript
      ><link
        rel="stylesheet"
        href="/lib/fontawesome-free/all.min.css"
        
    /></noscript><link
      rel="preload"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
      href="/lib/animate/animate.min.css"
      
    />
    <noscript
      ><link
        rel="stylesheet"
        href="/lib/animate/animate.min.css"
        
    /></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "访问一个网页的全过程",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://blog.0x5c0f.cc/2022/%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AA%E7%BD%91%E9%A1%B5%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B/"
        },"genre": "posts","keywords": "linux","wordcount":  6188 ,
        "url": "https://blog.0x5c0f.cc/2022/%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AA%E7%BD%91%E9%A1%B5%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B/","datePublished": "2022-06-22T00:00:00+00:00","dateModified": "2022-06-22T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "0x5c0f"},"authors": [{
                        "@type": "Person",
                        "name": "admin"
                    }],"description": "访问一个网页的全过程"
    }
    </script></head>

  <body
    header-desktop="auto"
    header-mobile="auto"
  ><script type="text/javascript">
        function setTheme(theme) {document.body.setAttribute('theme', theme); document.documentElement.style.setProperty('color-scheme', theme === 'light' ? 'light' : 'dark'); window.theme = theme;   window.isDark = window.theme !== 'light' }
        function saveTheme(theme) {window.localStorage && localStorage.setItem('theme', theme);}
        function getMeta(metaName) {const metas = document.getElementsByTagName('meta'); for (let i = 0; i < metas.length; i++) if (metas[i].getAttribute('name') === metaName) return metas[i]; return '';}
        if (window.localStorage && localStorage.getItem('theme')) {let theme = localStorage.getItem('theme');theme === 'light' || theme === 'dark' || theme === 'black' ? setTheme(theme) : (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light')); } else { if ('auto' === 'light' || 'auto' === 'dark' || 'auto' === 'black') setTheme('auto'), saveTheme('auto'); else saveTheme('auto'), window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light');}
        let metaColors = {'light': '#f8f8f8','dark': '#252627','black': '#000000'}
        getMeta('theme-color').content = metaColors[document.body.getAttribute('theme')];
        window.switchThemeEventSet = new Set()
    </script>
    <div id="back-to-top"></div>
    <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="一个曾经的小码农..."><img
    class="logo"
    loading="lazy"
    src="/icons/logo_title.png"
    srcset="/icons/logo_title.png,
        /icons/logo_title.png 1.5x,
        /icons/logo_title.png 2x"
    title="/icons/logo_title.png"
    
    
  /><span id="desktop-header-typeit" class="typeit"></span></a>
    </div>
    <div class="menu">
      <div class="menu-inner"><a
            class="menu-item"
            href="/posts/"
            
          > 文章
            </a><a
            class="menu-item"
            href="/tags/"
            
          > 标签
            </a><a
            class="menu-item"
            href="/categories/"
            
          > 分类
            </a><a
            class="menu-item"
            href="/series/"
            
          > 系列
            </a><a
            class="menu-item"
            href="/about/"
            
          > About
            </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
            <input
              type="text"
              placeholder="搜索文章标题或内容..."
              id="search-input-desktop"
            />
            <a
              href="javascript:void(0);"
              class="search-button search-toggle"
              id="search-toggle-desktop"
              title="搜索"
            >
              <i class="fas fa-search fa-fw"></i>
            </a>
            <a
              href="javascript:void(0);"
              class="search-button search-clear"
              id="search-clear-desktop"
              title="清空"
            >
              <i class="fas fa-times-circle fa-fw"></i>
            </a>
            <span
              class="search-button search-loading"
              id="search-loading-desktop"
            >
              <i class="fas fa-spinner fa-fw fa-spin"></i>
            </span>
          </span><a
            href="javascript:void(0);"
            class="menu-item theme-switch"
            title="切换主题"
          >
            <i class="fas fa-adjust fa-fw"></i>
          </a></div>
    </div>
  </div>
</header><header class="mobile" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="一个曾经的小码农..."><img
    class="logo"
    loading="lazy"
    src="/icons/logo_title.png"
    srcset="/icons/logo_title.png,
        /icons/logo_title.png 1.5x,
        /icons/logo_title.png 2x"
    title="/icons/logo_title.png"
    
    
  /><span id="mobile-header-typeit" class="typeit"></span></a>
      </div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <div class="menu" id="menu-mobile"><div class="search-wrapper">
          <div class="search mobile" id="search-mobile">
            <input
              type="text"
              placeholder="搜索文章标题或内容..."
              id="search-input-mobile"
            />
            <a
              href="javascript:void(0);"
              class="search-button search-toggle"
              id="search-toggle-mobile"
              title="搜索"
            >
              <i class="fas fa-search fa-fw"></i>
            </a>
            <a
              href="javascript:void(0);"
              class="search-button search-clear"
              id="search-clear-mobile"
              title="清空"
            >
              <i class="fas fa-times-circle fa-fw"></i>
            </a>
            <span
              class="search-button search-loading"
              id="search-loading-mobile"
            >
              <i class="fas fa-spinner fa-fw fa-spin"></i>
            </span>
          </div>
          <a
            href="javascript:void(0);"
            class="search-cancel"
            id="search-cancel-mobile"
          >
            取消
          </a>
        </div><a
          class="menu-item"
          href="/posts/"
          title=""
          
        >文章</a><a
          class="menu-item"
          href="/tags/"
          title=""
          
        >标签</a><a
          class="menu-item"
          href="/categories/"
          title=""
          
        >分类</a><a
          class="menu-item"
          href="/series/"
          title=""
          
        >系列</a><a
          class="menu-item"
          href="/about/"
          title=""
          
        >About</a><a
          href="javascript:void(0);"
          class="menu-item theme-switch"
          title="切换主题"
        >
          <i class="fas fa-adjust fa-fw"></i>
        </a></div>
  </div>
</header>
<div class="search-dropdown desktop">
  <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
  <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
        <div class="container"><div class="toc" id="toc-auto">
      <h2 class="toc-title">目录</h2>
      <div
        class="toc-contentalways-active"
        id="toc-content-auto"
      ><nav id="TableOfContents">
  <ul>
    <li><a href="#1-用户从浏览器打开网页的过程">1. 用户从浏览器打开网页的过程</a>
      <ul>
        <li><a href="#11-在浏览器输入httpswwwtaobaocom">1.1. 在浏览器输入<code>https://www.taobao.com</code></a>
          <ul>
            <li><a href="#111-浏览器接收url开启网络请求线程url包括以下部分">1.1.1. 浏览器接收url开启网络请求线程,URL包括以下部分</a></li>
            <li><a href="#112-https协议">1.1.2. https协议</a></li>
          </ul>
        </li>
        <li><a href="#12-dns获取ip地址">1.2. DNS获取IP地址</a>
          <ul>
            <li><a href="#121-寻找ip地址过程">1.2.1. 寻找IP地址过程:</a></li>
          </ul>
        </li>
        <li><a href="#13-根据http协议生成http请求报文">1.3. 根据HTTP协议生成HTTP请求报文</a>
          <ul>
            <li><a href="#131-请求">1.3.1. 请求</a></li>
            <li><a href="#132-响应">1.3.2. 响应</a></li>
          </ul>
        </li>
        <li><a href="#14-tls进行加密提供保密性和数据完整性">1.4. TLS进行加密,提供保密性和数据完整性</a></li>
        <li><a href="#15-tcp三次握手">1.5. TCP三次握手</a></li>
        <li><a href="#16-ip寻址">1.6. IP寻址</a></li>
        <li><a href="#17-arp协议获取mac地址">1.7. ARP协议获取MAC地址</a></li>
        <li><a href="#18-bgp外部网关协议">1.8. BGP外部网关协议</a></li>
        <li><a href="#19-mac寻址">1.9. MAC寻址</a></li>
        <li><a href="#110-服务器接受请求">1.10. 服务器接受请求</a></li>
        <li><a href="#111-服务端处理请求">1.11. 服务端处理请求</a></li>
        <li><a href="#112-服务端提供响应">1.12. 服务端提供响应</a></li>
        <li><a href="#113-四次挥手">1.13. 四次挥手</a>
          <ul>
            <li><a href="#1131-通俗点说就是">1.13.1. 通俗点说就是:</a></li>
          </ul>
        </li>
        <li><a href="#114-浏览器解析和渲染">1.14. 浏览器解析和渲染</a></li>
        <li><a href="#115-交互结束">1.15. 交互结束</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
    </div><script>
        document
          .getElementsByTagName("main")[0]
          .setAttribute("autoTOC", "true");
      </script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">
      访问一个网页的全过程
    </h1><div class="post-meta">
      <div class="post-meta-line">
        <span class="post-author"><span class="author"><span class="author fas fa-user-circle fa-fw"></span><span class="screen-reader-text">  </span><a href="https://blog.0x5c0f.cc/authors/admin">0x5c0f</a></span>
        </span>&nbsp;<span class="post-category">收录于 </span>&nbsp;<span class="post-category">类别 <a href="/categories/linux/"><i class="far fa-folder fa-fw"></i>Linux</a>&nbsp;<a href="/categories/%E6%95%B4%E7%90%86%E6%94%B6%E9%9B%86/"><i class="far fa-folder fa-fw"></i>整理收集</a></span>&nbsp;<span class="post-category">和</span>&nbsp;<span class="post-series">系列 <a href="/series/%E8%BF%90%E7%BB%B4%E8%AE%B0%E4%BA%8B/"><i class="far fa-list-alt fa-fw"></i>运维记事</a></span></div>
      <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time
            datetime="2022-06-22"
            >2022-06-22</time
          >&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime="2022-06-22"
              >2022-06-22</time
            >&nbsp;<i class="fas fa-pencil-alt fa-fw"></i
          >&nbsp;约 6188 字&nbsp;<i class="far fa-clock fa-fw"></i
          >&nbsp;预计阅读 13 分钟&nbsp;<span
            id="/2022/%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AA%E7%BD%91%E9%A1%B5%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B/"
            class="leancloud_visitors"
            data-flag-title="访问一个网页的全过程"
          >
            <i class="far fa-eye fa-fw"></i>&nbsp;<span
              class="leancloud-visitors-count waline-pageview-count"
              data-path="/2022/%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AA%E7%BD%91%E9%A1%B5%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B/"
            ></span
            >&nbsp;次阅读 </span
          >&nbsp;<span
            id="/2022/%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AA%E7%BD%91%E9%A1%B5%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B/"
            class="comment_count"
            data-flag-title="访问一个网页的全过程"
          >
            <i class="far fa-comments fa-fw"></i>&nbsp;<span
              class="waline-comment-count"
              id="waline-comment-count"
              data-path="/2022/%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AA%E7%BD%91%E9%A1%B5%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B/"
            ></span
            >&nbsp;条评论 </span
          >&nbsp;<span>
            <i class="fas fa-balance-scale fa-fw"></i
            >&nbsp;<span><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">CC BY-NC-SA 4.0</a></span>&nbsp; </span
          >&nbsp;</div>
    </div><div
        class="details toc"
        id="toc-static"
        kept=""
      >
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fas fa-angle-right"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-用户从浏览器打开网页的过程">1. 用户从浏览器打开网页的过程</a>
      <ul>
        <li><a href="#11-在浏览器输入httpswwwtaobaocom">1.1. 在浏览器输入<code>https://www.taobao.com</code></a>
          <ul>
            <li><a href="#111-浏览器接收url开启网络请求线程url包括以下部分">1.1.1. 浏览器接收url开启网络请求线程,URL包括以下部分</a></li>
            <li><a href="#112-https协议">1.1.2. https协议</a></li>
          </ul>
        </li>
        <li><a href="#12-dns获取ip地址">1.2. DNS获取IP地址</a>
          <ul>
            <li><a href="#121-寻找ip地址过程">1.2.1. 寻找IP地址过程:</a></li>
          </ul>
        </li>
        <li><a href="#13-根据http协议生成http请求报文">1.3. 根据HTTP协议生成HTTP请求报文</a>
          <ul>
            <li><a href="#131-请求">1.3.1. 请求</a></li>
            <li><a href="#132-响应">1.3.2. 响应</a></li>
          </ul>
        </li>
        <li><a href="#14-tls进行加密提供保密性和数据完整性">1.4. TLS进行加密,提供保密性和数据完整性</a></li>
        <li><a href="#15-tcp三次握手">1.5. TCP三次握手</a></li>
        <li><a href="#16-ip寻址">1.6. IP寻址</a></li>
        <li><a href="#17-arp协议获取mac地址">1.7. ARP协议获取MAC地址</a></li>
        <li><a href="#18-bgp外部网关协议">1.8. BGP外部网关协议</a></li>
        <li><a href="#19-mac寻址">1.9. MAC寻址</a></li>
        <li><a href="#110-服务器接受请求">1.10. 服务器接受请求</a></li>
        <li><a href="#111-服务端处理请求">1.11. 服务端处理请求</a></li>
        <li><a href="#112-服务端提供响应">1.12. 服务端提供响应</a></li>
        <li><a href="#113-四次挥手">1.13. 四次挥手</a>
          <ul>
            <li><a href="#1131-通俗点说就是">1.13.1. 通俗点说就是:</a></li>
          </ul>
        </li>
        <li><a href="#114-浏览器解析和渲染">1.14. 浏览器解析和渲染</a></li>
        <li><a href="#115-交互结束">1.15. 交互结束</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><div class="details admonition warning open">
        <div class="details-summary admonition-title">
          <i class="icon fas fa-exclamation-triangle fa-fwwarning"></i>警告<i
            class="details-icon fas fa-angle-right fa-fw"
          ></i>
        </div>
        <div class="details-content">
          <div class="admonition-content">
            本文最后更新于 <span
              class="timeago"
              datetime="2022-06-22T00:00:00"
              title="June 22, 2022"
            >2022-06-22</span
            >，文中内容可能已过时。</div>
        </div>
      </div><div
    class="details admonition info
      open
    "
  >
    <div class="details-summary admonition-title">
      <i
        class="icon fas fa-info-circle fa-fw"
      ></i
      >引言<i
        class="details-icon fas fa-angle-right fa-fw"
      ></i>
    </div>
    <div class="details-content">
      <div class="admonition-content">思考：请尽可能详细的写出从浏览器地址栏输入<code>https://www.taobao.com</code>之后到返回首页内容的整个过程中的交互细节。
这是我刚开始工作的时候，leader给的思考题，当时也是花了好多功夫才总结出来的，所以想记录一下。这个题目我在校招的时候也被问过，算是很重要的知识点 了。</div>
    </div>
  </div>
<h1 id="1-用户从浏览器打开网页的过程" class="headerLink">
    <a href="#1-%e7%94%a8%e6%88%b7%e4%bb%8e%e6%b5%8f%e8%a7%88%e5%99%a8%e6%89%93%e5%bc%80%e7%bd%91%e9%a1%b5%e7%9a%84%e8%bf%87%e7%a8%8b" class="header-mark"></a>1. 用户从浏览器打开网页的过程</h1><ul>
<li>DNS解析
<ul>
<li>当将网页输入到浏览器会车后，浏览器会首先查询本地缓存和hosts文件，如果里面都没有这个域名的话，将会通过网卡配置的dns服务器(localdns)进行查找,如果localdns里面也查询不到这个域名服务器，localdns将会把这个请求发送到全球13台DNS根服务器(根服务器只管理顶级域名，又称为一级域名)进行查询</li>
</ul>
</li>
<li>TCP三次握手建立连接</li>
<li>HTTP请求报文处理
<ul>
<li>请求方法URI协议/版本</li>
<li>请求头(Request Header)</li>
<li>请求正文</li>
</ul>
</li>
<li>网站内部数据(发送、接收)整理响应</li>
<li>HTTP响应报文处理</li>
<li>TCP四次断开</li>
</ul>
<blockquote>
<p>应用层开始</p>
</blockquote>
<h2 id="11-在浏览器输入httpswwwtaobaocom" class="headerLink">
    <a href="#11-%e5%9c%a8%e6%b5%8f%e8%a7%88%e5%99%a8%e8%be%93%e5%85%a5httpswwwtaobaocom" class="header-mark"></a>1.1. 在浏览器输入<code>https://www.taobao.com</code></h2><h3 id="111-浏览器接收url开启网络请求线程url包括以下部分" class="headerLink">
    <a href="#111-%e6%b5%8f%e8%a7%88%e5%99%a8%e6%8e%a5%e6%94%b6url%e5%bc%80%e5%90%af%e7%bd%91%e7%bb%9c%e8%af%b7%e6%b1%82%e7%ba%bf%e7%a8%8burl%e5%8c%85%e6%8b%ac%e4%bb%a5%e4%b8%8b%e9%83%a8%e5%88%86" class="header-mark"></a>1.1.1. 浏览器接收url开启网络请求线程,URL包括以下部分</h3><ul>
<li><code>protocol</code>：协议头<code>https</code></li>
<li><code>host</code>：主机域名<code>www.taobao.com</code></li>
<li><code>port</code>：端口号(默认)</li>
<li><code>path</code>：无</li>
<li><code>query</code>：无</li>
<li><code>fragment</code>：无</li>
</ul>
<h3 id="112-https协议" class="headerLink">
    <a href="#112-https%e5%8d%8f%e8%ae%ae" class="header-mark"></a>1.1.2. https协议</h3><ul>
<li><code>https</code>协议是基于<code>http</code>协议开发的,是比<code>http</code>更安全的协议,在<code>http</code>协议的基础上增加了<code>SSL/TLS</code>加密</li>
</ul>
<h2 id="12-dns获取ip地址" class="headerLink">
    <a href="#12-dns%e8%8e%b7%e5%8f%96ip%e5%9c%b0%e5%9d%80" class="header-mark"></a>1.2. DNS获取IP地址</h2><p>一般，如果平台配备了负载均衡的话，前一步<code>DNS</code>解析获得的IP地址应该是Nginx负载均衡服务器的IP地址。所以，之后会将我们的网页请求发送到了Nginx负载均衡服务器上。</p>
<p>Nginx根据我们设定的分配算法和规则，选择一台后端的真实Web服务器，与之建立TCP连接、并转发我们浏览器发出去的网页请求。</p>
<h3 id="121-寻找ip地址过程" class="headerLink">
    <a href="#121-%e5%af%bb%e6%89%beip%e5%9c%b0%e5%9d%80%e8%bf%87%e7%a8%8b" class="header-mark"></a>1.2.1. 寻找IP地址过程:</h3><ul>
<li>
<p>请求一旦发起，浏览器首先要做的事情就是解析这个域名，一般来说，浏览器会首先查看本地硬盘的 <code>hosts</code> 文件，看看其中有没有和这个域名对应的规则，如果有的话就直接使用 <code>hosts</code> 文件里面的 ip 地址。</p>
</li>
<li>
<p>如果在本地的 <code>hosts</code> 文件没有能够找到对应的 ip 地址，浏览器会发出一个 DNS请求到本地DNS服务器 。本地DNS服务器一般都是你的网络接入服务器商提供，比如中国电信，中国移动。</p>
</li>
<li>
<p>查询你输入的网址的DNS请求到达本地DNS服务器之后，本地DNS服务器会首先查询它的缓存记录，如果缓存中有此条记录，就可以直接返回结果，此过程是递归的方式进行查询。如果没有，本地DNS服务器还要向DNS根服务器进行查询。</p>
</li>
<li>
<p>DNS根服务器没有记录具体的域名和IP地址的对应关系，于是告诉本地DNS服务器，你可以到域服务器上去继续查询，并给出域服务器的地址。这种过程是迭代的过程。</p>
</li>
<li>
<p>本地DNS服务器继续向域服务器发出请求，在这个例子中，请求的对象是.com域服务器。.com域服务器收到请求之后，也不会直接返回域名和IP地址的对应关系，而是告诉本地DNS服务器，你的域名的解析服务器的地址。</p>
</li>
<li>
<p>最后，本地DNS服务器向域名的解析服务器发出请求，这时就能收到一个域名和IP地址对应关系，本地DNS服务器不仅要把IP地址返回给用户电脑，还要把这个对应关系保存在缓存中，以备下次别的用户查询时，可以直接返回结果，加快网络访问。如果url里不包含端口号，则会使用该协议的默认端口号。</p>
</li>
</ul>
<h2 id="13-根据http协议生成http请求报文" class="headerLink">
    <a href="#13-%e6%a0%b9%e6%8d%aehttp%e5%8d%8f%e8%ae%ae%e7%94%9f%e6%88%90http%e8%af%b7%e6%b1%82%e6%8a%a5%e6%96%87" class="header-mark"></a>1.3. 根据HTTP协议生成HTTP请求报文</h2><p>HTTP报文一般包括了： 请求/响应行，请求/响应头部，空白行，请求体/响应数据。</p>
<h3 id="131-请求" class="headerLink">
    <a href="#131-%e8%af%b7%e6%b1%82" class="header-mark"></a>1.3.1. 请求</h3><p><code>【请 求 行】</code>请求方法 空格 请求资源地址(URI、无域名) 空格 HTTP版本 空格 CRLF(换行符)<br>
<code>【请 求 头】</code>标识: 内容 CRLF(换行符)<br>
<code>【空 一 行】</code>(表示请求头结束)<br>
<code>【请求 主体】</code>（即请求正文，用户的主要数据。POST方式时使用，GET无请求主体）</p>
<h3 id="132-响应" class="headerLink">
    <a href="#132-%e5%93%8d%e5%ba%94" class="header-mark"></a>1.3.2. 响应</h3><p><code>【响 应 行】</code>HTTP版本 空格 状态码 空格 状态码的文本描述 空格 CRLF(换行符)<br>
<code>【响 应 头】</code>标识:内容 CRLF(换行符)<br>
<code>【空 一 行】</code>(表示响应头结束)<br>
<code>【响应 主体】</code>所谓响应主体，就是服务器返回的资源的内容。即整个HTML文件。</p>
<h2 id="14-tls进行加密提供保密性和数据完整性" class="headerLink">
    <a href="#14-tls%e8%bf%9b%e8%a1%8c%e5%8a%a0%e5%af%86%e6%8f%90%e4%be%9b%e4%bf%9d%e5%af%86%e6%80%a7%e5%92%8c%e6%95%b0%e6%8d%ae%e5%ae%8c%e6%95%b4%e6%80%a7" class="header-mark"></a>1.4. TLS进行加密,提供保密性和数据完整性</h2><ol>
<li>TLS是对SSL的改进,目标是为了更安全,可以确保数据发送到正确的客户端和服务器,途中防止被窃取,并且数据在过程中不发生改变.<br>
TLS 使用“消息认证代码的密钥散列法”，当记录在开放的网络（如因特网）上传送时，该代码确保记录不会被变更。</li>
</ol>
<ul>
<li>
<p>增强的伪随机功能（PRF）：PRF生成密钥数据。在TLS中，PRF使用两种散列算法保证其安全性。如果任一算法暴露了，只要第二种算法未暴露，数据仍然是安全的。</p>
</li>
<li>
<p>TLS提供更多的特定和附加警报，以指示任一会话端点检测到的问题。</p>
</li>
</ul>
<ol start="2">
<li>TLS协商过程</li>
</ol>
<ul>
<li>
<p>客户端发出请求(<code>ClientHello</code>)，客户端表达想跟服务端安全进行通话</p>
</li>
<li>
<p>服务器回应 (<code>ServerHello</code>)，服务器收到并返回给客户端证书,拿去验证身份</p>
</li>
<li>
<p>客户端回应(<code>Certificate Verify</code>),客户端验证证书的真实性,如果有误发出警告并断开链接,如果无误,客户端就会取出公钥并把秘密消息加密发送至服务端</p>
</li>
<li>
<p>服务端最后回应(<code>Server Finish</code>),用私钥将客户端消息解密,然后处理并加密发给客户端,这时加密通道已经建立成功了.双方可以进行加密传输了.</p>
</li>
</ul>
<blockquote>
<p>应用层结束</p>
</blockquote>
<ul>
<li>在应用层将要发送的数据内容形成了应用层的报文data,发送到传输层</li>
</ul>
<blockquote>
<p>传输层开始</p>
</blockquote>
<h2 id="15-tcp三次握手" class="headerLink">
    <a href="#15-tcp%e4%b8%89%e6%ac%a1%e6%8f%a1%e6%89%8b" class="header-mark"></a>1.5. TCP三次握手</h2><ol>
<li>握手过程:</li>
</ol>
<ul>
<li>
<p>第一次握手：客户端给服务端发一个 <code>SYN</code> 报文，并指明客户端的初始化序列号 ISN©。此时客户端处于 <code>SYN_Send</code>状态。</p>
</li>
<li>
<p>第二次握手：服务器收到客户端的 <code>SYN</code> 报文之后，会以自己的 <code>SYN</code> 报文作为应答，并且也是指定了自己的初始化序列号 <code>ISN(s)</code>，同时会把客户端的<code> ISN + 1</code> 作为 <code>ACK</code> 的值，表示自己已经收到了客户端的 <code>SYN</code>，此时服务器处于 <code>SYN_REVD</code>的状态</p>
</li>
<li>
<p>第三次握手：客户端收到 <code>SYN</code> 报文之后，会发送一个 <code>ACK</code> 报文，当然，也是一样把服务器的 <code>ISN + 1</code> 作为 <code>ACK</code> 的值，表示已经收到了服务端的 <code>SYN</code> 报文，此时客户端处于 <code>establised</code>状态。</p>
</li>
<li>
<p>服务器收到 <code>ACK</code> 报文之后，也处于 <code>establised</code> 状态，此时，双方以建立起了链接。</p>
</li>
</ul>
<ol start="2">
<li>通俗点说就是:</li>
</ol>
<ul>
<li>客户端想要跟服务端进行通信,首先告知服务端一声:“我想跟你通信”</li>
<li>服务端收到客户端的连接请求,回一个确认消息:“我知道了,你现在能连吗?”</li>
<li>客户端收到服务端的确认消息后,礼貌的告知一下服务端:“好的,咱们开始通信吧”</li>
</ul>
<blockquote>
<p>传输层结束</p>
</blockquote>
<ul>
<li>这些数据通过传输层发送，比如tcp协议。所以它们会被送到传输层处理，在这里报文打上了传输头的包头，主要包含端口号，以及tcp的各种制信息，这些信息是直接得到的，因为接口中需要指定端口。这样就组成了tcp的数据传送单位segment。tcp是一种端到端的协议，利用这些信息，比如tcp首部中的序号确认序号，根据这些数字，发送的一方不断的进行发送等待确认，发送一个数据段后，会开启一个计数器，只有当收到确认后才会发送下一个，如果超过计数时间仍未收到确认则进行重发，在接受端如果收到错误数据，则将其丢弃，这将导致发送端超时重发。通过tcp协议，控制了数据包的发送序列的产生，不断的调整发送序列，实现流控和数据完整。然后待发送的数据段发送到网络层。</li>
</ul>
<blockquote>
<p>网络层开始</p>
</blockquote>
<h2 id="16-ip寻址" class="headerLink">
    <a href="#16-ip%e5%af%bb%e5%9d%80" class="header-mark"></a>1.6. IP寻址</h2><ol>
<li>网络层开始负责将这样的数据包在网络上传输，如何穿过路由器，最终到达目的地址。在这里，根据目的ip地址，就需要查找下一跳路由的地址。首先在本机，要查找本机的路由表。</li>
</ol>
<p>查找过程是这样的:</p>
<ul>
<li>
<p>根据目的地址，得到目的网络号，如果处在同一个内网，则可以直接发送。</p>
</li>
<li>
<p>如果不是，则查询路由表，找到一个路由。</p>
</li>
<li>
<p>如果找不到明确的路由，此时在路由表中还会有默认网关，也可称为缺省网关，IP用缺省的网关地址将一个数据传送给下一个指定的路由器，所以网关也可能是路由器，也可能只是内网向特定路由器传输数据的网关。</p>
</li>
<li>
<p>路由器收到数据后，它再次为远程主机或网络查询路由，若还未找到路由，该数据包将发送到该路由器的缺省网关地址。而数据包中包含一个最大路由跳数，如果超过这个跳数，就会丢弃数据包，这样可以防止无限传递。路由器收到数据包后，只会查看网络层的包裹数据，目的ip。所以说它是工作在网络层，传输层的数据对它来说则是透明的。</p>
</li>
<li>
<p>如果上面这些步骤都没有成功，那么该数据报就不能被传送。如果不能传送的数据报来自本机，那么一般会向生成数据报的应用程序返回一个“主机不可达”或 “网络不可达”的错误。</p>
</li>
</ul>
<p>关于NAT转换</p>
<ul>
<li>如果是在局域网中,每台电脑都有自己的私网IP,在对外传输的时候,会经过NAT转换,改成路由器的公网IP</li>
</ul>
<h2 id="17-arp协议获取mac地址" class="headerLink">
    <a href="#17-arp%e5%8d%8f%e8%ae%ae%e8%8e%b7%e5%8f%96mac%e5%9c%b0%e5%9d%80" class="header-mark"></a>1.7. ARP协议获取MAC地址</h2><p>ARP协议是将IP地址映射成MAC地址的,由于是IP协议使用了ARP协议,因此通常把ARP协议划归为网络层,但是ARP协议的用途是为了从网络层使用的IP地址解析出在数据链路层使用的MAC地址.</p>
<ol>
<li>获取MAC地址过程:</li>
</ol>
<ul>
<li>
<p>主机生成一个具有目的IP地址(默认网关)的ARP查询报文,将该ARP报文放置在一个具有广播目的地址(例如<code>FF:FF:FF:FF:FF:FF:FF</code>)的以太网帧中,并向交换机发送该以太网帧,交换机将该帧交付给所有连接的设备,包括网关路由器。</p>
</li>
<li>
<p>网关路由器在接口上收到包含该ARP查询报文的帧,发现ARP报文中目的地址IP地址匹配接口的IP地址.网关路由器因此准备一个ARP回答,指示它的MAC地址对应报文中的IP地址,它将ARP回答放在一个以太网帧中,其目的地址是源MAC地址,并向交换机发送该帧,再由交换机将该帧交付给主机。</p>
</li>
<li>
<p>主机接收包含ARP回答报文的帧,并从ARP回答报文中抽取网关路由器的MAC地址。</p>
</li>
<li>
<p>将这个MAC地址将与IP包共同传输给下层。</p>
</li>
</ul>
<h2 id="18-bgp外部网关协议" class="headerLink">
    <a href="#18-bgp%e5%a4%96%e9%83%a8%e7%bd%91%e5%85%b3%e5%8d%8f%e8%ae%ae" class="header-mark"></a>1.8. BGP外部网关协议</h2><p>在网络层用BGP协议来控制路由的传播和选择最佳路由。</p>
<ul>
<li>路由更新时，BGP只发送更新的路由，大大减少了BGP传播路由所占用的带宽，适用于在Internet上传播大量的路由信息。</li>
<li>BGP路由通过携带AS路径信息彻底解决路由环路问题。</li>
<li>BGP提供了丰富的路由策略，能够对路由实现灵活的过滤和选择。</li>
</ul>
<p>网络层结束</p>
<ul>
<li>在网络层被打包，这样封装上了网络层的包头，包头内部含有源及目的的ip地址，该层数据发送单位被称为packet。
数据链路层开始</li>
</ul>
<h2 id="19-mac寻址" class="headerLink">
    <a href="#19-mac%e5%af%bb%e5%9d%80" class="header-mark"></a>1.9. MAC寻址</h2><ul>
<li>
<p>首先通过广播获取足够的MAC地址表，交换机使用MAC地址通过指向相应端口的交换结构将网络通信转向目的节点。交换机为了知道要使用哪个端口来传送单播帧，它必须首先知道自己的每个端口上都存在哪些节点。</p>
</li>
<li>
<p>交换机使用其 MAC 地址表来确定如何处理传入的数据帧。通过记录与其每一个端口相连的节点的 MAC 地址来构建其 MAC 地址表。当某个特定端口上的某个特定节点的 MAC 地址记录到地址表之后，交换机就可以知道在后续传输中，应将目的地为该特定节点的流量从与该节点对应的端口上发出。</p>
</li>
<li>
<p>当交换机收到传入的数据帧，而地址表中没有该帧的目的MAC地址时，交换机将把该帧从除接收该帧的端口之外的所有端口转发出去。当目的节点响应时，交换机从响应帧的源地址字段中获得的该节点的MAC地址，并将其记录在地址表中。在多台交换机互连的网络中，连接其它交换机的端口MAC地址表中记录有多个MAC地址，用来代表远端节点。通常，用于互连两台交换机的交换机端口在MAC地址表中记录了多个MAC地址。</p>
</li>
</ul>
<blockquote>
<p>数据链路层结束</p>
</blockquote>
<h2 id="110-服务器接受请求" class="headerLink">
    <a href="#110-%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%8e%a5%e5%8f%97%e8%af%b7%e6%b1%82" class="header-mark"></a>1.10. 服务器接受请求</h2><p>用户发起的请求都指向调度服务器（反向代理服务器，譬如安装了nginx控制负载均衡），然后调度服务器根据实际的调度算法，分配不同的请求给对应集群中的服务器执行.</p>
<p>服务端将数据包通过数据链路层-&gt;网络层-&gt;传输层一层层的解封,最后处理HTTP中的请求</p>
<h2 id="111-服务端处理请求" class="headerLink">
    <a href="#111-%e6%9c%8d%e5%8a%a1%e7%ab%af%e5%a4%84%e7%90%86%e8%af%b7%e6%b1%82" class="header-mark"></a>1.11. 服务端处理请求</h2><ol>
<li>首页请求</li>
</ol>
<ul>
<li>因为输入的url是请求进入网站首页的,不带任何参数请求,而且操作简单,这样下来QPS即每秒查询量是极大的,服务器需要在极短的时间内处理这些流量,这时候会用到CDN系统的缓存服务器将首页的图片迅速分发给用户。</li>
<li>在网站和用户之间引入CDN之后，用户不会有任何与原来不同的感觉。
使用CDN服务的网站，只需将其域名的解析权交给CDN的负载均衡设备，CDN负载均衡设备将为用户选择一台合适的缓存服务器，用户通过访问这台缓存服务器来获取自己所需的数据。</li>
<li>用户可以以最短的路径，最快的速度对网站进行访问。因此，CDN可以加速用户访问速度，减少源站中心负载压力。</li>
</ul>
<ol start="2">
<li>其它请求</li>
</ol>
<ul>
<li>后台统一处理请求，处理完后响应结果.一般后端都是有统一的验证的，如安全拦截，跨域验证.如果这一步不符合规则，就直接返回了相应的http报文（如拒绝请求等）</li>
<li>然后当验证通过后，才会进入实际的后台代码，此时是程序接收到请求，然后执行（譬如查询数据库，大量计算等等）</li>
<li>等程序执行完毕后，就会返回一个http响应包</li>
</ul>
<ol start="3">
<li>关于数据库
对于数亿用户的存储</li>
</ol>
<ul>
<li>合理设计数据库字段</li>
<li>创建索引</li>
<li>分库分表</li>
</ul>
<ol start="4">
<li>水平分库分表</li>
</ol>
<ul>
<li>对单个指标通过Hash等方式分散在多个库或表中</li>
<li>简单来说就是把一个表的数据划分到不同的数据库,两个数据库的表结构一样,根据一点的规则来划分数据库,查询的时候也根据一定的规则知悉在哪个数据库</li>
</ul>
<ol start="5">
<li>垂直分库分表</li>
</ol>
<ul>
<li>将不同业务指标分散在不同库和表</li>
<li>简单来说,就是按照业务功能等划分,比如说把收藏夹和购物车放到不同的库中</li>
</ul>
<h2 id="112-服务端提供响应" class="headerLink">
    <a href="#112-%e6%9c%8d%e5%8a%a1%e7%ab%af%e6%8f%90%e4%be%9b%e5%93%8d%e5%ba%94" class="header-mark"></a>1.12. 服务端提供响应</h2><p>服务端处理完请求后,会将所请求的东西响应给客户端</p>
<ul>
<li>服务器会以同样的顺序同样的方式将响应数据包发送都客户端</li>
</ul>
<h2 id="113-四次挥手" class="headerLink">
    <a href="#113-%e5%9b%9b%e6%ac%a1%e6%8c%a5%e6%89%8b" class="header-mark"></a>1.13. 四次挥手</h2><p>在这种短链接下,当客户端接受到服务端的响应后进行挥手操作</p>
<ul>
<li>
<p>第一次挥手：客户端发送一个 FIN 报文，报文中会指定一个序列号。此时客户端处于FIN_WAIT1状态。</p>
</li>
<li>
<p>第二次挥手：服务端收到 FIN 之后，会发送 ACK 报文，且把客户端的序列号值 + 1 作为 ACK 报文的序列号值，表明已经收到客户端的报文了，此时服务端处于 CLOSE_WAIT状态。</p>
</li>
<li>
<p>第三次挥手：如果服务端也想断开连接了，和客户端的第一次挥手一样，发给 FIN 报文，且指定一个序列号。此时服务端处于 LAST_ACK 的状态。</p>
</li>
<li>
<p>第四次挥手：客户端收到 FIN 之后，一样发送一个 ACK 报文作为应答，且把服务端的序列号值 + 1 作为自己 ACK 报文的序列号值，此时客户端处于 TIME_WAIT 状态。需要过一阵子以确保服务端收到自己的 ACK 报文之后才会进入 CLOSED 状态。</p>
</li>
<li>
<p>服务端收到 ACK 报文之后，就处于关闭连接了，处于 CLOSED 状态。</p>
</li>
</ul>
<h3 id="1131-通俗点说就是" class="headerLink">
    <a href="#1131-%e9%80%9a%e4%bf%97%e7%82%b9%e8%af%b4%e5%b0%b1%e6%98%af" class="header-mark"></a>1.13.1. 通俗点说就是:</h3><ul>
<li>客户端:“我要下了,还有什么想跟我说的吗?”</li>
<li>服务端:“等等,上一句还没说完”</li>
<li>服务端发完后说:“好了,说完了”</li>
<li>客户端:“我知道了,拜拜”</li>
</ul>
<h2 id="114-浏览器解析和渲染" class="headerLink">
    <a href="#114-%e6%b5%8f%e8%a7%88%e5%99%a8%e8%a7%a3%e6%9e%90%e5%92%8c%e6%b8%b2%e6%9f%93" class="header-mark"></a>1.14. 浏览器解析和渲染</h2><ul>
<li>解析HTML,构建DOM树
HTML文档会被解析成一棵以document为根的DOM树，解析过程中如果遇到JavaScript，则会暂停解析并传输下载相应的文件造成阻塞，故推荐将JavaScript脚本放在HTML文件的后面。</li>
<li>构建CSSSOM树
浏览器根据外部样式，内部样式和内联样式来解析CSS，构建CSSSOM树。</li>
<li>构建渲染树和布局
DOM树和CSSOM树构建完毕后会融合成渲染树，然后浏览器会确认页面各元素的位置。</li>
<li>页面绘制和优化
浏览器根据布局结果进行页面的绘制，并优化页面内容，减小CPU消耗。</li>
</ul>
<h2 id="115-交互结束" class="headerLink">
    <a href="#115-%e4%ba%a4%e4%ba%92%e7%bb%93%e6%9d%9f" class="header-mark"></a>1.15. 交互结束</h2><p>这时如果以上步骤都不出意外,就得到我们想要访问的网页了.在我们输入网址到网页展示短短几秒的过程中就大致经历了这么多过程.
客户端到服务端如上所示,看似只有一次交互,其实中间过程中已经交互了多次,比如握手过程,都是需要进行发包交互的.</p>
<p>还有很多需要细化没有涉及到的点,后面自己再慢慢思考.若有思考错误的地方,还望指出.</p>
</div>

    <div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span>更新于 2022-06-22</span>
      </div>
      <div class="post-info-license"><span><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">CC BY-NC-SA 4.0</a></span></div>
    </div>
    <div class="post-info-line">
      <div class="post-info-md"><span><a
                class="link-to-mardown"
                href=/2022/%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AA%E7%BD%91%E9%A1%B5%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B/index.md
                target="_blank"
                rel="noopener noreferrer"
              >阅读原始文档</a>
            </span></div>
      <div class="post-info-share"><button
      title="分享到 Evernote"
      data-sharer="evernote"
      data-url="https://blog.0x5c0f.cc/2022/%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AA%E7%BD%91%E9%A1%B5%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B/"
      data-title="访问一个网页的全过程"
    ><span class="fab fa-evernote fa-fw"></span></button></div>
    </div>
  </div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/linux/">Linux</a></section>
    <section>
      <span
        ><a href="javascript:void(0);" onclick="window.history.back();"
          >返回</a
        ></span
      >&nbsp;|&nbsp;<span
        ><a href="/">主页</a></span
      >
    </section>
  </div>

  <div class="post-nav"><a
        href="/2022/%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2%E5%B7%A5%E5%85%B7logrotate%E8%AF%A6%E8%A7%A3/"
        class="prev"
        rel="prev"
        title="日志切割工具Logrotate详解"
        ><i class="fas fa-angle-left fa-fw"></i>日志切割工具Logrotate详解</a
      >
      <a
        href="/2022/tomcat%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BC%98%E5%8C%96/"
        class="next"
        rel="next"
        title="Tomcat安装及优化"
        >Tomcat安装及优化<i class="fas fa-angle-right fa-fw"></i
      ></a></div>
</div>
<div id="comments"><div id="waline" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://waline.js.org/">Waline</a>.
            </noscript></div></article></div>
      </main><footer class="footer">
    <div class="footer-container"><div class="footer-line"><div id="show-ip"></div><script>fetch("https://api.myip.la").then(response => response.text()).then(data => document.getElementById("show-ip").innerHTML = data);</script><script type="text/javascript">(function(c,l,a,r,i,t,y){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y)})(window,document,"clarity","script","jtpwi0tdz1");</script></div><div class="footer-line">
          由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer" title="Hugo 0.123.4">Hugo</a> 强力驱动&nbsp;|&nbsp;托管在 <a title="Vercel" href="https://vercel.com" target="_blank" rel="noopener noreffer">Vercel</a> & <a title="Aliyun" href="https://www.aliyun.com" target="_blank" rel="noopener noreffer">Aliyun</a> 上&nbsp;|&nbsp;主题 - <a href="https://github.com/HEIGE-PCloud/DoIt" target="_blank" rel="noopener noreferrer" title="DoIt 0.4.0"><i class="far fa-edit fa-fw"></i> DoIt</a>
        </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022 -2024</span><span class="author" itemprop="copyrightHolder"
            >&nbsp;<a
              href="https://tools.0x5c0f.cc"
              target="_blank"
              rel="noopener noreferrer"
              >0x5c0f</a
            ></span
          >&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">CC BY-NC-SA 4.0</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br" />
          <span class="icp">渝ICP备2020011834号-2</span></div>
      <div class="footer-line"></div>
      <div class="footer-line"></div>
    </div></footer></div>

    <div id="fixed-buttons"><a
        href="#back-to-top"
        id="back-to-top-button"
        class="fixed-button"
        title="回到顶部"
      >
        <i class="fas fa-arrow-up fa-fw"></i>
      </a><a
        href="#"
        id="view-comments"
        class="fixed-button"
        title="查看评论"
      >
        <i class="fas fa-comment fa-fw"></i>
      </a>
    </div><div class="assets"><link
      rel="stylesheet"
      href="/lib/waline/waline.min.css"
      
    /><link
      rel="stylesheet"
      href="/lib/katex/katex.min.css"
      
    /><link
      rel="preload"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
      href="/lib/katex/copy-tex.min.css"
      
    />
    <noscript
      ><link
        rel="stylesheet"
        href="/lib/katex/copy-tex.min.css"
        
    /></noscript><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{"waline":{"comment":true,"copyright":true,"dark":"body[theme='dark'], body[theme='black']","el":"#waline","emoji":["https://unpkg.com/@waline/emojis/alus"],"lang":"zh-cn","login":"disable","meta":["nick","mail","link"],"pageview":true,"requiredMeta":["mail"],"serverURL":"https://talk.51ac.cc"}},"data":{"desktop-header-typeit":"0x5c0f.cc","mobile-header-typeit":"0x5c0f.cc"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"distance":100,"findAllMatches":false,"fuseIndexURL":"/index.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":true,"isCaseSensitive":false,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"没有找到结果","snippetLength":50,"threshold":0.3,"type":"fuse","useExtendedSearch":true},"sharerjs":true,"table":{"sort":true},"typeit":{"cursorChar":"_","cursorSpeed":1000,"data":{"desktop-header-typeit":["desktop-header-typeit"],"mobile-header-typeit":["mobile-header-typeit"]},"duration":9000,"speed":100}};</script><script
    type="text/javascript"
    src="/lib/waline/waline.js"
    
      defer
    
  ></script><script
    type="text/javascript"
    src="/js/waline.min.js"
    
      defer
    
  ></script><script
    type="text/javascript"
    src="/lib/tablesort/tablesort.min.js"
    
  ></script><script
    type="text/javascript"
    src="/lib/clipboard/clipboard.min.js"
    
  ></script><script
    type="text/javascript"
    src="/lib/sharer/sharer.min.js"
    
  ></script><script
    type="text/javascript"
    src="/lib/typeit/typeit.min.js"
    
  ></script><script
    type="text/javascript"
    src="/lib/katex/katex.min.js"
    
      defer
    
  ></script><script
    type="text/javascript"
    src="/lib/katex/auto-render.min.js"
    
      defer
    
  ></script><script
    type="text/javascript"
    src="/lib/katex/copy-tex.min.js"
    
      defer
    
  ></script><script
    type="text/javascript"
    src="/lib/katex/mhchem.min.js"
    
      defer
    
  ></script><script
    type="text/javascript"
    src="/js/katex.min.js"
    
      defer
    
  ></script><script
    type="text/javascript"
    src="/js/theme.min.js"
    
      defer
    
  ></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-06MPV27KSD');
        </script><script
    type="text/javascript"
    src="https://www.googletagmanager.com/gtag/js?id=G-06MPV27KSD"
    async
  ></script></div>
</body>
</html>
