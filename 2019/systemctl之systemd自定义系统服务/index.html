<!DOCTYPE html>
<html lang="zh-cn">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Systemctl之systemd自定义系统服务 · 一个曾经的小码农...
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="description" content="Systemctl之systemd自定义系统服务">
<meta name="keywords" content="[linux Hugo 解决方案 故障]">



  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/icons/logo_avatar.png">
  <meta name="twitter:title" content="Systemctl之systemd自定义系统服务">
  <meta name="twitter:description" content="Systemctl之systemd自定义系统服务">

<meta property="og:url" content="http://localhost:1313/2019/systemctl%E4%B9%8Bsystemd%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1/">
  <meta property="og:site_name" content="一个曾经的小码农...">
  <meta property="og:title" content="Systemctl之systemd自定义系统服务">
  <meta property="og:description" content="Systemctl之systemd自定义系统服务">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2019-08-20T00:00:00+00:00">
    <meta property="article:modified_time" content="2023-01-30T00:00:00+00:00">
    <meta property="article:tag" content="Linux">
    <meta property="article:tag" content="优化">
    <meta property="article:tag" content="Systemd">
    <meta property="article:tag" content="解决方案">
    <meta property="og:image" content="http://localhost:1313/icons/logo_avatar.png">
      <meta property="og:see_also" content="http://localhost:1313/2021/%E9%82%A3%E4%BA%9B%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E8%AE%B0%E5%BD%95.1/">
      <meta property="og:see_also" content="http://localhost:1313/2021/%E9%82%A3%E4%BA%9B%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E8%AE%B0%E5%BD%95.2/">
      <meta property="og:see_also" content="http://localhost:1313/2023/%E5%86%85%E7%BD%91.%E5%A4%96%E7%BD%91.%E5%AE%BD%E5%B8%A6.%E5%B8%A6%E5%AE%BD.%E6%B5%81%E9%87%8F.%E7%BD%91%E9%80%9F%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB%E4%B8%8E%E8%81%94%E7%B3%BB/">
      <meta property="og:see_also" content="http://localhost:1313/2023/%E5%B8%B8%E7%94%A8%E7%9A%84bat%E8%84%9A%E6%9C%AC%E8%AF%AD%E6%B3%95/">
      <meta property="og:see_also" content="http://localhost:1313/2022/http%E5%93%8D%E5%BA%94%E7%A0%81/">
      <meta property="og:see_also" content="http://localhost:1313/2022/fedora%E8%A7%86%E9%A2%91%E6%A1%8C%E9%9D%A2/">
      <meta property="og:see_also" content="http://localhost:1313/2022/gb2312unicode%E5%AF%B9%E7%85%A7%E8%A1%A8/">




<link rel="canonical" href="http://localhost:1313/2019/systemctl%E4%B9%8Bsystemd%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">








 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">


<link rel="alternate" type="text/plain" href="/2019/systemctl%E4%B9%8Bsystemd%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1/index.md" title="一个曾经的小码农..." />







</head>




<body class="preload-transitions colorscheme-light">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      一个曾经的小码农...
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">文章</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/tags/">标签</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/categories/">分类</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/series/">系列</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/2019/systemctl%E4%B9%8Bsystemd%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1/">
              Systemctl之systemd自定义系统服务
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2019-08-20T00:00:00Z">
                August 20, 2019
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              阅读时间：10 分钟
            </span>
          </div>
          <div class="authors">
  <i class="fa-solid fa-user" aria-hidden="true"></i>
    <a href="/authors/admin/">Admin</a></div>

          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/linux/">Linux</a>
      <span class="separator">•</span>
    <a href="/categories/%E9%82%A3%E4%BA%9B%E6%9C%89%E7%94%A8%E6%B2%A1%E7%94%A8%E7%9A%84/">那些有用没用的</a></div>

          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/linux/">Linux</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/%E4%BC%98%E5%8C%96/">优化</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/systemd/">Systemd</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">解决方案</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <div class="details admonition quote open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-quote-right fa-fw"></i>以下为资料来源,由本站收集重新整理发布,仅用于个人收藏,转载请直接标注以下来源连接<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><blockquote>
<p><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html"  class="external-link" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html</a></p>
</blockquote>
<blockquote>
<p><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html"  class="external-link" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html</a></p>
</blockquote>
<blockquote>
<p><a href="http://www.ruanyifeng.com/blog/2018/03/systemd-timer.html"  class="external-link" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2018/03/systemd-timer.html</a></p>
</blockquote>
</div>
        </div>
    </div>
<hr>
<h1 id="1-unit">
  1. [Unit]
  <a class="heading-link" href="#1-unit">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h1>
<p><code>Unit</code> 定义启动顺序与依赖关系</p>
<p>单元(Unit)是 <code>Systemd</code> 的最小功能单位，是单个进程的描述。一个个小的单元互相调用和依赖，组成一个庞大的任务管理系统</p>
<details>
<summary> 其他的单元类型 </summary>
<blockquote>
<p><a href="https://www.digitalocean.com/community/tutorials/understanding-systemd-units-and-unit-files"  class="external-link" target="_blank" rel="noopener">https://www.digitalocean.com/community/tutorials/understanding-systemd-units-and-unit-files</a><br>
<code>Systemd</code> 根据他们描述的资源类型对单位进行分类。确定单元类型的最简单方法是使用其类型后缀，该后缀附加到资源名称的末尾。<br>
以下列表描述了可用于以下各项的单位类型<code>systemd</code>:</p>
<ul>
<li><code>.service</code>: 服务单元描述如何管理服务器上的服务或应用程序。这将包括如何启动或停止服务，应在何种情况下自动启动服务，以及相关软件的依赖关系和订购信息。</li>
<li><code>.socket</code>: 套接字单元文件描述网络或<code>IPC</code>套接字，或<code>systemd</code>用于基于套接字的激活的FIFO缓冲区。这些<code>.service</code>文件始终具有一个关联文件，该文件将在本单元定义的套接字上看到活动时启动。</li>
<li><code>.device</code>: 描述已被指定为需要<code>systemd</code>管理的设备<code>udev</code>或<code>sysfs</code>文件系统的单元。并非所有设备都有<code>.device</code>文件。<code>.device</code>可能需要单元的一些场景是用于订购，安装和访问设备。</li>
<li><code>.mount</code>: 此单元定义要由其管理的系统上的挂载点<code>systemd</code>。这些以安装路径命名，斜杠更改为破折号。其中的条目<code>/etc/fstab</code>可以自动创建单位。</li>
<li><code>.automount</code>: 一个<code>.automount</code>单元配置将自动挂载的挂载点。这些必须以它们引用的挂载点命名，并且必须具有匹配<code>.mount</code>单元以定义挂载的细节。</li>
<li><code>.swap</code>: 此单元描述系统上的交换空间。这些单元的名称必须反映空间的设备或文件路径。</li>
<li><code>.target</code>: 目标单元用于在启动或更改状态时为其他单元提供同步点。它们还可用于使系统进入新状态。其他单位指定它们与目标的关系以与目标的操作联系起来。</li>
<li><code>.path</code>: 此单元定义可用于基于路径的激活的路径。默认情况下，<code>.service</code>当路径达到指定状态时，将启动相同基本名称的单元。这用于<code>inotify</code>监视更改的路径。</li>
<li><code>.timer</code>: .timer单元定义将由其管理的计时器<code>systemd</code>，类似于<code>cron</code>延迟或计划激活的作业。达到计时器时将启动匹配单元。</li>
<li><code>.snapshot</code>: 命令<code>.snapshot</code>自动创建一个单元<code>systemctl snapshot</code>。它允许您在进行更改后重建系统的当前状态。快照不会跨会话生存，并用于回滚临时状态。</li>
<li><code>.slice</code>: <code>.slice</code>单元与<code>Linux</code>控制组节点关联，允许限制资源或将资源分配给与该片关联的任何进程。该名称反映了它在<code>cgroup</code>树中的层次结构位置。默认情况下，单位会根据其类型放置在某些切片中。</li>
<li><code>.scope</code>: 范围单元<code>systemd</code>由从其总线接口接收的信息自动创建。这些用于管理外部创建的系统进程集。</li>
</ul>
</blockquote>
</details>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="na">Description</span><span class="o">=</span><span class="s">当前服务的描述  </span>
</span></span><span class="line"><span class="cl"><span class="na">Documentation</span><span class="o">=</span><span class="s">给出文档的位置,一般就是服务启动命令的帮助文档  </span>
</span></span><span class="line"><span class="cl"><span class="na">After</span><span class="o">=</span><span class="s">表示如果此字段标记的服务若需要启动,那么当前定义的服务需要在此标记服务器启动之后.  </span>
</span></span><span class="line"><span class="cl"><span class="na">Before</span><span class="o">=</span><span class="s">表示如果此字段标记的服务若需要启动,那么当前定义的服务需要在此标记服务器启动之前.  </span>
</span></span><span class="line"><span class="cl"><span class="na">Wants</span><span class="o">=</span><span class="s">表示此字段标记的服务与当前定义服务存在&#34;弱依赖&#34;关系,即表示当前定义的节点服务启动失败或者停止运行,不影响当前定义的服务继续执行.  </span>
</span></span><span class="line"><span class="cl"><span class="na">Requires</span><span class="o">=</span><span class="s">表示此字段标记的服务与当前定义服务存在&#34;强依赖&#34;关系,即表示当前定义的节点服务启动失败或者停止运行,那么当前定义的服务也必须停止.  </span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="2-service">
  2. [Service]
  <a class="heading-link" href="#2-service">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h1>
<p><code>Service</code>区块定义如何启动当前服务。<br>
注意：[<code>Service</code>]部分的启动、重启、停止命令全部要求使用绝对路径，使用相对路径则会报错！</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="na">Environment</span><span class="o">=</span><span class="s">指定当前服务运行的环境参数,该值使用key=value健值对</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Environment=LANG=C </span>
</span></span><span class="line"><span class="cl"><span class="na">EnvironmentFile</span><span class="o">=</span><span class="s">指定当前服务的环境参数文件。该文件内部的key=value键值对，可以用$key的形式，在当前配置文件中获取。 </span>
</span></span><span class="line"><span class="cl"><span class="na">Type</span><span class="o">=</span><span class="s">字段定义服务启动类型</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Type=simple(默认值): ExecStart字段启动的进程为主进程</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Type=exec: 类似于simple，simple表示当fork()函数返回时，即表示启动完成，而exec则表示仅在fork()和execve()函数都执行成功时，才算启动完成.</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Type=forking：ExecStart字段将以fork()方式启动，此时父进程将会退出，子进程将成为主进程</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Type=oneshot：类似于simple，但只执行一次，Systemd 会等它执行完，才启动其他服务</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Type=dbus：类似于simple，但会等待 D-Bus 信号后启动</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Type=notify：类似于simple，启动结束后会发出通知信号，然后 Systemd 再启动其他服务</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Type=idle：类似于simple，但是要等到其他任务都执行完，才会启动该服务。一种使用场合是为让该服务的输出，不与其他服务的输出相混合</span>
</span></span><span class="line"><span class="cl"><span class="na">TimeoutStopSec</span><span class="o">=</span><span class="s">停止服务时的等待的秒数，如果超过这个时间服务仍然没有停止，systemd 会使用 SIGKILL 信号强行杀死服务的进程。 </span>
</span></span><span class="line"><span class="cl"><span class="na">TimeoutStartSec</span><span class="o">=</span><span class="s">启动服务时的等待的秒数，如果超过这个时间服务任然没有执行完所有的启动命令，则 systemd 会认为服务自动失败。 </span>
</span></span><span class="line"><span class="cl"><span class="na">ExecStart</span><span class="o">=</span><span class="s">启动服务时执行的命令</span>
</span></span><span class="line"><span class="cl"><span class="na">ExecReload</span><span class="o">=</span><span class="s">重启服务时执行的命令</span>
</span></span><span class="line"><span class="cl"><span class="na">ExecStop</span><span class="o">=</span><span class="s">停止服务时执行的命令</span>
</span></span><span class="line"><span class="cl"><span class="na">ExecStartPre</span><span class="o">=</span><span class="s">启动服务之前执行的命令</span>
</span></span><span class="line"><span class="cl"><span class="na">ExecStartPost</span><span class="o">=</span><span class="s">启动服务之后执行的命令</span>
</span></span><span class="line"><span class="cl"><span class="na">ExecStopPost</span><span class="o">=</span><span class="s">停止服务之后执行的命令</span>
</span></span><span class="line"><span class="cl"><span class="na">User</span><span class="o">=</span><span class="s">指定运行服务的用户，会影响服务对本地文件系统的访问权限。</span>
</span></span><span class="line"><span class="cl"><span class="na">Group</span><span class="o">=</span><span class="s">指定运行服务的用户组，会影响服务对本地文件系统的访问权限。</span>
</span></span><span class="line"><span class="cl"><span class="na">RootDirectory</span><span class="o">=</span><span class="s">指定服务进程的根目录（默认: / ），如果配置了这个参数后，服务将无法访问指定目录以外的任何文件。</span>
</span></span><span class="line"><span class="cl"><span class="na">Nice</span><span class="o">=</span><span class="s">服务的进程优先级，值越小优先级越高，默认为0。-20为最高优先级，19为最低优先级 </span>
</span></span><span class="line"><span class="cl"><span class="na">KillMode</span><span class="o">=</span><span class="s">表示systemd如何停止当前定义服务</span>
</span></span><span class="line"><span class="cl"><span class="c1">;KillMode=control-group（默认值）：当前控制组里面的所有子进程，都会被杀掉</span>
</span></span><span class="line"><span class="cl"><span class="c1">;KillMode=process：只杀主进程</span>
</span></span><span class="line"><span class="cl"><span class="c1">;KillMode=mixed：主进程将收到 SIGTERM 信号，子进程收到 SIGKILL 信号</span>
</span></span><span class="line"><span class="cl"><span class="c1">;KillMode=none：没有进程会被杀掉，只是执行服务的 stop 命令。</span>
</span></span><span class="line"><span class="cl"><span class="na">Restart</span><span class="o">=</span><span class="s">定义了当前定义服务退出后，Systemd的重启方式。</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Restart=no（默认值）：退出后不会重启</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Restart=on-success：只有正常退出时（退出状态码为0），才会重启</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Restart=on-failure：非正常退出时（退出状态码非0），包括被信号终止和超时，才会重启</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Restart=on-abnormal：只有被信号终止和超时，才会重启</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Restart=on-abort：只有在收到没有捕捉到的信号终止时，才会重启</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Restart=on-watchdog：超时退出，才会重启</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Restart=always：不管是什么退出原因，总是重启</span>
</span></span><span class="line"><span class="cl"><span class="na">RestartSec</span><span class="o">=</span><span class="s">12s 表示 Systemd 重启服务之前，需要等待的秒数。</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="3-install">
  3. [Install]
  <a class="heading-link" href="#3-install">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h1>
<p><code>Install</code>区块，定义如何安装这个配置文件，即怎样做到开机启动。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="na">WantedBy</span><span class="o">=</span><span class="s">表示该服务所在的Target</span>
</span></span><span class="line"><span class="cl"><span class="c1">; Target的含义是服务组，表示一组服务,一般来说，常用的 Target 有两个：一个是multi-user.target，表示多用户命令行状态；另一个是graphical.target，表示图形用户状态，它依赖于multi-user.target </span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="4-systemd-的定时任务timer">
  4. systemd 的定时任务(.timer)
  <a class="heading-link" href="#4-systemd-%e7%9a%84%e5%ae%9a%e6%97%b6%e4%bb%bb%e5%8a%a1timer">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h1>
<p>所谓定时任务，就是未来的某个或多个时点，预定要执行的任务，比如每五分钟收一次邮件、每天半夜两点分析一下日志等等。<br>
<code>Linux</code> 系统通常都使用 <code>cron</code> 设置定时任务，但是 <code>Systemd</code> 也有这个功能，而且优点显著</p>
<ul>
<li>自动生成日志，配合 <code>Systemd</code> 的日志工具，很方便除错</li>
<li>可以设置内存和 <code>CPU</code> 的使用额度，比如最多使用50%的 <code>CPU</code></li>
<li>任务可以拆分，依赖其他 <code>Systemd</code> 单元，完成非常复杂的任务</li>
</ul>
<p>每个单元都有一个单元描述文件，它们分散在三个目录。</p>
<ul>
<li><code>/lib/systemd/system</code>：系统默认的单元文件</li>
<li><code>/etc/systemd/system</code>：用户安装的软件的单元文件</li>
<li><code>/usr/lib/systemd/system</code>：用户自己定义的单元文件</li>
</ul>
<p><code>systemd</code> 定时任务分为两个部分</p>
<ol>
<li>任务执行部分<code>.service</code>
<ul>
<li>用于定义如何执行该任务,无需配置如何安装(即定义<code>Install</code>)</li>
</ul>
</li>
<li>定时执行部分<code>.timer</code>
<ul>
<li>用于定义什么时间执行该任务</li>
<li><a href="#timer" ><code>[Timer]</code> 节点</a></li>
</ul>
</li>
</ol>
<h1 id="5-systemd-常用相关命令">
  5. systemd 常用相关命令
  <a class="heading-link" href="#5-systemd-%e5%b8%b8%e7%94%a8%e7%9b%b8%e5%85%b3%e5%91%bd%e4%bb%a4">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h1>
<h2 id="51-systemctl-系统相关">
  5.1. systemctl 系统相关
  <a class="heading-link" href="#51-systemctl-%e7%b3%bb%e7%bb%9f%e7%9b%b8%e5%85%b3">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 重启系统</span>
</span></span><span class="line"><span class="cl">$&gt; sudo systemctl reboot
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 关闭系统，切断电源</span>
</span></span><span class="line"><span class="cl">$&gt; sudo systemctl poweroff
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># CPU停止工作</span>
</span></span><span class="line"><span class="cl">$&gt; sudo systemctl halt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 暂停系统</span>
</span></span><span class="line"><span class="cl">$&gt; sudo systemctl <span class="nb">suspend</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 让系统进入冬眠状态</span>
</span></span><span class="line"><span class="cl">$&gt; sudo systemctl hibernate
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 让系统进入交互式休眠状态</span>
</span></span><span class="line"><span class="cl">$&gt; sudo systemctl hybrid-sleep
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 启动进入救援状态（单用户状态）</span>
</span></span><span class="line"><span class="cl">$&gt; sudo systemctl rescue
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="52-systemd-analyze命令用于查看启动耗时">
  5.2. systemd-analyze命令用于查看启动耗时
  <a class="heading-link" href="#52-systemd-analyze%e5%91%bd%e4%bb%a4%e7%94%a8%e4%ba%8e%e6%9f%a5%e7%9c%8b%e5%90%af%e5%8a%a8%e8%80%97%e6%97%b6">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 查看启动耗时</span>
</span></span><span class="line"><span class="cl">$&gt; systemd-analyze
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看每个服务的启动耗时</span>
</span></span><span class="line"><span class="cl">$&gt; systemd-analyze blame
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 显示瀑布状的启动过程流</span>
</span></span><span class="line"><span class="cl">$&gt; systemd-analyze critical-chain
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 显示指定服务的启动流</span>
</span></span><span class="line"><span class="cl">$&gt; systemd-analyze critical-chain atd.service
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="53-loginctl命令用于查看当前登录的用户">
  5.3. loginctl命令用于查看当前登录的用户
  <a class="heading-link" href="#53-loginctl%e5%91%bd%e4%bb%a4%e7%94%a8%e4%ba%8e%e6%9f%a5%e7%9c%8b%e5%bd%93%e5%89%8d%e7%99%bb%e5%bd%95%e7%9a%84%e7%94%a8%e6%88%b7">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 列出当前session</span>
</span></span><span class="line"><span class="cl">$&gt; loginctl list-sessions
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 列出当前登录用户</span>
</span></span><span class="line"><span class="cl">$&gt; loginctl list-users
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 列出显示指定用户的信息</span>
</span></span><span class="line"><span class="cl">$&gt; loginctl show-user ruanyf
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="54-systemctl-状态查询命令">
  5.4. systemctl 状态查询命令
  <a class="heading-link" href="#54-systemctl-%e7%8a%b6%e6%80%81%e6%9f%a5%e8%af%a2%e5%91%bd%e4%bb%a4">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 显示某个 Unit 是否正在运行</span>
</span></span><span class="line"><span class="cl">$&gt; systemctl is-active application.service
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 显示某个 Unit 是否处于启动失败状态</span>
</span></span><span class="line"><span class="cl">$&gt; systemctl is-failed application.service
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 显示某个 Unit 服务是否建立了启动链接</span>
</span></span><span class="line"><span class="cl">$&gt; systemctl is-enabled application.service
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="55-系统日志管理">
  5.5. 系统日志管理
  <a class="heading-link" href="#55-%e7%b3%bb%e7%bb%9f%e6%97%a5%e5%bf%97%e7%ae%a1%e7%90%86">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 查看所有日志（默认情况下 ，只保存本次启动的日志）</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看内核日志（不显示应用日志）</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl -k
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看系统本次启动的日志</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl -b
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl -b -0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看上一次启动的日志（需更改设置）</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl -b -1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看指定时间的日志</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl --since<span class="o">=</span><span class="s2">&#34;2012-10-30 18:17:16&#34;</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl --since <span class="s2">&#34;20 min ago&#34;</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl --since yesterday
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl --since <span class="s2">&#34;2015-01-10&#34;</span> --until <span class="s2">&#34;2015-01-11 03:00&#34;</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl --since 09:00 --until <span class="s2">&#34;1 hour ago&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 显示尾部的最新10行日志</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl -n
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 显示尾部指定行数的日志</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl -n <span class="m">20</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 实时滚动显示最新日志</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl -f
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看指定服务的日志</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl /usr/lib/systemd/systemd
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看指定进程的日志</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl <span class="nv">_PID</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看某个路径的脚本的日志</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl /usr/bin/bash
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看指定用户的日志</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl <span class="nv">_UID</span><span class="o">=</span><span class="m">33</span> --since today
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看某个 Unit 的日志</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl -u nginx.service
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl -u nginx.service --since today
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 实时滚动显示某个 Unit 的最新日志</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl -u nginx.service -f
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 合并显示多个 Unit 的日志</span>
</span></span><span class="line"><span class="cl">$&gt; journalctl -u nginx.service -u php-fpm.service --since today
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看指定优先级（及其以上级别）的日志，共有8级</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 0: emerg</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 1: alert</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 2: crit</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 3: err</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 4: warning</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 5: notice</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 6: info</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 7: debug</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl -p err -b
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 日志默认分页输出，--no-pager 改为正常的标准输出</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl --no-pager
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 以 JSON 格式（单行）输出</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl -b -u nginx.service -o json
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 以 JSON 格式（多行）输出，可读性更好</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl -b -u nginx.service -o json-pretty
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 显示日志占据的硬盘空间</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl --disk-usage
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 指定日志文件占据的最大空间</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl --vacuum-size<span class="o">=</span>1G
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 指定日志文件保存多久</span>
</span></span><span class="line"><span class="cl">$&gt; sudo journalctl --vacuum-time<span class="o">=</span>1years
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><span id="timer"></span></p>
<ol>
<li>对于<code>[Timer]</code>节点, <code>Systemd</code> 提供以下一些字段。
<ul>
<li><code>OnActiveSec</code>：定时器生效后，多少时间开始执行任务</li>
<li><code>OnBootSec</code>：系统启动后，多少时间开始执行任务</li>
<li><code>OnStartupSec``：Systemd</code> 进程启动后，多少时间开始执行任务</li>
<li><code>OnUnitActiveSec</code>：该单元上次执行后，等多少时间再次执行(s/h)
<ul>
<li>示例:
<ul>
<li><code>OnUnitActiveSec=1h</code> 表示一小时执行一次任务</li>
<li><code>OnUnitActiveSec=*-*-* 02:00:00</code>表示每天凌晨两点执行</li>
<li><code>OnUnitActiveSec=Mon *-*-* 02:00:00</code>表示每周一凌晨两点执行</li>
<li>
<blockquote>
<p>官方文档 <a href="https://www.freedesktop.org/software/systemd/man/systemd.time.html"  class="external-link" target="_blank" rel="noopener">https://www.freedesktop.org/software/systemd/man/systemd.time.html</a></p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li><code>OnUnitInactiveSec</code>： 定时器上次关闭后多少时间，再次执行</li>
<li><code>OnCalendar</code>：基于绝对时间，而不是相对时间执行</li>
<li><code>AccuracySec</code>：如果因为各种原因，任务必须推迟执行，推迟的最大秒数，默认是60秒</li>
<li><code>Unit</code>：真正要执行的任务，默认是同名的带有<code>.service</code>后缀的单元</li>
<li><code>Persistent</code>：如果设置了该字段，即使定时器到时没有启动，也会自动执行相应的单元</li>
<li><code>WakeSystem</code>：如果系统休眠，是否自动唤醒系统</li>
</ul>
</li>
</ol>

      </div>


      <footer>
        

<section class="see-also">
  
    
    
    
      <h3 id="参见-杂记">
        参见 杂记
        <a class="heading-link" href="#%e5%8f%82%e8%a7%81-%e6%9d%82%e8%ae%b0">
          <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
          <span class="sr-only">链接到标题</span>
        </a>
      </h3>
      <nav>
        <ul>
        
        
          
            <li>
              <a href="/2021/%E9%82%A3%E4%BA%9B%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E8%AE%B0%E5%BD%95.1/">那些杂七杂八的记录(一)</a>
            </li>
          
        
          
            <li>
              <a href="/2021/%E9%82%A3%E4%BA%9B%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E8%AE%B0%E5%BD%95.2/">那些杂七杂八的记录(二)</a>
            </li>
          
        
          
            <li>
              <a href="/2023/%E5%86%85%E7%BD%91.%E5%A4%96%E7%BD%91.%E5%AE%BD%E5%B8%A6.%E5%B8%A6%E5%AE%BD.%E6%B5%81%E9%87%8F.%E7%BD%91%E9%80%9F%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB%E4%B8%8E%E8%81%94%E7%B3%BB/">内网.外网.宽带.带宽.流量.网速之间的区别与联系</a>
            </li>
          
        
          
            <li>
              <a href="/2023/%E5%B8%B8%E7%94%A8%E7%9A%84bat%E8%84%9A%E6%9C%AC%E8%AF%AD%E6%B3%95/">常用的BAT脚本语法</a>
            </li>
          
        
          
            <li>
              <a href="/2022/http%E5%93%8D%E5%BA%94%E7%A0%81/">HTTP响应码</a>
            </li>
          
        
          
            <li>
              <a href="/2022/fedora%E8%A7%86%E9%A2%91%E6%A1%8C%E9%9D%A2/">Fedora视频桌面</a>
            </li>
          
        
        </ul>
      </nav>
    
  
</section>


        
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
    <div class="footer-container"><div class="footer-line"><div id="show-ip"></div><script>document.addEventListener("DOMContentLoaded", function () {fetch("https://ipinfo.io/json?token=c9716df22a6255").then(function (response) {return response.json();}).then(function (data) {document.getElementById("show-ip").innerHTML = data.ip;if (data.country !== "CN") {document.querySelectorAll(".icp, .icp-splitter, .icp-br").forEach(function (el) {el.style.display = "none";});}}).catch(function (error) {document.getElementById("show-ip").innerHTML = "unknown";console.error("状态请求失败:", error);});});</script><script type="text/javascript">(function(c,l,a,r,i,t,y){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y)})(window,document,"clarity","script","jtpwi0tdz1");</script></div><div class="footer-line">
          &nbsp;|&nbsp;&nbsp;|&nbsp;
        </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022 -2024</span><span class="author" itemprop="copyrightHolder"
            >&nbsp;<a
              href="/"
              target="_blank"
              rel="noopener noreferrer"
              ></a
            ></span
          >&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">CC BY-NC-SA 4.0</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br" />
          <span class="icp"><img src="/images/gov.png" style="height: 16px;width: 16px; display: inline-block;vertical-align: middle;margin-right: 3px;"/><a href="https://beian.mps.gov.cn/#/query/webSearch?code=50010602503871" rel="noreferrer" target="_blank">渝公网安备50010602503871</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br" />
          <span class="icp"><a href="https://beian.miit.gov.cn" target="_blank">渝ICP备2020011834号-2</a></span></div>
      <div class="footer-line"></div>
      <div class="footer-line"></div>
    </div></footer>
  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
