<!DOCTYPE html>
<html lang="zh-cn">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Cobbler无人值守安装 · 一个曾经的小码农...
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="description" content="Cobbler无人值守安装">
<meta name="keywords" content="[linux Hugo 解决方案 故障]">



  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/icons/logo_avatar.png">
  <meta name="twitter:title" content="Cobbler无人值守安装">
  <meta name="twitter:description" content="Cobbler无人值守安装">

<meta property="og:url" content="http://localhost:1313/2020/cobbler%E6%97%A0%E4%BA%BA%E5%80%BC%E5%AE%88%E5%AE%89%E8%A3%85/">
  <meta property="og:site_name" content="一个曾经的小码农...">
  <meta property="og:title" content="Cobbler无人值守安装">
  <meta property="og:description" content="Cobbler无人值守安装">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-01-19T00:00:00+00:00">
    <meta property="article:modified_time" content="2020-01-19T00:00:00+00:00">
    <meta property="article:tag" content="Linux">
    <meta property="article:tag" content="Cobbler">
    <meta property="article:tag" content="解决方案">
    <meta property="og:image" content="http://localhost:1313/icons/logo_avatar.png">
      <meta property="og:see_also" content="http://localhost:1313/2020/%E5%B8%B8%E7%94%A8web%E7%8E%AF%E5%A2%83%E4%BC%98%E5%8C%96/">
      <meta property="og:see_also" content="http://localhost:1313/2019/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%94%B6%E9%9B%86/">
      <meta property="og:see_also" content="http://localhost:1313/2019/shellscript%E7%9B%B8%E5%85%B3/">
      <meta property="og:see_also" content="http://localhost:1313/2024/redis%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6_%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F/">
      <meta property="og:see_also" content="http://localhost:1313/2024/linux%E4%B8%8B%E4%BD%BF%E7%94%A8tun2socks%E8%BF%9B%E8%A1%8C%E4%B8%A4%E5%9C%B0%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5/">
      <meta property="og:see_also" content="http://localhost:1313/2024/linux%E6%80%A7%E8%83%BD%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E5%8F%8A%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95/">
      <meta property="og:see_also" content="http://localhost:1313/2023/%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E6%97%B6%E9%97%B4%E7%BB%9F%E8%AE%A1/">




<link rel="canonical" href="http://localhost:1313/2020/cobbler%E6%97%A0%E4%BA%BA%E5%80%BC%E5%AE%88%E5%AE%89%E8%A3%85/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">








 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">


<link rel="alternate" type="text/plain" href="/2020/cobbler%E6%97%A0%E4%BA%BA%E5%80%BC%E5%AE%88%E5%AE%89%E8%A3%85/index.md" title="一个曾经的小码农..." />







</head>




<body class="preload-transitions colorscheme-light">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      一个曾经的小码农...
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">文章</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/tags/">标签</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/categories/">分类</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/series/">系列</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/2020/cobbler%E6%97%A0%E4%BA%BA%E5%80%BC%E5%AE%88%E5%AE%89%E8%A3%85/">
              Cobbler无人值守安装
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2020-01-19T00:00:00Z">
                January 19, 2020
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              阅读时间：5 分钟
            </span>
          </div>
          <div class="authors">
  <i class="fa-solid fa-user" aria-hidden="true"></i>
    <a href="/authors/admin/">Admin</a></div>

          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/linux/">Linux</a>
      <span class="separator">•</span>
    <a href="/categories/%E6%95%B4%E7%90%86%E6%94%B6%E9%9B%86/">整理收集</a></div>

          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/linux/">Linux</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/cobbler/">Cobbler</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">解决方案</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <div class="details admonition quote open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-quote-right fa-fw"></i>文章来源<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><blockquote>
<p><a href="https://www.linuxprobe.com/cobbler-installation-server.html"  class="external-link" target="_blank" rel="noopener">https://www.linuxprobe.com/cobbler-installation-server.html</a></p>
</blockquote></div>
        </div>
    </div>
<h1 id="1-cobbler-运行流程">
  1. Cobbler 运行流程
  <a class="heading-link" href="#1-cobbler-%e8%bf%90%e8%a1%8c%e6%b5%81%e7%a8%8b">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h1>
<ul>
<li>
<p>Server 端：</p>
<ul>
<li>第一步：启动 Cobbler 服务</li>
<li>第二步：进行 Cobbler 错误检查，执行 Cobbler check 命令</li>
<li>第三步：进行配置同步，执行 Cobbler sync 命令</li>
<li>第四步：复制相关启动文件文件到 TFTP 目录中</li>
<li>第五步：启动 DHCP 服务，提供地址分配</li>
<li>第六步：DHCP 服务分配 IP 地址</li>
<li>第七步：TFTP 传输启动文件</li>
<li>第八步：Server 端接收安装信息</li>
<li>第九步：Server 端发送 ISO 镜像不 Kickstart 文件</li>
</ul>
</li>
<li>
<p>Client 端：</p>
<ul>
<li>第一步：客户端以 PXE 模式启动</li>
<li>第二步：客户端获取 IP 地址</li>
<li>第三步：通过 TFTP 服务器获取启动文件</li>
<li>第四步：进入 Cobbler 安装选择界面</li>
<li>第五步：客户端确定加载信息</li>
<li>第六步：根据配置信息准备安装系统</li>
<li>第七步：加载 Kickstart 文件</li>
<li>第八步：传输系统安装的其它文件</li>
<li>第九步：进行安装系统</li>
</ul>
</li>
</ul>
<h1 id="2-搭建-cobbler-无人值守安装服务器">
  2. 搭建 Cobbler 无人值守安装服务器
  <a class="heading-link" href="#2-%e6%90%ad%e5%bb%ba-cobbler-%e6%97%a0%e4%ba%ba%e5%80%bc%e5%ae%88%e5%ae%89%e8%a3%85%e6%9c%8d%e5%8a%a1%e5%99%a8">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h1>
<h2 id="21-安装配置-cobbler">
  2.1. 安装配置 Cobbler
  <a class="heading-link" href="#21-%e5%ae%89%e8%a3%85%e9%85%8d%e7%bd%ae-cobbler">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h2>
<h3 id="211-首先安装-epel-releasecobbler-和-tftp-server-在-base-源中是没有的">
  2.1.1. 首先安装 epel-release，Cobbler 和 tftp-server 在 base 源中是没有的
  <a class="heading-link" href="#211-%e9%a6%96%e5%85%88%e5%ae%89%e8%a3%85-epel-releasecobbler-%e5%92%8c-tftp-server-%e5%9c%a8-base-%e6%ba%90%e4%b8%ad%e6%98%af%e6%b2%a1%e6%9c%89%e7%9a%84">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; yum install -y epel-release
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="212-安装-cobbler-其实有一部分软件会被当做依赖进行安装上去比如-tftp-和-httpd-服务我们这里为了方便可以一并安装避免后续出现相关问题">
  2.1.2. 安装 Cobbler 其实有一部分软件会被当做依赖进行安装上去，比如 tftp 和 httpd 服务，我们这里为了方便可以一并安装，避免后续出现相关问题。
  <a class="heading-link" href="#212-%e5%ae%89%e8%a3%85-cobbler-%e5%85%b6%e5%ae%9e%e6%9c%89%e4%b8%80%e9%83%a8%e5%88%86%e8%bd%af%e4%bb%b6%e4%bc%9a%e8%a2%ab%e5%bd%93%e5%81%9a%e4%be%9d%e8%b5%96%e8%bf%9b%e8%a1%8c%e5%ae%89%e8%a3%85%e4%b8%8a%e5%8e%bb%e6%af%94%e5%a6%82-tftp-%e5%92%8c-httpd-%e6%9c%8d%e5%8a%a1%e6%88%91%e4%bb%ac%e8%bf%99%e9%87%8c%e4%b8%ba%e4%ba%86%e6%96%b9%e4%be%bf%e5%8f%af%e4%bb%a5%e4%b8%80%e5%b9%b6%e5%ae%89%e8%a3%85%e9%81%bf%e5%85%8d%e5%90%8e%e7%bb%ad%e5%87%ba%e7%8e%b0%e7%9b%b8%e5%85%b3%e9%97%ae%e9%a2%98">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; yum install -y cobbler cobbler-web dhcp tftp-server pykickstart httpd rsync xinetd 
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>注意: 必须把yum源配好，否则无法全部安装以上软件！</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; vim /etc/yum.repos.d/CentOS-Base.repo
</span></span><span class="line"><span class="cl"><span class="c1">#在CentOS-Base.repo配置文件中添加以下源</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>aliyun-os<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span>aliyun-os
</span></span><span class="line"><span class="cl"><span class="nv">baseurl</span><span class="o">=</span>https://mirrors.aliyun.com/centos/7/os/x86_64/
</span></span><span class="line"><span class="cl"><span class="nv">enabled</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="nv">gpgcheck</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>aliyun-epel<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span>aliyun-epel
</span></span><span class="line"><span class="cl"><span class="nv">baseurl</span><span class="o">=</span>https://mirrors.aliyun.com/epel/7/x86_64/
</span></span><span class="line"><span class="cl"><span class="nv">enabled</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="nv">gpgcheck</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>aliyun-extra<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span>aliyun-extra
</span></span><span class="line"><span class="cl"><span class="nv">baseurl</span><span class="o">=</span>https://mirrors.aliyun.com/centos/7/extras/x86_64/
</span></span><span class="line"><span class="cl"><span class="nv">enabled</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="nv">gpgcheck</span><span class="o">=</span><span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="213-软件作用说明">
  2.1.3. 软件作用说明
  <a class="heading-link" href="#213-%e8%bd%af%e4%bb%b6%e4%bd%9c%e7%94%a8%e8%af%b4%e6%98%8e">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cobbler <span class="c1">#Cobbler 程序包</span>
</span></span><span class="line"><span class="cl">cobbler-web <span class="c1">#Cobbler 的 Web 服务包</span>
</span></span><span class="line"><span class="cl">pykickstart <span class="c1">#Cobbler 检查 kickstart 语法错误</span>
</span></span><span class="line"><span class="cl">httpd <span class="c1">#Apache Web 服务</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="214-cobbler-工作目录介绍">
  2.1.4. Cobbler 工作目录介绍
  <a class="heading-link" href="#214-cobbler-%e5%b7%a5%e4%bd%9c%e7%9b%ae%e5%bd%95%e4%bb%8b%e7%bb%8d">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; ls /etc/cobbler/
</span></span><span class="line"><span class="cl">auth.conf         genders.template        named.template  secondary.template  zone.template
</span></span><span class="line"><span class="cl">cheetah_macros    import_rsync_whitelist  power           settings            zone_templates
</span></span><span class="line"><span class="cl">cobbler_bash      iso                     pxe             tftpd.template
</span></span><span class="line"><span class="cl">completions       ldap                    reporting       users.conf
</span></span><span class="line"><span class="cl">dhcp.template     modules.conf            rsync.exclude   users.digest
</span></span><span class="line"><span class="cl">dnsmasq.template  mongodb.conf            rsync.template  version
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">/etc/cobbler <span class="c1"># 配置文件目录</span>
</span></span><span class="line"><span class="cl">/etc/cobbler/settings <span class="c1"># Cobbler 主配置文件，这个文件是 YAML 栺式，Cobbler 是 python 写的程序。</span>
</span></span><span class="line"><span class="cl">/etc/cobbler/dhcp.template <span class="c1"># DHCP服务的配置模板</span>
</span></span><span class="line"><span class="cl">/etc/cobbler/tftpd.template <span class="c1"># tftp 服务的配置模板</span>
</span></span><span class="line"><span class="cl">/etc/cobbler/rsync.template <span class="c1"># rsync 服务的配置模板</span>
</span></span><span class="line"><span class="cl">/etc/Cobbler/iso <span class="c1"># iso 模板配置文件目录</span>
</span></span><span class="line"><span class="cl">/etc/cobbler/pxe <span class="c1"># pxe 模板文件目录</span>
</span></span><span class="line"><span class="cl">/etc/cobbler/power <span class="c1"># 电源的配置文件目录</span>
</span></span><span class="line"><span class="cl">/etc/cobbler/users.conf <span class="c1"># Web 服务授权配置文件</span>
</span></span><span class="line"><span class="cl">/etc/cobbler/users.digest <span class="c1"># 用于 Web 访问的用户名密码配置文件</span>
</span></span><span class="line"><span class="cl">/etc/cobbler/dnsmasq.template <span class="c1"># DNS 服务的配置模板</span>
</span></span><span class="line"><span class="cl">/etc/cobbler/modules.conf <span class="c1"># Cobbler 模块配置文件</span>
</span></span><span class="line"><span class="cl">/var/lib/cobbler <span class="c1"># Cobbler 数据目录</span>
</span></span><span class="line"><span class="cl">/var/lib/cobbler/config <span class="c1"># 配置文件</span>
</span></span><span class="line"><span class="cl">/var/lib/cobbler/kickstarts <span class="c1"># 默认存放 kickstart 文件</span>
</span></span><span class="line"><span class="cl">/var/lib/cobbler/loaders <span class="c1"># 存放的各种引导程序</span>
</span></span><span class="line"><span class="cl">/var/www/cobbler <span class="c1"># 系统安装镜像目录</span>
</span></span><span class="line"><span class="cl">/var/www/cobbler/ks_mirror <span class="c1"># 导入的系统镜像列表</span>
</span></span><span class="line"><span class="cl">/var/www/cobbler/images <span class="c1"># 导入的系统镜像启动文件</span>
</span></span><span class="line"><span class="cl">/var/www/cobbler/repo_mirror <span class="c1"># yum 源存储目录</span>
</span></span><span class="line"><span class="cl">/var/log/cobbler <span class="c1"># 日志目录</span>
</span></span><span class="line"><span class="cl">/var/log/cobbler/install.log <span class="c1"># 客户端系统安装日志</span>
</span></span><span class="line"><span class="cl">/var/log/cobbler/cobbler.log <span class="c1"># Cobbler 日志</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="215-首先启动-cobbler-和-httpd-服务">
  2.1.5. 首先启动 Cobbler 和 httpd 服务
  <a class="heading-link" href="#215-%e9%a6%96%e5%85%88%e5%90%af%e5%8a%a8-cobbler-%e5%92%8c-httpd-%e6%9c%8d%e5%8a%a1">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; systemctl start cobblerd httpd
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="216-检查配置">
  2.1.6. 检查配置
  <a class="heading-link" href="#216-%e6%a3%80%e6%9f%a5%e9%85%8d%e7%bd%ae">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; cobbler check
</span></span><span class="line"><span class="cl">The following are potential configuration items that you may want to fix:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">1</span> : The <span class="s1">&#39;server&#39;</span> field in /etc/cobbler/settings must be <span class="nb">set</span> to something other than localhost, or kickstarting features will not work.  This should be a resolvable hostname or IP <span class="k">for</span> the boot server as reachable by all machines that will use it.
</span></span><span class="line"><span class="cl"><span class="m">2</span> : For PXE to be functional, the <span class="s1">&#39;next_server&#39;</span> field in /etc/cobbler/settings must be <span class="nb">set</span> to something other than 127.0.0.1, and should match the IP of the boot server on the PXE network.
</span></span><span class="line"><span class="cl"><span class="m">3</span> : change <span class="s1">&#39;disable&#39;</span> to <span class="s1">&#39;no&#39;</span> in /etc/xinetd.d/tftp
</span></span><span class="line"><span class="cl"><span class="m">4</span> : Some network boot-loaders are missing from /var/lib/cobbler/loaders, you may run <span class="s1">&#39;cobbler get-loaders&#39;</span> to download them, or, <span class="k">if</span> you only want to handle x86/x86_64 netbooting, you may ensure that you have installed a *recent* version of the syslinux package installed and can ignore this message entirely.  Files in this directory, should you want to support all architectures, should include pxelinux.0, menu.c32, elilo.efi, and yaboot. The <span class="s1">&#39;cobbler get-loaders&#39;</span> <span class="nb">command</span> is the easiest way to resolve these requirements.
</span></span><span class="line"><span class="cl"><span class="m">5</span> : <span class="nb">enable</span> and start rsyncd.service with systemctl
</span></span><span class="line"><span class="cl"><span class="m">6</span> : debmirror package is not installed, it will be required to manage debian deployments and repositories
</span></span><span class="line"><span class="cl"><span class="m">7</span> : The default password used by the sample templates <span class="k">for</span> newly installed machines <span class="o">(</span>default_password_crypted in /etc/cobbler/settings<span class="o">)</span> is still <span class="nb">set</span> to <span class="s1">&#39;cobbler&#39;</span> and should be changed, try: <span class="s2">&#34;openssl passwd -1 -salt &#39;random-phrase-here&#39; &#39;your-password-here&#39;&#34;</span> to generate new one
</span></span><span class="line"><span class="cl"><span class="m">8</span> : fencing tools were not found, and are required to use the <span class="o">(</span>optional<span class="o">)</span> power management features. install cman or fence-agents to use them
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Restart cobblerd and <span class="k">then</span> run <span class="s1">&#39;cobbler sync&#39;</span> to apply changes.
</span></span></code></pre></td></tr></table>
</div>
</div><p>以上问题我们需要逐步解决。</p>
<ul>
<li>问题 1：修改 <code>server</code> 地址为 <code>192.168.1.7</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; vim /etc/cobbler/settings
</span></span><span class="line"><span class="cl">改：390 server: 127.0.1
</span></span><span class="line"><span class="cl">为：390 server: 192.168.1.7
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>问题 2：修改 <code>next_server</code> 地址为 <code>192.168.1.7</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; vim /etc/cobbler/settings
</span></span><span class="line"><span class="cl">改：278 next_server: 127.0.1
</span></span><span class="line"><span class="cl">为：278 next_server: 192.168.1.7
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>问题 3：修改 <code>tftp</code> 服务被 <code>xinetd</code> 服务管理</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; vim /etc/xinetd.d/tftp
</span></span><span class="line"><span class="cl">改：14 <span class="nv">disable</span> <span class="o">=</span> yes
</span></span><span class="line"><span class="cl">为：14 <span class="nv">disable</span> <span class="o">=</span> no
</span></span><span class="line"><span class="cl">顺便修改 xinetd 和 tftpd 服务开机启动
</span></span><span class="line"><span class="cl">$&gt; systemctl start xinetd tftp <span class="o">&amp;&amp;</span> systemctl <span class="nb">enable</span> xinetd tftp
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>问题 4：下载操作系统引导文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; cobbler get-loaders
</span></span><span class="line"><span class="cl">task started: 2020-01-04_031204_get_loaders
</span></span><span class="line"><span class="cl">task started <span class="o">(</span><span class="nv">id</span><span class="o">=</span>Download Bootloader Content, <span class="nv">time</span><span class="o">=</span>Sat Jan  <span class="m">4</span> 03:12:04 2020<span class="o">)</span>
</span></span><span class="line"><span class="cl">downloading https://cobbler.github.io/loaders/README to /var/lib/cobbler/loaders/README
</span></span><span class="line"><span class="cl">downloading https://cobbler.github.io/loaders/COPYING.elilo to /var/lib/cobbler/loaders/COPYING.elilo
</span></span><span class="line"><span class="cl">downloading https://cobbler.github.io/loaders/COPYING.yaboot to /var/lib/cobbler/loaders/COPYING.yaboot
</span></span><span class="line"><span class="cl">downloading https://cobbler.github.io/loaders/COPYING.syslinux to /var/lib/cobbler/loaders/COPYING.syslinux
</span></span><span class="line"><span class="cl">downloading https://cobbler.github.io/loaders/elilo-3.8-ia64.efi to /var/lib/cobbler/loaders/elilo-ia64.efi
</span></span><span class="line"><span class="cl">downloading https://cobbler.github.io/loaders/yaboot-1.3.17 to /var/lib/cobbler/loaders/yaboot
</span></span><span class="line"><span class="cl">downloading https://cobbler.github.io/loaders/pxelinux.0-3.86 to /var/lib/cobbler/loaders/pxelinux.0
</span></span><span class="line"><span class="cl">downloading https://cobbler.github.io/loaders/menu.c32-3.86 to /var/lib/cobbler/loaders/menu.c32
</span></span><span class="line"><span class="cl">downloading https://cobbler.github.io/loaders/grub-0.97-x86.efi to /var/lib/cobbler/loaders/grub-x86.efi
</span></span><span class="line"><span class="cl">downloading https://cobbler.github.io/loaders/grub-0.97-x86_64.efi to /var/lib/cobbler/loaders/grub-x86_64.efi
</span></span><span class="line"><span class="cl">*** TASK COMPLETE ***
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>问题 5：修改 <code>rsyncd</code> 服务为开机自启动状态并启用它。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; systemctl start rsyncd <span class="o">&amp;&amp;</span> systemctl <span class="nb">enable</span> rsyncd
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>问题 6：关于 <code>debian</code> 相关部署管理配置，忽略。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">debmirror package is not installed, it will be required to manage debian
</span></span><span class="line"><span class="cl">deployments and repositories <span class="c1"># debmirror 包尚未安装，需要它来管理 debian 部署和存储库</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>问题 7：修改操作系统默认密码</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; openssl passwd -1 -salt <span class="s1">&#39;root&#39;</span> <span class="s1">&#39;123456&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$1$root$j0bp</span>.KLPyr.u9kgQ428D10
</span></span><span class="line"><span class="cl">$&gt; vim /etc/cobbler/settings
</span></span><span class="line"><span class="cl">改：101 default_password_crypted: <span class="s2">&#34;</span><span class="nv">$1$mF86</span><span class="s2">/UHC</span><span class="nv">$WvcIcX2t6crBz2onWxyac</span><span class="s2">.&#34;</span>
</span></span><span class="line"><span class="cl">为：101 default_password_crypted: <span class="s2">&#34;</span><span class="nv">$1$root$j0bp</span><span class="s2">.KLPyr.u9kgQ428D10&#34;</span>
</span></span><span class="line"><span class="cl">注：root 为用户描述，123456 为密码
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>问题 8：电源管理相关服务，忽略。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">fencing tools were not found, and are required to use the <span class="o">(</span>optional<span class="o">)</span> power
</span></span><span class="line"><span class="cl">management features. install cman or fence-agents to use them
</span></span></code></pre></td></tr></table>
</div>
</div><p>修改完以上配置就可以检查 <code>DHCP</code> 配置了，由于 <code>Cobbler</code> 自动管理 <code>DHCP</code> 服务，我们只需要修改 <code>Cobbler</code> 中的模板配置文件即可。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; vim /etc/cobbler/dhcp.template
</span></span><span class="line"><span class="cl">改：22 option routers 192.168.1.5<span class="p">;</span> <span class="c1">#修改默认网关地址</span>
</span></span><span class="line"><span class="cl">为：22 option routers 192.168.1.1<span class="p">;</span> <span class="c1">#以实际的网关为准</span>
</span></span><span class="line"><span class="cl">改：23 option domain-name-servers 192.168.1.1<span class="p">;</span> <span class="c1">#修改 DNS 地址</span>
</span></span><span class="line"><span class="cl">为：23 option domain-name-servers 114.114.114.114<span class="p">;</span>
</span></span><span class="line"><span class="cl">如下：
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="m">21</span> subnet 192.168.1.0 netmask 255.255.255.0 <span class="o">{</span>
</span></span><span class="line"><span class="cl"> <span class="m">22</span>      option routers             192.168.1.1<span class="p">;</span>
</span></span><span class="line"><span class="cl"> <span class="m">23</span>      option domain-name-servers 114.114.114.114<span class="p">;</span>
</span></span><span class="line"><span class="cl"> <span class="m">24</span>      option subnet-mask         255.255.255.0<span class="p">;</span>
</span></span><span class="line"><span class="cl"> <span class="m">25</span>      range dynamic-bootp        192.168.1.100 192.168.1.254<span class="p">;</span>
</span></span><span class="line"><span class="cl"> <span class="m">26</span>      default-lease-time         21600<span class="p">;</span>
</span></span><span class="line"><span class="cl"> <span class="m">27</span>      max-lease-time             43200<span class="p">;</span>
</span></span><span class="line"><span class="cl"> <span class="m">28</span>      next-server                <span class="nv">$next_server</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>注：配置默认为 <code>192.168.1.0</code> 网段，具体要看你的装机 <code>vlan</code> 划分，现在是实验环境所以保持配不变。</strong><br>
<strong>注：默认网关地址为 <code>192.168.1.5</code>，这里需要改成你自己局域网中的网关。</strong><br>
<code>$next_server</code> 为变量值为我们前面修改的主配置文件中的地址 <code>192.168.1.7</code></p>
<h3 id="217-修改-cobbler-管理-dhcp-服务">
  2.1.7. 修改 Cobbler 管理 dhcp 服务
  <a class="heading-link" href="#217-%e4%bf%ae%e6%94%b9-cobbler-%e7%ae%a1%e7%90%86-dhcp-%e6%9c%8d%e5%8a%a1">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; vim /etc/cobbler/settings
</span></span><span class="line"><span class="cl">改：242 manage_dhcp: <span class="m">0</span>
</span></span><span class="line"><span class="cl">为：242 manage_dhcp: <span class="m">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="218-同步配置文件需要先重启-cobblerd">
  2.1.8. 同步配置文件，需要先重启 Cobblerd
  <a class="heading-link" href="#218-%e5%90%8c%e6%ad%a5%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e9%9c%80%e8%a6%81%e5%85%88%e9%87%8d%e5%90%af-cobblerd">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; systemctl restart cobblerd
</span></span><span class="line"><span class="cl">$&gt; cobbler sync
</span></span><span class="line"><span class="cl">task started: 2020-01-04_032552_sync
</span></span><span class="line"><span class="cl">task started <span class="o">(</span><span class="nv">id</span><span class="o">=</span>Sync, <span class="nv">time</span><span class="o">=</span>Sat Jan  <span class="m">4</span> 03:25:52 2020<span class="o">)</span>
</span></span><span class="line"><span class="cl">running pre-sync triggers
</span></span><span class="line"><span class="cl">cleaning trees
</span></span><span class="line"><span class="cl">removing: /var/lib/tftpboot/grub/images
</span></span><span class="line"><span class="cl">copying bootloaders
</span></span><span class="line"><span class="cl">trying hardlink /var/lib/cobbler/loaders/pxelinux.0 -&gt; /var/lib/tftpboot/pxelinux.0
</span></span><span class="line"><span class="cl">trying hardlink /var/lib/cobbler/loaders/menu.c32 -&gt; /var/lib/tftpboot/menu.c32
</span></span><span class="line"><span class="cl">trying hardlink /var/lib/cobbler/loaders/yaboot -&gt; /var/lib/tftpboot/yaboot
</span></span><span class="line"><span class="cl">trying hardlink /usr/share/syslinux/memdisk -&gt; /var/lib/tftpboot/memdisk
</span></span><span class="line"><span class="cl">trying hardlink /var/lib/cobbler/loaders/grub-x86.efi -&gt; /var/lib/tftpboot/grub/grub-x86.efi
</span></span><span class="line"><span class="cl">trying hardlink /var/lib/cobbler/loaders/grub-x86_64.efi -&gt; /var/lib/tftpboot/grub/grub-x86_64.efi
</span></span><span class="line"><span class="cl">copying distros to tftpboot
</span></span><span class="line"><span class="cl">copying images
</span></span><span class="line"><span class="cl">generating PXE configuration files
</span></span><span class="line"><span class="cl">generating PXE menu structure
</span></span><span class="line"><span class="cl">rendering DHCP files
</span></span><span class="line"><span class="cl">generating /etc/dhcp/dhcpd.conf
</span></span><span class="line"><span class="cl">rendering TFTPD files
</span></span><span class="line"><span class="cl">generating /etc/xinetd.d/tftp
</span></span><span class="line"><span class="cl">cleaning link caches
</span></span><span class="line"><span class="cl">running post-sync triggers
</span></span><span class="line"><span class="cl">running python triggers from /var/lib/cobbler/triggers/sync/post/*
</span></span><span class="line"><span class="cl">running python trigger cobbler.modules.sync_post_restart_services
</span></span><span class="line"><span class="cl">running: dhcpd -t -q
</span></span><span class="line"><span class="cl">received on stdout: 
</span></span><span class="line"><span class="cl">received on stderr: 
</span></span><span class="line"><span class="cl">running: service dhcpd restart
</span></span><span class="line"><span class="cl">received on stdout: 
</span></span><span class="line"><span class="cl">received on stderr: Redirecting to /bin/systemctl restart dhcpd.service
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">running shell triggers from /var/lib/cobbler/triggers/sync/post/*
</span></span><span class="line"><span class="cl">running python triggers from /var/lib/cobbler/triggers/change/*
</span></span><span class="line"><span class="cl">running python trigger cobbler.modules.manage_genders
</span></span><span class="line"><span class="cl">running python trigger cobbler.modules.scm_track
</span></span><span class="line"><span class="cl">running shell triggers from /var/lib/cobbler/triggers/change/*
</span></span><span class="line"><span class="cl">*** TASK COMPLETE ***
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意观察 DHCP 服务是否启动。<br>
重新检查，剩下 2 个可以忽略的问题。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; cobbler check
</span></span><span class="line"><span class="cl">The following are potential configuration items that you may want to fix:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">1</span> : debmirror package is not installed, it will be required to manage debian deployments and repositories
</span></span><span class="line"><span class="cl"><span class="m">2</span> : fencing tools were not found, and are required to use the <span class="o">(</span>optional<span class="o">)</span> power management features. install cman or fence-agents to use them
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Restart cobblerd and <span class="k">then</span> run <span class="s1">&#39;cobbler sync&#39;</span> to apply changes.
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="219-挂载光驱">
  2.1.9. 挂载光驱
  <a class="heading-link" href="#219-%e6%8c%82%e8%bd%bd%e5%85%89%e9%a9%b1">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; mount /dev/sr0 /mnt
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="2110-导入镜像">
  2.1.10. 导入镜像
  <a class="heading-link" href="#2110-%e5%af%bc%e5%85%a5%e9%95%9c%e5%83%8f">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; cobbler import --path<span class="o">=</span>/mnt/ --name<span class="o">=</span>CentOS-7.6 --arch<span class="o">=</span>x86_64
</span></span><span class="line"><span class="cl">task started: 2020-01-04_033346_import
</span></span><span class="line"><span class="cl">task started <span class="o">(</span><span class="nv">id</span><span class="o">=</span>Media import, <span class="nv">time</span><span class="o">=</span>Sat Jan <span class="m">4</span> 03:33:46 2020<span class="o">)</span>
</span></span><span class="line"><span class="cl">Found a candidate signature: <span class="nv">breed</span><span class="o">=</span>redhat, <span class="nv">version</span><span class="o">=</span>rhel6
</span></span><span class="line"><span class="cl">Found a matching signature: <span class="nv">breed</span><span class="o">=</span>redhat, <span class="nv">version</span><span class="o">=</span>rhel6
</span></span><span class="line"><span class="cl">Adding distros from path /var/www/cobbler/ks_mirror/CentOS-7.6-x86_64:
</span></span><span class="line"><span class="cl">creating new distro: CentOS-7.6-x86_64
</span></span><span class="line"><span class="cl">trying symlink: /var/www/cobbler/ks_mirror/CentOS-7.6-x86_64 -&gt; /var/www/cobbler/links/CentOS-7.6-x86_64
</span></span><span class="line"><span class="cl">creating new profile: CentOS-7.6-x86_64
</span></span><span class="line"><span class="cl">associating repos
</span></span><span class="line"><span class="cl">checking <span class="k">for</span> rsync repo<span class="o">(</span>s<span class="o">)</span>
</span></span><span class="line"><span class="cl">checking <span class="k">for</span> rhn repo<span class="o">(</span>s<span class="o">)</span>
</span></span><span class="line"><span class="cl">checking <span class="k">for</span> yum repo<span class="o">(</span>s<span class="o">)</span>
</span></span><span class="line"><span class="cl">starting descent into /var/www/cobbler/ks_mirror/CentOS-7.6-x86_64 <span class="k">for</span> CentOS-7.6-x86_64
</span></span><span class="line"><span class="cl">processing repo at : /var/www/cobbler/ks_mirror/CentOS-7.6-x86_64
</span></span><span class="line"><span class="cl">need to process repo/comps: /var/www/cobbler/ks_mirror/CentOS-7.6-x86_64
</span></span><span class="line"><span class="cl">looking <span class="k">for</span> /var/www/cobbler/ks_mirror/CentOS-7.6-x86_64/repodata/*comps*.xml
</span></span><span class="line"><span class="cl">Keeping repodata as-is :/var/www/cobbler/ks_mirror/CentOS-7.6-x86_64/repodata
</span></span><span class="line"><span class="cl">*** TASK COMPLETE ***
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="2111-查看镜像上面是镜像名称下面是启动菜单">
  2.1.11. 查看镜像，上面是镜像名称，下面是启动菜单。
  <a class="heading-link" href="#2111-%e6%9f%a5%e7%9c%8b%e9%95%9c%e5%83%8f%e4%b8%8a%e9%9d%a2%e6%98%af%e9%95%9c%e5%83%8f%e5%90%8d%e7%a7%b0%e4%b8%8b%e9%9d%a2%e6%98%af%e5%90%af%e5%8a%a8%e8%8f%9c%e5%8d%95">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; cobbler list
</span></span><span class="line"><span class="cl">distros:
</span></span><span class="line"><span class="cl">CentOS-7.6-x86_64
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">profiles:
</span></span><span class="line"><span class="cl">CentOS-7.6-x86_64
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="2112-同步-cobbler-配置">
  2.1.12. 同步 Cobbler 配置
  <a class="heading-link" href="#2112-%e5%90%8c%e6%ad%a5-cobbler-%e9%85%8d%e7%bd%ae">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$&gt; systemctl restart cobblerd
</span></span><span class="line"><span class="cl">$&gt; cobbler sync
</span></span></code></pre></td></tr></table>
</div>
</div><p>至此，搭建 Cobbler 无人值守安装服务器完成！</p>

      </div>


      <footer>
        

<section class="see-also">
  
    
    
    
      <h3 id="参见-运维记事">
        参见 运维记事
        <a class="heading-link" href="#%e5%8f%82%e8%a7%81-%e8%bf%90%e7%bb%b4%e8%ae%b0%e4%ba%8b">
          <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
          <span class="sr-only">链接到标题</span>
        </a>
      </h3>
      <nav>
        <ul>
        
        
          
            <li>
              <a href="/2020/%E5%B8%B8%E7%94%A8web%E7%8E%AF%E5%A2%83%E4%BC%98%E5%8C%96/">常用web环境优化</a>
            </li>
          
        
          
            <li>
              <a href="/2019/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%94%B6%E9%9B%86/">常用命令收集</a>
            </li>
          
        
          
            <li>
              <a href="/2019/shellscript%E7%9B%B8%E5%85%B3/">Shellscript相关</a>
            </li>
          
        
          
            <li>
              <a href="/2024/redis%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6_%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F/">Redis主从复制&#43;哨兵</a>
            </li>
          
        
          
            <li>
              <a href="/2024/linux%E4%B8%8B%E4%BD%BF%E7%94%A8tun2socks%E8%BF%9B%E8%A1%8C%E4%B8%A4%E5%9C%B0%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5/">Linux下使用tun2socks进行两地网络连接</a>
            </li>
          
        
          
            <li>
              <a href="/2024/linux%E6%80%A7%E8%83%BD%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E5%8F%8A%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95/">Linux 性能基准测试工具及测试方法</a>
            </li>
          
        
        </ul>
      </nav>
    
  
</section>


        
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
    <div class="footer-container"><div class="footer-line"><div id="show-ip"></div><script>document.addEventListener("DOMContentLoaded", function () {fetch("https://ipinfo.io/json?token=c9716df22a6255").then(function (response) {return response.json();}).then(function (data) {document.getElementById("show-ip").innerHTML = data.ip;if (data.country !== "CN") {document.querySelectorAll(".icp, .icp-splitter, .icp-br").forEach(function (el) {el.style.display = "none";});}}).catch(function (error) {document.getElementById("show-ip").innerHTML = "unknown";console.error("状态请求失败:", error);});});</script><script type="text/javascript">(function(c,l,a,r,i,t,y){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y)})(window,document,"clarity","script","jtpwi0tdz1");</script></div><div class="footer-line">
          &nbsp;|&nbsp;&nbsp;|&nbsp;
        </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022 -2024</span><span class="author" itemprop="copyrightHolder"
            >&nbsp;<a
              href="/"
              target="_blank"
              rel="noopener noreferrer"
              ></a
            ></span
          >&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">CC BY-NC-SA 4.0</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br" />
          <span class="icp"><img src="/images/gov.png" style="height: 16px;width: 16px; display: inline-block;vertical-align: middle;margin-right: 3px;"/><a href="https://beian.mps.gov.cn/#/query/webSearch?code=50010602503871" rel="noreferrer" target="_blank">渝公网安备50010602503871</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br" />
          <span class="icp"><a href="https://beian.miit.gov.cn" target="_blank">渝ICP备2020011834号-2</a></span></div>
      <div class="footer-line"></div>
      <div class="footer-line"></div>
    </div></footer>
  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
